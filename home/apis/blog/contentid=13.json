{"status":"success","code":200,"data":{"id":13,"title":"Laravel个人博客后端开源部署","desc":"登录，注册，找回密码（邮箱），第三方登录（QQ,GITEE,GITHUB）\n文章管理，用户管理，留言管理，友链管理，公告管理，首页轮播管理，音乐管理，成长路线管理","content":"### 项目演示\n\n网站首页：[https://www.yunmobai.cn/](https://www.yunmobai.cn/)\n\n网站前端源码：[https://gitee.com/baymaxsjj/by-vue-blog](https://gitee.com/baymaxsjj/by-vue-blog)\n网站后端源码：[https://gitee.com/baymaxsjj/by-laravel-blog](https://gitee.com/baymaxsjj/by-laravel-blog)\n此项目使用的第三方图床，并配置多个图床，可自定义选择，也可使用又拍云等\n<table>\n  <tbody>\n   <tr>\n      <td align=\"center\" valign=\"middle\">\n          <img src=\"https://img-blog.csdnimg.cn/2020103109302977.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTI5NDYwNw==,size_16,color_FFFFFF,t_70#pic_center\" >\n      </td>\n      <td align=\"center\" valign=\"middle\">\n          <img src=\"https://img-blog.csdnimg.cn/20201031093613940.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTI5NDYwNw==,size_16,color_FFFFFF,t_70#pic_center\" >\n      </td>\n        <td align=\"center\" valign=\"middle\">\n          <img src=\"https://img-blog.csdnimg.cn/20201031093203324.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTI5NDYwNw==,size_16,color_FFFFFF,t_70#pic_center\" >\n      </td>\n    </tr>\n    <tr>\n      <td align=\"center\" valign=\"middle\">\n          <img src=\"https://img-blog.csdnimg.cn/20201031092813332.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTI5NDYwNw==,size_16,color_FFFFFF,t_70#pic_center\" >\n      </td>\n      <td align=\"center\" valign=\"middle\">\n          <img src=\"https://img-blog.csdnimg.cn/20201031092919842.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTI5NDYwNw==,size_16,color_FFFFFF,t_70#pic_center\" >\n      </td>\n        <td align=\"center\" valign=\"middle\">\n          <img src=\"https://img-blog.csdnimg.cn/2020103109332370.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTI5NDYwNw==,size_16,color_FFFFFF,t_70#pic_center\" >\n      </td>\n    </tr>\n    \n  </tbody>\n</table>\n\n### 项目介绍\nVue版本：2.6.12，Laravel版本：7.0\n完成模块：\n登录，注册，找回密码（邮箱），第三方登录（QQ,GITEE,GITHUB）\n文章管理，用户管理，留言管理，友链管理，公告管理，首页轮播管理，音乐管理，成长路线管理\n### 项目配置\n\n```bash\n# 安装依赖\ncomposer install \n# 生成key\nphp artisan key:generate\n# 生成jwt-key\nphp artisan jwt:secret\n# 生成数据库表（由于后来修改表结构比较大，就没有去修改数据库迁移，可以直接将database/blog.sql导入数据库即可）\nphp artisan migrate\n# 填充数据\nphp artisan db:seed\n# 启动服务\nphp artisan serve\n# .env 上线配置，注意上线要修改，不然所有报错将会在用户端显示，低版本Laravel 还可能会泄漏.evn配置文件中重要信息\nAPP_ENV=local 改成 APP_ENV=production\nAPP_DEBUG=true 改成 APP_DEBUG=false\n```\n### 第三方登录\n此项目目前支持QQ,Gitee,GitHub登录，可以扩展，[第三方登录包](https://socialiteproviders.com/)，下载安装如下配置！Gitee和GitHub直接到个人账号设置里开启就可以直接使用，如要申请QQ 登录，需要到[QQ互联](https://connect.qq.com/manage.html#/)注册开发者，注意多次申请失败（身份证审核失败情况）直接找在线客服，快速审核通过，我就是搞了5，6此没搞好，直接找到客服，十来分钟就审核通过了！\n\n```bash\n# 下载对应包，socialiteproviders/第三方登录名\ncomposer require socialiteproviders/qq\n\n# 添加事件监听器 App/Providers/EventServiceProvider\nprotected $listen = [\n    \\SocialiteProviders\\Manager\\SocialiteWasCalled::class => [\n        # 注意：官方有错误是QqExtendSocialite，不是QQ，这里我按官方给的搞半天没搞好，结果参看原文件，才发现是Qq\n        'SocialiteProviders\\\\QQ\\\\QqExtendSocialite@handle',\n    ],\n];\n\n# configure config/services.php\n'qq' => [\n    'client_id' => env('QQ_CLIENT_ID'),\n    'client_secret' => env('QQ_CLIENT_SECRET'),\n    'redirect' => env('QQ_REDIRECT_URI'),\n]\n# .env 中配置\nQQ_CLIENT_ID=App ID\nQQ_CLIENT_SECRET=App Key\nQQ_REDIRECT_URI=回调地址\n……\n#其它包类似，把QQ改成对应名\n# start building \nreturn Socialite::driver('qq')->redirect();\n```\n### 扩展第三方登录\n由于此项目是动态路由，所以只需按照上方添加第三方登录包后，就可以直接使用。使用的动态路由根据第三方登录名为参数\n\n```php\n//第三方登录请求地址\n//party 动态参数，是第三方登录名。如：https://域名/login/qq/redirece \nRoute::get('/login/{party}/redirect','UserController@redirectToProvider');\n//第三方登录回调地址\nRoute::get('/login/{party}/callback','UserController@handleProviderCallback');\n//以下是控制器配置\n /**\n\t* 将用户重定向到party认证页面\n\t*\n\t* @return Response\n\t*/\n\tpublic function redirectToProvider($party)\n\t{\n\t\t// dd($party);\n\t\treturn Socialite::driver($party)->redirect();\n\t}\n\t/**\n\t* 从party获取用户信息.\n\t*回调地址\n\t* @return Response\n\t*/\n\tpublic function handleProviderCallback($party)\n\t{\n\t\t$partyUser= Socialite::driver($party)->stateless()->user();\n\t}\n```\n\n### 安装jwt\n使用 JWT 对用户身份验证,\n```bash\ncomposer require tymon/jwt-auth\n# 修改 config/app.php\n'providers' => [\n    ...\n    Tymon\\JWTAuth\\Providers\\LaravelServiceProvider::class,\n]\n# 发布配置文件\nphp artisan vendor:publish --provider=\"Tymon\\JWTAuth\\Providers\\LaravelServiceProvider\"\n# 生成key\nphp artisan jwt:secret\n```\n### 安装邮箱模板\n\n```bash\n#安装邮件模版\ncomposer require qoraiche/laravel-mail-editor\n# 发布配置文件\nphp artisan vendor:publish --provider=\"qoraiche\\mailEclipse\\mailEclipseServiceProvider\"\nphp artisan migrate\n# 访问地址\nhttp://localhost:8080/maileclipse\n# 修改模板  /resources/views\n编写邮箱模板，可以使用markdown语法也可使用html\n# 修改内置模板样式 /resources/viewsvendor\n在该文件夹下修改对于的模块样式及布局\n# .env\nMAIL_MAILER=smtp\nMAIL_HOST=smtp.qq.com\nMAIL_PORT=465\nMAIL_USERNAME=邮箱号\nMAIL_PASSWORD=邮箱码\nMAIL_ENCRYPTION=ssl\nMAIL_FROM_ADDRESS=邮箱号\nMAIL_FROM_NAME=发送者名\n```\n# 浏览统计\n用于对文章浏览量统计！\n```bash\ncomposer require awssat/laravel-visits\n# 添加配置文件\nphp artisan vendor:publish --provider=\"awssat\\Visits\\VisitsServiceProvider\"\n# 修改.env文件\nCACHE_DRIVER=file 改成 CACHE_DRIVER=array\n# 需要安装redis，可以在宝塔面板中安装启动，修改密码\n#php 需要安装redis 扩展，可在宝塔面板，php 扩展中安装\n#.env 配置 \nREDIS_CLIENT=predis\nREDIS_HOST=127.0.0.1\nREDIS_PASSWORD=# redis 密码\nREDIS_PORT=6379\n```\n\n### 常用命令\n```bash\n# 添加模型 -m 生成数据库迁移\nphp artisan make:model Models/Article -m\n# 添加控制器\nphp artisan make:controller Api/ArticleController\n# 添加验证\nphp artisan make:request ArticleRequest\n# 清除配置信息缓存\nphp artisan config:cache\nphp artisan config:clear\n# 路由缓存\nphp artisan route:cache\nphp artisan route:clear\n# 数据填充\n# 生成User模型的工厂\nphp artisan make:factory UserFactory --model=Models/User\n# 生成User的数据填充\nphp artisan make:seeder UsersTableSeeder\n# 数据填充\nphp artisan db:seed\n# 填充指定模型\nphp artisan db:seed --class=UsersTableSeeder\n# 重新生成数据库表并填充数据\nphp artisan migrate:refresh --seed\n# 进入数据填充测试\nphp artisan tinker\n```\n### .env 模板\n\n```bash\nAPP_NAME= 云墨白\nAPP_ENV=# local/production\nAPP_KEY=#  key\nAPP_DEBUG=# true/false\nAPP_URL=http://localhost\n\nLOG_CHANNEL=stack\n\nDB_CONNECTION=mysql\nDB_HOST=127.0.0.1\nDB_PORT=3306\nDB_DATABASE=# 数据库名\nDB_USERNAME=# 数据库密码\nDB_PASSWORD=\n\nBROADCAST_DRIVER=log\nCACHE_DRIVER=array\nQUEUE_CONNECTION=sync\nSESSION_DRIVER=file\nSESSION_LIFETIME=120\n\nREDIS_HOST=127.0.0.1\nREDIS_PASSWORD=null\nREDIS_PORT=6379\n\nMAIL_MAILER=smtp\nMAIL_HOST=smtp.qq.com\nMAIL_PORT=465\nMAIL_USERNAME=# 邮箱名\nMAIL_PASSWORD=# 邮箱密码，qq邮箱需到邮箱账户设置了开启POP3/SMTP服务 \nMAIL_ENCRYPTION=ssl\nMAIL_FROM_ADDRESS=# 邮箱\nMAIL_FROM_NAME=# 发送名\n\nAWS_ACCESS_KEY_ID=\nAWS_SECRET_ACCESS_KEY=\nAWS_DEFAULT_REGION=us-east-1\nAWS_BUCKET=\n\nPUSHER_APP_ID=\nPUSHER_APP_KEY=\nPUSHER_APP_SECRET=\nPUSHER_APP_CLUSTER=mt1\n\nMIX_PUSHER_APP_KEY=\"${PUSHER_APP_KEY}\"\nMIX_PUSHER_APP_CLUSTER=\"${PUSHER_APP_CLUSTER}\"\n\nREDIS_CLIENT=predis\nREDIS_HOST=127.0.0.1\nREDIS_PASSWORD=# redis 密码\nREDIS_PORT=6379\n\nGITEE_CLIENT_ID=# App ID\nGITEE_CLIENT_SECRET=# App Key\nGITEE_REDIRECT_URI=# App 回调地址\n\nGITHUB_CLIENT_ID=\nGITHUB_CLIENT_SECRET=\nGITHUB_REDIRECT_URI=\n\nQQ_CLIENT_ID=\nQQ_CLIENT_SECRET=\nQQ_REDIRECT_URI=\n\nUPYUN_PROJECT_NAME =# 又拍云储存名称\nUPYUN_OPERATOR_NAME =# 又拍云账号\nUPYUN_OPERATOR_PASSWORD =# 又拍云密码\nUPYUN_CNAME =# 又拍云域名\n\nJWT_SECRET=# jwt key\n```","img":"https://p.pstatp.com/origin/ffe5000317d50a10e947","classty":"后端","channels":null,"name":"云墨白","click":20,"like":1,"is_show":1,"head_show":1,"share_show":1,"copyright_show":1,"message_show":1,"deleted_at":1,"created_at":"2020-10-31T08:17:28.000000Z","updated_at":"2020-12-16T12:10:29.000000Z","label":["Laravel","Php","Blog"],"view_count":1,"prevArticle":[{"id":12,"title":"Vue个人博客前端开源部署"}],"nextrAticle":[{"id":14,"title":"Vue3+TypeScript学习之旅---联想壁纸库项目部署"}]}}