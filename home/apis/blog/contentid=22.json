{"status":"success","code":200,"data":{"id":22,"title":"安卓WebView网页视频链接提取","desc":"安卓WebView网页视频链接提取","content":"# 前言\n有些知识用完就丢，这就是目前我的状态，在校学的到不少，精通的到几乎没有吧！最近闲来无事，看到一个app就是通过一些网络解析线路解析Vip视频的，没想到这种软件还收费可笑。于是我又把学了半学期的安卓捡了起来，开始我的一番乱操作。\n### 展示\n虽然这又是一篇敷衍的文章吧！但是还是要把我的努力一个星期结果的截图放上吧！本App就是无聊，顺便学习完成的！就不放出App,要维护良好的互联网氛围！本App只适用于本人学习。好了到此安卓知识又该扔了。\n>>>>>>>>>>>>>>>>>图片加载失败\n\n## 解析原理\n网上很多的解析都是通过视频网址复制到网站上，然后网站将保存在自己服务器的视频链接返回。这些网站通常会把和前端的代码进行混淆，然后前端请求返回视频播放链接。\n## WebView链接提取\n安卓上通过WebView去加载这些网页，然后将视频播放链接提取出来，本来我是想通过api直接请求的。但如上所说都是加密的请求，破解费事，不如将网页解析的播放链接提取出来省事。\n``` java\n/** 使用系统API，根据url获得对应的MIME类型 */\n    public static String getMimeTypeFromUrl(String url) {\n        String type = null;\n        //使用系统API，获取URL路径中文件的后缀名（扩展名）\n        String extension = MimeTypeMap.getFileExtensionFromUrl(url);\n        if (extension != null) {\n            //使用系统API，获取MimeTypeMap的单例实例，然后调用其内部方法获取文件后缀名（扩展名）所对应的MIME类型\n            type = MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);\n            if (type == null){\n                if (\"m3u8\".equals(extension)){\n                    //m3u8只是Unicode版本的m3u而已,目前(Android O)MimeTypeMap里没有m3u8对应的mimetype\n                    type = MimeTypeMap.getSingleton().getMimeTypeFromExtension(\"m3u\");\n                }else if(url.endsWith(\".js\")||url.endsWith(\".php\")){\n                    type=\"js/php\";\n                }else{\n                    // TODO Auto-generated method stub\n                    try {\n                        URL uri=new URL(url);\n                        URLConnection conn=uri.openConnection();\n                        type=conn.getContentType();\n                        System.out.print(type);\n                    } catch (MalformedURLException e) {\n                        // TODO Auto-generated catch block\n                        e.printStackTrace();\n                    } catch (IOException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n        }\n        Log.i(\"bqt\", \"系统定义的MIME类型为：\" + type+\"--->\"+url);\n        return type;\n    }\n```\n# 安卓的一些破事\n## webView\n安卓的webview用到我想哭，到处的小问题，如资源打不开，导致网页打不开，后来又使用了腾讯的X5内核，呵呵，搞了半天。问题依旧，于是我就使用了GitHub大佬门封装的webview解决了我的这些小问题。此库在这--->AgentWeb\n## 视频播放\n说到视频播放器，我开始使用的是腾讯云视频播放器sdk,就是封装的demo功能不全，没有加载提示，等问题后来，又转到了阿里云播放器，这个就搞到我想哭，搞了一天，没跑起来，主要是阿里云的demo用的是V7,V4这些库，而项目用的是X,乱的要死啊！啊，这和前端有些相似啊！最后无奈还是用了腾讯","img":"https://bit-images.bj.bcebos.com/bit-new/file/20210511/1g27.jpg","classty":"前端","channels":null,"name":"Baymax","click":1,"like":1,"is_show":1,"head_show":1,"share_show":0,"copyright_show":1,"message_show":0,"deleted_at":1,"created_at":"2021-05-11T07:14:17.000000Z","updated_at":"2021-05-20T04:20:58.000000Z","label":["Java","Android"],"view_count":3,"prevArticle":[{"id":21,"title":"C语言-链表操作"}],"nextrAticle":[{"id":1,"title":"云墨白博客——更新日志"}]}}