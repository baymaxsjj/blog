{"status":"success","code":200,"data":{"current_page":3,"data":[{"id":10,"title":"\u4f7f\u7528marked\u89e3\u6790MARKDOWN,\u751f\u6210\u76ee\u5f55,\u8fd0\u884c\u4ee3\u7801\u793a\u4f8b","desc":"\u5199\u6587\u7ae0\u6211\u5c31\u91c7\u7528\u4e86mavon-editor,\u5728\u540e\u53f0\u5c06\u5199\u597d\u7684Markdown\u6587\u7ae0\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u91cc\uff0c\u524d\u53f0\u5728\u83b7\u53d6Markdown\u6587\u7ae0\u5c06\u5176\u89e3\u6790\u6210html\u4ee3\u7801\u7136\u540e\u6e32\u67d3\u3002\u6240\u4ee5\u5199\u6587\u7ae0\u4e0d\u7528\u6101\u4e86\uff0c\u90a3\u5982\u4f55\u89e3\u6790Markdown\u5462\uff01\u6211\u524d\u524d\u540e\u540e\u7528\u4e86`mavon-editor`\uff08\u5305\u592a\u5927\uff09\uff0c`vue-marked`\uff08\u529f\u80fd\u5c11\uff09\u7b49\u7b49\u63d2\u4ef6\u6765\u5b9e\u73b0\uff01\u7ed3\u679c\u4e0d\u6ee1\u8db3\u9884\u671f\u3002\u6240\u4ee5\u4e0d\u5982\u4f7f\u7528marked.js\u76f4\u63a5\u89e3\u6790\u5462\uff01\u5305\u5c0f\u6548\u7387\u9ad8\uff0c\u4e8e\u662f\u5c31\u5bf9marked.js\u8fdb\u884c\u5c01\u88c5\uff0c\u5b9e\u73b0\u4e86\u76ee\u5f55\uff0c\u8fd0\u884c\u4ee3\u7801\u5757\uff0c\u56fe\u7247\u67e5\u770b\u7b49\u529f\u80fd\uff01\u5df2\u7ecf\u80fd\u6ee1\u8db3\u4e86\u57fa\u672c\u7684\u9700\u6c42\u3002","content":"## \u524d\u8a00\n\n\u5bf9\u4e8e\u6211\u6765\u8bf4\u4e00\u4e2a\u535a\u5ba2\u7cfb\u7edf\u5c31\u662f\u7528\u6765\u603b\u7ed3\u81ea\u5df1\u6240\u5b66\u5f97\u77e5\u8bc6\u7684\u3002\u5199\u5199\u6587\u7ae0\uff0c\u5de9\u56fa\u6280\u672f\uff0c\u5199\u6587\u7ae0\u6211\u5c31\u91c7\u7528\u4e86`mavon-editor`,\u5728\u540e\u53f0\u5c06\u5199\u597d\u7684Markdown\u6587\u7ae0\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u91cc\uff0c\u524d\u53f0\u5728\u83b7\u53d6Markdown\u6587\u7ae0\u5c06\u5176\u89e3\u6790\u6210html\u4ee3\u7801\u7136\u540e\u6e32\u67d3\u3002\u6240\u4ee5\u5199\u6587\u7ae0\u4e0d\u7528\u6101\u4e86\uff0c\u90a3\u5982\u4f55\u89e3\u6790Markdown\u5462\uff01\u6211\u524d\u524d\u540e\u540e\u7528\u4e86`mavon-editor`\uff08\u5305\u592a\u5927\uff09\uff0c`vue-marked`\uff08\u529f\u80fd\u5c11\uff09\u7b49\u7b49\u63d2\u4ef6\u6765\u5b9e\u73b0\uff01\u7ed3\u679c\u4e0d\u6ee1\u8db3\u9884\u671f\u3002\u6240\u4ee5\u4e0d\u5982\u4f7f\u7528marked.js\u76f4\u63a5\u89e3\u6790\u5462\uff01\u5305\u5c0f\u6548\u7387\u9ad8\uff0c\u4e8e\u662f\u5c31\u5bf9marked.js\u8fdb\u884c\u5c01\u88c5\uff0c\u5b9e\u73b0\u4e86\u76ee\u5f55\uff0c\u8fd0\u884c\u4ee3\u7801\u5757\uff0c\u56fe\u7247\u67e5\u770b\u7b49\u529f\u80fd\uff01\u5df2\u7ecf\u80fd\u6ee1\u8db3\u4e86\u57fa\u672c\u7684\u9700\u6c42\u3002\n\n### marked.js\n\n> \u4e00\u4e2a\u529f\u80fd\u9f50\u5168\u7684markdown\u89e3\u6790\u5668\u548c\u7f16\u8bd1\u5668\uff0c\u7528JavaScript\u7f16\u5199\u3002 \u4e13\u4e3a\u901f\u5ea6\u800c\u8bbe\u8ba1\u3002[marked.js\u5b98\u7f51](https:\/\/marked.js.org\/)\n>\n> - \u5feb\u901f\u6784\u5efa\n> - \u7528\u4e8e\u89e3\u6790markdown\u7684\u4f4e\u7ea7\u7f16\u8bd1\u5668\uff0c\u65e0\u9700\u957f\u65f6\u95f4\u7f13\u5b58\u6216\u963b\u585e\n> - \u975e\u5e38\u8f7b\u91cf\uff0c\u540c\u65f6\u5b9e\u73b0\u652f\u6301\u7684falses\u548c\u89c4\u683c\u7684\u6240\u6709\u964d\u4ef7\u529f\u80fd\n> - \u652f\u6301\u6d4f\u89c8\u5668\uff0c\u670d\u52a1\u5668\u6216\u547d\u4ee4\u884c\u754c\u9762\uff08CLI\uff09\n\n#### \u5b89\u88c5\n\n```javascript\nnpm install marked --save\n\/\/\u5728vue\u7ec4\u4ef6\u4e2d\u5bfc\u5165\nimport marked  from 'marked' \n```\n\n#### \u4f7f\u7528\n\n```javascript\n\/\/markdownString:\u8981\u89e3\u6790\u7684markdown\uff0c\u5fc5\u987b\u4e3a\u5b57\u7b26\u4e32\n\/\/options:marked.js\u7684\u914d\u7f6e\n\/\/callback:\u56de\u8c03\u51fd\u6570\u3002I\u5982\u679c options \u53c2\u6570\u6ca1\u6709\u5b9a\u4e49\uff0c\u5b83\u5c31\u662f\u7b2c\u4e8c\u4e2a\u53c2\u6570\u3002\nmarked(markdownString [,options] [,callback])\n```\n\n#### \u57fa\u672c\u914d\u7f6e\n\n```javascript\n marked.setOptions({\n      renderer: rendererMD,\n      gfm: true,\/\/\u9ed8\u8ba4\u4e3atrue\u3002 \u5141\u8bb8 Git Hub\u6807\u51c6\u7684markdown.\n      tables: true,\/\/\u9ed8\u8ba4\u4e3atrue\u3002 \u5141\u8bb8\u652f\u6301\u8868\u683c\u8bed\u6cd5\u3002\u8be5\u9009\u9879\u8981\u6c42 gfm \u4e3atrue\u3002\n      breaks: false,\/\/\u9ed8\u8ba4\u4e3afalse\u3002 \u5141\u8bb8\u56de\u8f66\u6362\u884c\u3002\u8be5\u9009\u9879\u8981\u6c42 gfm \u4e3atrue\u3002\n      pedantic: false,\/\/\u9ed8\u8ba4\u4e3afalse\u3002 \u5c3d\u53ef\u80fd\u5730\u517c\u5bb9 markdown.pl\u7684\u6666\u6da9\u90e8\u5206\u3002\u4e0d\u7ea0\u6b63\u539f\u59cb\u6a21\u578b\u4efb\u4f55\u7684\u4e0d\u826f\u884c\u4e3a\u548c\u9519\u8bef\u3002\n      sanitize: false,\/\/\u5bf9\u8f93\u51fa\u8fdb\u884c\u8fc7\u6ee4\uff08\u6e05\u7406\uff09\n      smartLists: true,\n      smartypants: false\/\/\u4f7f\u7528\u66f4\u4e3a\u65f6\u9ae6\u7684\u6807\u70b9\uff0c\u6bd4\u5982\u5728\u5f15\u7528\u8bed\u6cd5\u4e2d\u52a0\u5165\u7834\u6298\u53f7\u3002\n  });\n```\n\n### \u5b9e\u73b0\u76ee\u5f55\n\n\u5b9e\u73b0\u76ee\u5f55\u529f\u80fd\uff0c\u7f51\u4e0a\u53c8\u5f88\u591a\u7684\u5199\u6cd5\uff01\u50cf\u6211\u8fd9\u6837\u7684\u5c0f\u767d\u4e5f\u770b\u4e0d\u61c2\uff0c\u4ee3\u7801\u90fd\u597d\u957f\u3002\u6211\u5b9e\u73b0\u7684\u8fc7\u7a0b\u80af\u6709\u4e9b\u6295\u673a\u53d6\u5de7\u4e86\u3002\u5b9e\u73b0\u7684\u8fc7\u7a0b\u4e5f\u5f88\u7b80\u5355\uff0c\u6ca1\u6709\u6b63\u5219\u8868\u8fbe\uff0c\u6ca1\u6709\u590d\u6742\u7684\u4ee3\u7801\u4e5f\u5c31\u51e0\u884c\u4ee3\u7801\u5427\uff01\n\n#### \u5b9e\u73b0\u539f\u7406\n\n\u770b\u770b\u4e0b\u9762\u8fd9\u5f20\u56fe\uff0c\u89c2\u5bdf\u4e00\u4e0b\u6807\u9898\u548c\u76ee\u5f55\u6709\u54ea\u4e9b\u76f8\u540c\u4e4b\u5904\u3002\n\n\u5176\u5b9e\u4ece\u4e0a\u5f80\u4e0b\u770b\u6ca1\u6709\u4ec0\u4e48\u4e0d\u540c\uff0c\u4ece\u5de6\u5f80\u53f3\u770b\u4e5f\u5c31\u662f\u51fa\u73b0\u4e86\u7f29\u8fdb\u3002\n\n\u6240\u4ee5\u6211\u7684\u76ee\u5f55\u5b9e\u73b0\u539f\u7406\uff0c\u5c06\u6240\u4ee5\u7684\u6807\u9898\u63d0\u53d6\u51fa\u6765\uff0c\u7136\u540e\u6839\u636e\u5176\u6807\u9898\u5927\u5c0f\u8fdb\u884c\u7f29\u8fdb\u3002\n![1600852591724.png](https:\/\/p.pstatp.com\/origin\/1373100029537b67fcab9)\n#### \u81ea\u5b9a\u4e49\u6e32\u67d3\u65b9\u5f0f\n\n\u77e5\u9053\u601d\u8def\u540e\uff0c\u6539\u5982\u4f55\u5b9e\u73b0\u5462\uff01\u901a\u8fc7marked.js\u6587\u6863\uff0c\u6211\u4eec\u53ef\u4ee5\u91cd\u5199renderer\uff08\u6e32\u67d3\uff09\uff0c\n\n```javascript\n let rendererMD = new marked.Renderer();\n let that=this\n \/*\n \u91cd\u5199\u6807\u9898\n text:\u6807\u9898\u6587\u672c\n level:\u6807\u7b7e\n *\/\n rendererMD.heading = function(text, level, raw) {\n     \/\/\u4fdd\u5b58\u8fd9\u7bc7\u6587\u7ae0\u7684\u6700\u5927\u6807\u7b7e \n     if(level<that.maxTitle){\n         that.maxTitle=level\n     }\n     anchor+=1\n     \/* \n     toc:\u6570\u7ec4\u7528\u4e8e\u4fdd\u5b58\u6807\u9898\uff0c\n     id:\u6807\u9898id,\u7528\u4e8e\u70b9\u51fb\u76ee\u5f55\u6eda\u52a8\u5230\u6539\u6807\u9898\n     tag:\u8bb0\u5f55\u5c5e\u4e8e\u90a3\u4e2a\u6807\u7b7e\uff08h1\u2026\u2026h6\uff09\n     test:\u6807\u7b7e\u5185\u5bb9\n     *\/\n     that.toc.push(\n         {\n             'id':anchor,\n             'tag':level,\n             'text':text\n         }\n     )\n     return `<h${level} id=\"toc-nav${anchor}\">${text}<\/h${level}>`;\n };\n\/\/\u91cd\u5199a\u6807\u7b7e\uff0c\u5728\u65b0\u6807\u7b7e\u6253\u5f00\n rendererMD.link = function(href,title,text){\n \treturn '<a href=\"'+href+'\" title=\"'+text+'\" target=\"_blank\">'+text+'<\/a>';\n}\n\/\/\u66f4\u591a\u89c4\u5219\u5230marked.js\u5b98\u7f51\u67e5\u770b\n```\n\n```html\n <ul >\n \t<li v-for=\"item of toc\" :key=\"item.id\"  @click=\"toTarget(item.id)\" :style=\"{'padding-left':item.tag-maxTitle+'em'}\" v-html=\"item.text\">\n\t<\/li>\n<\/ul>\n```\n\n###### \u4e3a\u4ec0\u4e48\u4fdd\u5b58\u6700\u5927\u6807\u9898\n\n\u901a\u8fc7\u4e5f\u662f\u6e32\u67d3\u6210\u529f\u540e\uff0c\u5982\u679c\u6ca1\u6709\u6ca1\u6709\u6700\u5927\u6807\u9898\uff0c\u5047\u5982\u6587\u7ae0\u53ea\u6709h6\u6807\u9898\uff0c\u90a3\u4e48\u76ee\u5f55\u8fd8\u662f\u4f1a\u7f29\u8fdb6\u4e2a\u5b57\u7b26\uff0c\u4e0d\u597d\u770b\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\u5c31\u662f\u4e3a\u4e86\u4fdd\u8bc1\u6240\u6709\u7684\u6807\u9898\u90fd\u662f\u4ece\u6700\u5927\u7684\u4ee5\u4e0b\u5f00\u59cb\u7f29\u8fdb\u3002\u7f29\u8fdb\u5229\u7528\u7684padding-left\u3002`item.tag-maxTitle`\u4e5f\u597d\u7406\u89e3\uff1a\n\n```\n\/\/\u6700\u5927\u6807\u9898\u4eceh1\u5f00\u59cb\t\t\t\/\/\u6700\u5927\u6807\u9898\u4eceh4\u5f00\u59cb\nh1->0em\t\t\t\t\th4->0em\nh2->1em\t\t\t\t\th5->1em\n\u2026\u2026\t\t\t\t\t\t\u2026\u2026\n```\n\n\u4e0a\u9762\u53ef\u4ee5\u770b\u51fa\u6700\u5927\u6807\u7b7e\u59cb\u7ec8\u4e3a0em\uff0c\u5176\u5b83\u6807\u7b7e\u90fd\u662f\u76f8\u5bf9\u6700\u5927\u6807\u7b7e\u7684\u504f\u79fb\u3002\n### \u8fd0\u884c\u4ee3\u7801\n\u50cf\u6211\u7684\u535a\u5ba2\uff0c\u5c31\u53ef\u4ee5\u8fd0\u884c\u4e00\u4e9b\u4ee3\u7801\u793a\u4f8b\u6765\u5c55\u793a\uff0c\u4e3b\u8981\u539f\u7406\u5c31\u662f\u901a\u8fc7Components \u5b9a\u4e49\u4e00\u4e2a\u8fd0\u884c\u4ee3\u7801\u7684\u6807\u7b7e\u3002\u901a\u8fc7marked.js \u89e3\u6790\u4ee3\u7801\u5757\uff0c\u5c06\u7279\u70b9\u8bed\u8a00\u7684\u4ee3\u7801\u5757\u63d0\u53d6\u51fa\u6765\uff08\u6211\u8fd9\u91cc\u5c31\u662f\u5c06demo \u6807\u8bb0\u7684\u8bed\u8a00\u63d0\u53d6\u51fa\u6765\uff09\uff0c\u7136\u540e\u62fc\u63a5\u6210\u81ea\u5b9a\u4e49\u7684\u6807\u7b7e\u3002\n```js\n rendererMD.code = function (code, language) {\n                 \/\/ \u63d0\u53d6language\u6807\u8bc6\u4e3a demo \u7684\u4ee3\u7801\u5757\u91cd\u5199\n                     if (language === 'demo') {\n                         DEMO_UID+=2\n                        \/\/ \u9875\u9762\u4e2d\u53ef\u80fd\u4f1a\u6709\u5f88\u591a\u7684\u793a\u4f8b\uff0c\u8fd9\u91cc\u589e\u52a0ID\u6807\u8bc6\n                        const id = 'demo-mobai-template-' + (DEMO_UID)\n                        \/\/ \u5c06\u4ee3\u7801\u5185\u5bb9\u4fdd\u5b58\u5728template\u6807\u7b7e\u4e2d\n                        const template = `<template type=\"text\/demo\" id=\"${id}\">${code}<\/template>`\n                        \/\/ \u5c06template\u548c\u81ea\u5b9a\u4e49\u6807\u7b7e\u901a\u8fc7ID\u5173\u8054\n                        const sandbox = `<demo-mobai template=\"${id}\"><\/demo-mobai>`\n                        \/\/ \u8fd4\u56de\u65b0\u7684HTML\n                        return template + sandbox\n                    }\n}\n```\n\u4e0a\u9762\u89e3\u51b3\u4e86\u6807\u7b7e\u95ee\u9898\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u89e3\u6790\u6807\u7b7e\uff0c\u4ee5\u4e0b\u7684\u5927\u90e8\u5206\u4ee3\u7801[\u53c2\u8003\u81ea\u6c34\u58a8\u5bd2](https:\/\/www.smohan.net\/)\uff0c\u6211\u4fee\u6539\u4e86\u90e8\u5206\u4ee3\u7801\uff0c\u4e3b\u8981\u89e3\u6790\u4e86\u4e24\u4e2a\u95ee\u9898\uff0c\n\u4e00\u662f\uff0c\u9ed8\u8ba4\u7684\u8fd0\u884c\u4ee3\u7801\u4f1a\u6709\u4e00\u4e2a\u6837\u5f0f\uff0c\u6211\u901a\u8fc7id\u53f7\u533a\u5206\u8981\u663e\u793a\u548c\u4e0d\u8981\u663e\u793a\u7684\uff0c\n\u4e8c\u662f\uff0c\u5728\u6211\u7528\u7684\u65f6\u5019\u53d1\u73b0\u4e0d\u80fd\u5f15\u5165\u5728\u7ebf\u7684js,\u53ea\u80fd\u8fd0\u884c\u4ee3\u7801\u5757\u4e2d\u7684\u4ee3\u7801\uff0c\u8fd9\u6837\u5c31\u4e0d\u592a\u597d\u4e86\uff0c\u6bd4\u5982\u6211\u8981\u7528\u4e00\u4e9b\u6846\u67b6\uff0c\u6bd4\u6211\u6765\u8bf4\u6211\u7684\u8fd9\u7bc7\u6587\u7ae0\uff0c[vue \u97f3\u4e50\u64ad\u653e\u5668](https:\/\/www.yunmobai.cn\/blog\/7),\u5c31\u80fd\u8fd0\u884c\u5728\u7ebf\u7684vue \u6846\u67b6\u548celement ui,\u8fd9\u4e2a\u95ee\u9898\u662f\u7531\u4e8e\uff0c\u5f15\u5165\u7684ji\u4ee3\u7801\u540e\u6267\u884c\uff0c\u6240\u6709\u4e0d\u80fd\u89e3\u6790\uff0c\u6211\u7684\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u901a\u8fc7Promise\u5f53js\u52a0\u8f7d\u6210\u529f\u540e\uff0cresolve();\u6dfb\u52a0\u5230Promise\u6570\u7ec4\u4e2d\uff0c\u901a\u8fc7Promise.all(Promise\u6570\u7ec4)\u5f53\u6240\u6709js \u90fd\u52a0\u8f7d\u6210\u529f\u540e\u5728\u5c06\u4ee3\u7801\u5757\u4e2d\u7684\u4ee3\u7801\u6dfb\u52a0\u5230Shadow DOM\u4e2d\u3002\n\n```js\n let arr=[]\n        \/\/ 4. \u62fc\u5408\u6240\u6709Script\n        for(let i=0;i<scripts.length;i++){\n            \/\/ \u5168\u5c40\u66ff\u6362document\u4e3a\u65b0\u7684$shadowDocument\n            if(scripts[i].src){\n\t\t\t\t\/\/ \u521b\u5efa\n                const $sc = document.createElement('script')\n                $sc.setAttribute(\"type\", \"text\/javascript\");\n                $sc.setAttribute('src', scripts[i].src);\n                this.shadow.appendChild($sc)\n                arr.push(\n\t\t\t\t\t\/\/\u901a\u8fc7Promise\u6765\u89e3\u51b3\uff0c\u6240\u6709js\u90fd\u52a0\u8f7d\u6210\u529f\u540e\uff0c\u5728\u5c06\u4ee3\u7801\u6dfb\u52a0\u5230Shadow DOM\n                    new Promise(function(resolve,reject){\n\t\t\t\t\t\/\/js \u52a0\u8f7d\u5b8c\u6210\u56de\u6267\u884c\n                    $sc.onload = function() {\n                        console.log($sc)\n                        resolve();\n                        };\n                    })\n                )\n                this.shadow.getElementById('demo-run').removeChild(scripts[i])\n                continue\n            }\n           \n            $globalDefines.innerHTML += `{\n                ${scripts[i].textContent.replace(\/(document)\\.(getElementById|querySelector|querySelectorAll|getElementsByClassName|getElementsByName|getElementsByTagName)\/gm, '$shadowDocument.$2').replace(\/\\r\\n?\/gm, '')}\n            }`\n            \/\/ \u79fb\u9664\u65e7\u8282\u70b9\n            this.shadow.getElementById('demo-run').removeChild(scripts[i])\n        }\n        $globalDefines.innerHTML += `})();`\n        \n        Promise.all(arr).then(()=>{\n            console.log('js\u52a0\u8f7d\u6210\u529f');\n            this.shadow.appendChild($globalDefines)\n        })\n```\n\n\n\n> Web Components \u6807\u51c6\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u7279\u6027\u662f\uff0c\u5b83\u4f7f\u5f00\u53d1\u8005\u80fd\u591f\u5c06HTML\u9875\u9762\u7684\u529f\u80fd\u5c01\u88c5\u4e3a custom elements\uff08\u81ea\u5b9a\u4e49\u6807\u7b7e\uff09\uff0c\u800c\u5f80\u5e38\u5f00\u53d1\u8005\u4e0d\u5f97\u4e0d\u5199\u4e00\u5927\u5806\u5197\u957f\u3001\u6df1\u5c42\u5d4c\u5957\u7684\u6807\u7b7e\u6765\u5b9e\u73b0\u540c\u6837\u7684\u9875\u9762\u529f\u80fd\n\n\u9996\u5148\u8981\u638c\u63e1\u4e24\u4e2a\u77e5\u8bc6\u70b9\uff0cComponents \u548cShadow DOM[\u8be6\u60c5\u53c2\u8003MDN](https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/Web_Components\/Using_custom_elements)\n\u8fd9\u4e24\u4e2a\u6211\u5c31\u4e0d\u8fc7\u591a\u8bf4\uff0c\u5176\u5b9e\u6211\u4e5f\u4e0d\u592a\u4f1a\uff0c\u4e5f\u6ca1MDN\u8bf4\u7684\u7ec6\uff0c\u4e0d\u8fc7\u4f7f\u7528\u7684\u8981\u8c28\u614e\uff0c\u6709\u517c\u5bb9\u95ee\u9898\uff0c\n\u4e0b\u9762\u7684\u4ee3\u7801\u624d\u662f\u5173\u952e\uff0c\u4e0a\u9762\u5df2\u7ecf\u5c06\u7279\u5b9a\u8bed\u8a00\u7684\u4ee3\u7801\u5feb\u8f6c\u5316\u6210\u81ea\u5b9a\u4e49\u6807\u7b7e\uff0c\u901a\u8fc7marked.js \u6e32\u67d3\u5230\u9875\u9762\u4e0a\u4e86\uff0c\u4f46\u5e76\u4e0d\u8d77\u4f5c\u7528\uff0c\u56e0\u4e3a\u6d4f\u89c8\u5668\u8bc6\u522b\u4e0d\u51fa\u6539\u6807\u7b7e\uff0c\u4e0b\u9762\u901a\u8fc7Components \u5b9a\u4e49\u4e00\u4e2a\u6807\u7b7e\uff0c\u7136\u540e\u901a\u8fc7Shadow ,\u4ee5\u4e0b\u662f\u6211\u535a\u5ba2\u4e2d\u89e3\u6790MARKDOWN\u7684\u4e00\u4e2a\u7ec4\u4ef6\uff0c\u5176\u4e2d\u4f7f\u7528\u5230\u4e00\u4e2avue-dompurify-html\u7528\u4e86\u5bf9MARKDOWN\u8fc7\u6ee4\u9632\u6b62\u6076\u610f\u4ee3\u7801\uff0c\n```js\n<template>\n    <div class=\"marked\">\n        <div ref=\"preview\" class=\"write\">\n\t\/\/\u6ca1\u6709vue-dompurify-html\uff0c\u53ef\u4ee5\u5c06v-dompurify-html=\"html\"\u6539\u6210v-html=\"html\"\n            <span\n                v-if=\"dompurify\"\n                v-dompurify-html=\"html\"\n            ><\/span>\n            <span\n                v-else\n                v-html=\"html\"\n            ><\/span>\n\t\/\/\u6ca1\u6709\u4f7f\u7528element ui \u53ef\u4ee5\u5c06\u4e0b\u9762\u5220\u9664\n        <el-image \n            v-if=\"imgView\"\n            id=\"imgview\"\n            style=\"height:0px\"\n            :src=\"url\" \n            :preview-src-list=\"srcList\">\n            <\/el-image>\n        <\/div>\n        <transition name=\"slide-fade\">\n        <div class=\"toc\" v-if=\"tocNav&&toc.length\" v-show=\"tocIsShow\">\n            <div class=\"toc-top a-tag\">\n                <span class=\"toc-title\">TOC<\/span>\n                <a href=\"javascript:;\" class=\"toc-close\" @click=\"tocIsShow=false\">\u300c \u5173\u95ed \u300d<\/a>\n            <\/div>\n            \n            <ul >\n                <li v-for=\"item of toc\" :key=\"item.id\"  @click=\"toTarget(item.id)\" :style=\"{'padding-left':item.tag-maxTitle+'em'}\" v-html=\"item.text\">\n                <\/li>\n            <\/ul>\n        <\/div>\n        <\/transition>\n        <transition name=\"slide-fade\">\n             <div class=\"toc-tag\"  v-if=\"tocNav &&toc.length\" v-show=\"!tocIsShow\" @click=\"tocIsShow=true\"> \n                <i><\/i>\n                <i><\/i>\n                <i><\/i>\n            <\/div>\n        <\/transition>\n        \n    <\/div>\n\n<\/template>\n<script>\n\nimport marked  from 'marked' \nimport hljs   from '@\/utils\/highlight.min.js' \nimport { Notification } from 'element-ui';\nlet rendererMD = new marked.Renderer();\nconst TAG_NAME = 'demo-mobai'\nlet Deom=true;\ntry {\n\u3000\u3000\/\/ \u6b64\u5904\u662f\u53ef\u80fd\u4ea7\u751f\u4f8b\u5916\u7684\u8bed\u53e5\n    customElements.define(TAG_NAME, class DemoSandbox extends HTMLElement {\n    constructor() {\n        super()\n        \/\/ \u4f7f\u7528\u5f71\u5b50DOM\n        this.shadow = this.attachShadow({\n        mode: 'open'\n        })\n        \/\/ \u83b7\u53d6\u5173\u8054\u7684\u4ee3\u7801\u5757\u6a21\u677f\u7684ID\n        const templateId = this.getAttribute('template')\n        const $template = document.getElementById(templateId)\n        if (!templateId) {\n        return\n        }\n        \/\/ \u83b7\u53d6\u4ee3\u7801\u5757\u5185\u5bb9\n        const template = $template.innerHTML\n        console.log(templateId)\n        let id=parseInt(templateId.split('demo-mobai-template-')[1]);\n        console.log(id%2==0)\n        if(id%2==0){\n              \/\/ \u7528\u83b7\u53d6\u5230\u7684\u4ee3\u7801\u5757\u6765\u586b\u5145\u5f71\u5b50DOM\u7684HTML\n            let code=marked('``` html  \\n'+template+'\\n```', {\n                sanitize: false,\n                highlight: function (code) {\n                        return hljs.highlightAuto(code).value;\n                },\n            })\n            this.shadow.innerHTML =`\n            <style>\n                :host {\n                    display:block;\n                    width:100%;\n                    padding: 0;\n                    border: 1px solid #f0f0f0;\n                    color: #414240;\n                    font-size: 1rem;\n                    position: relative;\n                    margin: 10px 0;\n                    min-height: 36px;\n                }\n                :host:before {\n                    content: \" \";\n                    position: absolute;\n                    -webkit-border-radis: 50%;\n                    border-radius: 50%;\n                    background: #ff6058;\n                    width: 12px;\n                    height: 12px;\n                    left: 15px;\n                    margin-top: 10px;\n                    -webkit-box-shadow: 20px 0 #ffbd2b, 40px 0 #3cef57;\n                    box-shadow: 20px 0 #ffbd2b, 40px 0 #3cef57;\n                    z-index: 2;\n                }\n                :host:after {\n                    content: \"demo\";\n                    position: absolute;\n                    top:0px;\n                    left: 50%;\n                    z-index: 2;\n                    color:var(--main-6);\n                    font-weight:bold;\n                    transform: translateX(-50%);\n                    font-size: 20px;\n                    line-height:32px\n                }\n                * {\n                    box-sizing: border-box;\n                }\n                \n                #demo-run {\n                    padding:20px;\n                    background-color:white;\n                    border-top: 32px solid #ecf5ff;\n                    border-radius: 6px;\n                    overflow-x: auto;\n                    overflow-y: hidden;\n                    position:relative;\n                }\n                #demo-code {\n                    padding:20px;\n                    border-top: 1px solid #eaeefb;\n                    font-size: 85%;\n                    font-family: \"Operator Mono SSm A\",\"Operator Mono SSm B\",\"Operator Mono\",\"Source Code Pro\",Menlo,Consolas,Monaco,monospace;\n                    line-height: 1.4;\n                    background-color:#fefefe; \n                }\n                #demo-code code{\n                    display: block;\n                    overflow-x: auto;\n                }\n                #demo-open {\n                    width:100%;\n                    -webkit-appearance: none;\n                    border:none;\n                    border-top: 1px solid #eaeefb;\n                    text-align:center;\n                    padding: 10px 20px;\n                    font-size: 14px;\n                    cursor: pointer;\n                    outline: 0;\n                    transition: background-color .3s;\n                    color: var(--main-6);\n                    background-color:#fff\n                }\n                #demo-open:hover,\n                #demo-open:active {\n                    background-color: var(--main-9);\n                }\n            <\/style>\n            <div id=\"demo-run\">${template}<\/div>\n            <div id=\"demo-code\" hidden>${code}<\/div>\n            <button id=\"demo-open\">\u67e5\u770b\u6e90\u7801<\/button>\n            <style>\n            .hljs{display:block;overflow-x:auto}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-comment,.hljs-quote{color:#998}.hljs-keyword,.hljs-selector-tag,.hljs-subst{font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}\n            <\/style>\n            `\n            const co= this.shadow.getElementById(\"demo-code\")\n            this.shadow.getElementById(\"demo-open\").addEventListener(\n            \"click\", (function() {\n                co.hasAttribute(\"hidden\") ? co.removeAttribute(\"hidden\") : co.setAttribute(\"hidden\", \"\")\n            }));\n        }else {\n             this.shadow.innerHTML =`\n            <div id=\"demo-run\">${template}<\/div>\n            `\n        }\n\n      \n        \/\/ \u79fb\u9664\u6389\u5173\u8054\u7684template\u8282\u70b9\n            \/\/ \u79fb\u9664\u6389\u5173\u8054\u7684template\u8282\u70b9\n        $template.parentNode.removeChild($template)\n        \/\/ \u5904\u7406 script\n        \/\/ 1. \u67e5\u627e\u5f71\u5b50DOM\u4e2d\u521a\u624d\u586b\u5145\u7684script\u8282\u70b9\n        const scripts = Array.from(this.shadow.querySelectorAll('script'))\n        console.log(scripts)\n        \/\/ 2. \u521b\u5efa\u4e00\u4e2a\u7528\u6765\u4fdd\u5b58\u5f71\u5b50DOM\u6839\u8282\u70b9\u7684Script\n        const $globalDefines = document.createElement('script')\n        \/\/ 3. \u521b\u5efa\u4e00\u4e2a\u81ea\u6267\u884c\u51fd\u6570\uff0c\u5c06\u4ee3\u7801\u5305\u88f9\u8d77\u6765\n        $globalDefines.innerHTML = `(function(){\n        const $component = document.querySelector('${TAG_NAME}[template=\"${templateId}\"]');\n        const $shadowDocument = $component.shadowRoot;\n        `\n        let arr=[]\n        \/\/ 4. \u62fc\u5408\u6240\u6709Script\n        for(let i=0;i<scripts.length;i++){\n            \/\/ \u5168\u5c40\u66ff\u6362document\u4e3a\u65b0\u7684$shadowDocument\n            if(scripts[i].src){\n\t\t\t\t\/\/ \u521b\u5efa\n                const $sc = document.createElement('script')\n                $sc.setAttribute(\"type\", \"text\/javascript\");\n                $sc.setAttribute('src', scripts[i].src);\n                this.shadow.appendChild($sc)\n                arr.push(\n\t\t\t\t\t\/\/\u901a\u8fc7Promise\u6765\u89e3\u51b3\uff0c\u6240\u6709js\u90fd\u52a0\u8f7d\u6210\u529f\u540e\uff0c\u5728\u5c06\u4ee3\u7801\u6dfb\u52a0\u5230Shadow DOM\n                    new Promise(function(resolve,reject){\n\t\t\t\t\t\/\/js \u52a0\u8f7d\u5b8c\u6210\u56de\u6267\u884c\n                    $sc.onload = function() {\n                        console.log($sc)\n                        resolve();\n                        };\n                    })\n                )\n                this.shadow.getElementById('demo-run').removeChild(scripts[i])\n                continue\n            }\n           \n            $globalDefines.innerHTML += `{\n                ${scripts[i].textContent.replace(\/(document)\\.(getElementById|querySelector|querySelectorAll|getElementsByClassName|getElementsByName|getElementsByTagName)\/gm, '$shadowDocument.$2').replace(\/\\r\\n?\/gm, '')}\n            }`\n            \/\/ \u79fb\u9664\u65e7\u8282\u70b9\n            this.shadow.getElementById('demo-run').removeChild(scripts[i])\n        }\n        $globalDefines.innerHTML += `})();`\n        \n        Promise.all(arr).then(()=>{\n            console.log('js\u52a0\u8f7d\u6210\u529f');\n            this.shadow.appendChild($globalDefines)\n        })\n    }\n})\n} catch(error) {\n    Deom=false\n    Notification.error({\n        title: '\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8be5\u529f\u80fd',\n        message: '\u8bf7\u4f7f\u7528\u6700\u65b0\u6d4f\u89c8\u5668',\n    })\n}\n\nexport default {\n    name: 'MyMarked',\n    props: {\n        initialValue: {\n            \/\/ \u521d\u59cb\u5316\u5185\u5bb9\n            type: String,\n            default: ''\n        },\n        markedOptions: {\n            type: Object,\n            default: () => ({})\n        },\n        copyCode: {\/\/ \u590d\u5236\u4ee3\u7801\n            type: Boolean,\n            default: true\n        },\n        dompurify:{\n            type:Boolean,\n            default:true\n        },\n        copyBtnText: {\/\/ \u590d\u5236\u4ee3\u7801\u6309\u94ae\u6587\u5b57\n            type: String,\n            default: '\u590d\u5236\u4ee3\u7801'\n        },\n        imgView:{\n            type: Boolean,\n            default: true\n        },\n        tocNav:{\n            type: Boolean,\n            default: false\n        },\n    },\n    data() {\n        return {\n            html: '',\n            previewImgModal: false,\n            previewImgSrc: '',\n            previewImgMode: '',\n            toc:[],\n            tocIsShow:document.body.clientWidth>600?true:false,\n            maxTitle:6,\n            url:'https:\/\/iconfont.alicdn.com\/t\/43f13cdf-39c8-4053-affd-b2d3e75b1e0e.png',\n            srcList: [\n                'https:\/\/iconfont.alicdn.com\/t\/43f13cdf-39c8-4053-affd-b2d3e75b1e0e.png',\n                'https:\/\/iconfont.alicdn.com\/t\/9d79fc67-6f0d-4af2-90e7-ce50ef4404b7.png'\n            ]\n        };\n    },\n    mounted() {\n        this.translateMarkdown();\n    },\n    methods: {\n        translateMarkdown() {\n            let that=this\n            let DEMO_UID = 0\n            let SHOW_UID=0\n            rendererMD.code = function (code, language) {\n                 \/\/ \u63d0\u53d6language\u6807\u8bc6\u4e3a demo \u7684\u4ee3\u7801\u5757\u91cd\u5199\n                 if(Deom){\n                     if (language === 'demo') {\n                         DEMO_UID+=2\n                        \/\/ \u9875\u9762\u4e2d\u53ef\u80fd\u4f1a\u6709\u5f88\u591a\u7684\u793a\u4f8b\uff0c\u8fd9\u91cc\u589e\u52a0ID\u6807\u8bc6\n                        const id = 'demo-mobai-template-' + (DEMO_UID)\n                        \/\/ \u5c06\u4ee3\u7801\u5185\u5bb9\u4fdd\u5b58\u5728template\u6807\u7b7e\u4e2d\n                        const template = `<template type=\"text\/demo\" id=\"${id}\">${code}<\/template>`\n                        \/\/ \u5c06template\u548c\u81ea\u5b9a\u4e49\u6807\u7b7e\u901a\u8fc7ID\u5173\u8054\n                        const sandbox = `<demo-mobai template=\"${id}\"><\/demo-mobai>`\n                        \/\/ \u8fd4\u56de\u65b0\u7684HTML\n                        return template + sandbox\n                    }\n                    if(language === 'show'){\n                         \/\/ \u9875\u9762\u4e2d\u53ef\u80fd\u4f1a\u6709\u5f88\u591a\u7684\u793a\u4f8b\uff0c\u8fd9\u91cc\u589e\u52a0ID\u6807\u8bc6\n                        const id = 'demo-mobai-template-' + (++SHOW_UID)\n                        \/\/ \u5c06\u4ee3\u7801\u5185\u5bb9\u4fdd\u5b58\u5728template\u6807\u7b7e\u4e2d\n                        const template = `<template type=\"text\/demo\" id=\"${id}\">${code}<\/template>`\n                        \/\/ \u5c06template\u548c\u81ea\u5b9a\u4e49\u6807\u7b7e\u901a\u8fc7ID\u5173\u8054\n                        const sandbox = `<demo-mobai template=\"${id}\"><\/demo-mobai>`\n                        \/\/ \u8fd4\u56de\u65b0\u7684HTML\n                        return template + sandbox\n                    }\n                 }else{\n                      if (language === 'demo') {\n                          language='html';\n                      }\n                 }\n                \n                 \/\/ \u5176\u4ed6\u6807\u8bc6\u7684\u4ee3\u7801\u5757\u4f9d\u7136\u4f7f\u7528\u4ee3\u7801\u9ad8\u4eae\u663e\u793a\n                 return `<div class=\"code-block\"><span class=\"code-language\">${language}<\/span><span class=\"copy-code el-icon-files\">${that.copyBtnText}<\/span><pre rel=\"${language}\"><code class=\"hljs ${language}\">${hljs.highlightAuto(code).value}<\/code><\/pre><\/div>`\n            }\n            rendererMD.link = function(href,title,text){\n                return '<a href=\"'+href+'\" title=\"'+text+'\" target=\"_blank\">'+text+'<\/a>';\n            }\n            let anchor=0;\n            if(that.tocNav){\n                rendererMD.heading = function(text, level, raw) {\n                    \/\/ const anchor = tocify.add(text, level);\n                    if(level<that.maxTitle){\n                        that.maxTitle=level\n                    }\n                    anchor+=1\n                    that.toc.push(\n                        {\n                            'id':anchor,\n                            'tag':level,\n                            'text':text\n                        }\n                    )\n                    return `<h${level} id=\"toc-nav${anchor}\">${text}<\/h${level}>`;\n                };\n            }\n            \/\/ customElements.define(TAG_NAME, Demobox)\n            let html = marked(this.initialValue, {\n                sanitize: false,\n                renderer: rendererMD,\n               \n                ...this.markedOptions\n            })\n            this.html = html;\n            \/\/ this.addCopyListener();\n            if(this.imgView){\n                this.addImageClickListener();\n            }\n        },\n        addImageClickListener() {\/\/ \u76d1\u542c\u67e5\u770b\u5927\u56fe\n            const {imgs = []} = this;\n            if (imgs.length > 0) {\n                for (let i = 0, len = imgs.length; i < len; i++) {\n                    imgs[i].onclick = null;\n                }\n            }\n            setTimeout(() => {\n                this.imgs = this.$refs.preview.querySelectorAll('img');\n                for (let i = 0, len = this.imgs.length; i < len; i++) {\n                    this.imgs[i].onclick = () => {\n                        const src = this.imgs[i].getAttribute('src');\n                        this.srcList[1]=src\n                        this.url=src\n                            setTimeout(() => {\n                            document.getElementById(\"imgview\").click()\n                            },5)\n                    };\n                }\n            }, 1000);\n        },\n        toTarget(target){\n            target='#toc-nav'+target\n            let toElement = document.querySelector(target);\n            toElement.scrollIntoView({\n\t\t\t\tbehavior: 'smooth',\n\t\t\t\tblock: 'center',\n\t\t\t\tinline: 'nearest'\n            })\n        },\n    },\n    watch: {\n        initialValue() {\n            this.translateMarkdown();\n        }\n    },\n    destroyed () {\n        window.removeEventListener('scroll', this.scroll, false)\n    },\n};\n<\/script>\n<style lang=\"stylus\" scoped>\n@import '~@\/assets\/style\/marked.css'\n.marked\n    display: flex;\n    flex-flow: row nowrap;\n    position: relative;\n    align-items: flex-start;\n    .write\n        flex: 1 1 auto;\n        width: 1%;\n        overflow: hidden;\n    .toc\n        width: 220px;\n        margin-left: 20px;\n        border-left: 1px solid #efefee\n        position: sticky;\n        top: 100px;\n        flex-shrink: 0;\n        padding-left 10px\n        .toc-top\n            display: flex;\n            justify-content: space-between;\n            align-items center\n            padding 10px 0\n            .toc-title\n                font-size 18px\n                &:before\n                    content '#'\n                    color var(--main-6)\n                    padding-right 3px\n            .toc-close\n                font-size 14px;\n                color #989898\n                cursor pointer\n        \n        li\n            display table\n            margin-bottom: 10px;\n            line-height: 1em;\n            text-align: left;\n            font-size: 14px;\n            color: #8599ad;\n            transition: .2s;\n            cursor pointer\n            &:hover\n                color var(--main-6)\n                text-decoration: underline;\n            &:before\n                content '- '\n        .acitve\n            color var(--main-6)\n    .toc-tag\n        width 40px\n        height 40px\n        position fixed\n        right 20px\n        bottom 85px\n        z-index 999\n        background #585d5d\n        display flex\n        align-items: center;\n        justify-content: center;\n        flex-flow: column;\n        transition all .3s\n        cursor pointer\n        &:hover\n            background-image: linear-gradient(to right, #8EC5FC,#9FACE6)\n            i:nth-child(1)\n                transform translateX(2px)\n            i:nth-child(3)\n                transform translateX(-2px)\n        i\n            display: block;\n            width: 24px;\n            height: 2px;\n            background-color: hsla(0,0%,100%,.75);\n            margin: 3px 0;\n            transition: all .2s ease-in-out;\n.slide-fade-enter-active {\n  transition: all .3s ease;\n}\n.slide-fade-leave-active {\n  transition: all .3s cubic-bezier(1.0, 0.5, 0.8, 1.0);\n}\n.slide-fade-enter, .slide-fade-leave-to\n\/* .slide-fade-leave-active for below version 2.1.8 *\/ {\n  transform: translateX(10px);\n  opacity: 0;\n}\n<\/style>\n```","img":"https:\/\/p.pstatp.com\/origin\/138310002be9773ff763c","classty":"\u524d\u7aef","channels":null,"name":"Baymax","click":3,"like":1,"is_show":1,"head_show":1,"share_show":1,"copyright_show":1,"message_show":1,"deleted_at":1,"created_at":"2020-09-23T11:19:45.000000Z","updated_at":"2020-12-16T11:41:39.000000Z","message_count":0,"label":["marked"],"clicks":1},{"id":9,"title":"\u9762\u5411\u5bf9\u8c61\u6e38\u620f\u6848\u4f8b\uff1a\u8d2a\u5403\u86c7","desc":"\u5176\u5b9e\u5728\u5728\u7f16\u5199\u535a\u5ba2\u4e4b\u524d\u5bf9js\u4e86\u89e3\u5f88\u5c11\uff0c\u5728\u5b66\u6821\u4e5f\u5c31\u5b66\u4e60\u5230\u5bf9\u8c61\u7684\u5904\u7406\u3002\u5728\u4f7f\u7528vue\u7684\u65f6\u5019\u8fd8\u662f\u6709\u5f88\u591a\u7684\u4e0d\u61c2\u7684\uff0c\u7136\u540e\u6839\u636e\u6155\u8bfe\u7f51\u7684\u89c6\u9891\u6559\u7a0b\u5b66\u4e60\u4e86vue,\u867d\u7136\u57fa\u672c\u641e\u61c2\u4e86\uff0c\u4f46\u662f\u9047\u5230\u4e9bjs\u7684\u66f4\u9ad8\u7ea7\u7684\u4f7f\u7528\u8fd8\u662f\u8499\u8499\u7684\uff0c\u4e8e\u662f\u901a\u8fc7\u522b\u7684\u5b66\u4e60\u8d44\u6599\u6269\u5c55\u4e86\u4e00\u4e9b\u8bed\u6cd5.","content":"## \u524d\u8a00\n\n\u5176\u5b9e\u5728\u5728\u7f16\u5199\u535a\u5ba2\u4e4b\u524d\u5bf9js\u4e86\u89e3\u5f88\u5c11\uff0c\u5728\u5b66\u6821\u4e5f\u5c31\u5b66\u4e60\u5230\u5bf9\u8c61\u7684\u5904\u7406\u3002\u5728\u4f7f\u7528vue\u7684\u65f6\u5019\u8fd8\u662f\u6709\u5f88\u591a\u7684\u4e0d\u61c2\u7684\uff0c\u7136\u540e\u6839\u636e\u6155\u8bfe\u7f51\u7684\u89c6\u9891\u6559\u7a0b\u5b66\u4e60\u4e86vue,\u867d\u7136\u57fa\u672c\u641e\u61c2\u4e86\uff0c\u4f46\u662f\u9047\u5230\u4e9bjs\u7684\u66f4\u9ad8\u7ea7\u7684\u4f7f\u7528\u8fd8\u662f\u8499\u8499\u7684\uff0c\u4e8e\u662f\u901a\u8fc7\u522b\u7684\u5b66\u4e60\u8d44\u6599\u6269\u5c55\u4e86\u4e00\u4e9b\u8bed\u6cd5\uff0c\n\n#### \u6e38\u620f\u6f14\u793a\n\n\u6e38\u620f\u64cd\u4f5c\uff1a\u9f20\u6807\u70b9\u51fb\u6216\u901a\u8fc7\u952e\u76d8\u4e0a\u4e0b\u5de6\u53f3\u952e\u63a7\u5236\uff08\u63a8\u8350\uff09\n\n```demo\n<style>\n.content{\n\t\t\tposition: relative;\n\t\t}\n\t\t#map\n\t\t{\n\t\t    width:100%;\n\t\t    height:400px;\n\t\t\tposition:relative;\n\t\t\tbackground:#ccc;\n\t\t\tborder:2px solid #7be2e3;\n\t\t}\n\t\t#start{\n\t\t\tdisplay:inline-block;\n\t\t\tpadding:10px 20px;\n\t\t\tcolor:#fff;\n\t\t\tbackground-color: aquamarine;\n\t\t\tposition: absolute;\n\t\t\ttop:50%;\n\t\t\tleft:50%;\n\t\t\ttransform: translate(-50%,-50%);\n\t\t\tborder-radius: 4px;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t\n\t\t<\/style>\n\t\t<div class=\"content\">\n\t\t\t<div id=\"map\"><\/div>\n\t\t\t<sapn id=\"start\">\u5f00\u59cb\u6e38\u620f<\/sapn>\n\t\t<\/div>\n <script>\n\n        \/\/ ---------------------Tools--------------------------\n        \/\/ \u81ea\u8c03\u7528\u51fd\u6570\u4f20\u5165 window\u7684\u76ee\u7684\uff0c\u662f\u8ba9\u53d8\u91cf\u540d\u53ef\u4ee5\u88ab\u538b\u7f29\n        \/\/ \u5728\u8001\u7248\u672c\u7684\u6d4f\u89c8\u5668\u4e2d undefined \u53ef\u4ee5\u88ab\u91cd\u65b0\u8d4b\u503c\n        ;(function (window, undefined) {\n          var Tools = {\n            getRandom: function (min, max) {\n              return Math.floor(Math.random() * (max - min + 1)) +  min;\n            }\n          }\n          \/\/ \u66b4\u9732Tools\u7ed9window\n          window.Tools = Tools;\n        })(window, undefined)\n\n        \/\/ -----------------------Parent-------------------------\n        ;(function (window) {\n          function Parent(options) {\n            options = options || {};\n            this.width = options.width || 20;\n            this.height = options.height || 20;\n          }\n\n          Parent.prototype.test = function () {\n            console.log('test');\n          }\n          window.Parent = Parent;\n        })(window, undefined)\n\n\n        \/\/ -----------------------Food---------------------------\n        ;(function (window, undefined) {\n          \/\/ \u5c40\u90e8\u4f5c\u7528\u57df\n          var position = 'absolute';\n          \/\/ \u8bb0\u5f55\u4e0a\u4e00\u6b21\u521b\u5efa\u7684\u98df\u7269\uff0c\u4e3a\u5220\u9664\u505a\u51c6\u5907\n          var elements = [];\n          function Food(options) {\n            options = options || {};\n            this.x = options.x || 0;\n            this.y = options.y || 0;\n\n            \/\/ \u501f\u7528\u6784\u9020\u51fd\u6570\n            Parent.call(this, options);\n\n            this.color = options.color || '#d0f14c';\n          }\n\n          \/\/ \u539f\u578b\u7ee7\u627f\n          Food.prototype = new Parent();\n          Food.prototype.constructor = Food;\n\n          \/\/ \u6e32\u67d3\n          Food.prototype.render = function (map) {\n            \/\/ \u5220\u9664\u4e4b\u524d\u521b\u5efa\u7684\u98df\u7269\n            remove();\n\n            \/\/ \u968f\u673a\u8bbe\u7f6ex\u548cy\u7684\u503c\n            this.x = Tools.getRandom(0, map.offsetWidth\/this.width - 1) * this.width;\n            this.y = Tools.getRandom(0, map.offsetHeight\/this.height - 1) * this.height;\n\n            \/\/ \u52a8\u6001\u521b\u5efadiv  \u9875\u9762\u4e0a\u663e\u793a\u7684\u98df\u7269\n            var div = document.createElement('div');\n            map.appendChild(div);\n\n            elements.push(div);\n\n            \/\/ \u8bbe\u7f6ediv\u7684\u6837\u5f0f\n            div.style.position = position;\n            div.style.left = this.x + 'px';\n            div.style.top = this.y + 'px';\n            div.style.width = this.width + 'px';\n            div.style.height = this.height + 'px';\n            div.style.backgroundColor = this.color;\n          }\n\n          function remove() {\n            for (var i = elements.length - 1; i >= 0; i--) {\n              \/\/ \u5220\u9664div\n              elements[i].parentNode.removeChild(elements[i]);\n              \/\/ \u5220\u9664\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\n              \/\/ \u5220\u9664\u6570\u7ec4\u5143\u7d20\n              \/\/ \u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u4ece\u54ea\u4e2a\u5143\u7d20\u5f00\u59cb\u5220\u9664\n              \/\/ \u7b2c\u4e8c\u4e2a\u53c2\u6570\uff0c\u5220\u9664\u51e0\u4e2a\u5143\u7d20\n              elements.splice(i, 1);\n            }\n          }\n\n          \/\/ \u628aFood\u6784\u9020\u51fd\u6570  \u8ba9\u5916\u90e8\u53ef\u4ee5\u8bbf\u95ee\n          window.Food = Food;\n        })(window, undefined)\n\n        \/\/ ---------------------------Snake----------------------\n        ;(function (window, undefined) {\n          var position = 'absolute';\n          \/\/ \u8bb0\u5f55\u4e4b\u524d\u521b\u5efa\u7684\u86c7\n          var elements = [];\n          function Snake(options) {\n            options = options || {};\n\n            \/\/ \u501f\u7528\u6784\u9020\u51fd\u6570\n            Parent.call(this, options);\n\n            \/\/ \u86c7\u79fb\u52a8\u7684\u65b9\u5411\n            this.direction = options.direction || 'right';\n            \/\/ \u86c7\u7684\u8eab\u4f53(\u86c7\u8282)  \u7b2c\u4e00\u4e2a\u5143\u7d20\u662f\u86c7\u5934\n            this.body = [\n              {x: 3, y: 2, color: '#00dcff'},\n              {x: 2, y: 2, color: '#12ffb2'},\n              {x: 1, y: 2, color: '#12ffb2'}\n            ];\n          }\n\n          Snake.prototype = new Parent();\n          Snake.prototype.constructor = Snake;\n\n          Snake.prototype.render = function (map) {\n            \/\/ \u5220\u9664\u4e4b\u524d\u521b\u5efa\u7684\u86c7\n            remove();\n            \/\/ \u628a\u6bcf\u4e00\u4e2a\u86c7\u8282\u6e32\u67d3\u5230\u5730\u56fe\u4e0a\n            for (var i = 0, len = this.body.length; i < len; i++) {\n              \/\/ \u86c7\u8282\n              var object = this.body[i];\n              \/\/ \n              var div = document.createElement('div');\n              map.appendChild(div);\n\n              \/\/ \u8bb0\u5f55\u5f53\u524d\u86c7\n              elements.push(div);\n\n              \/\/ \u8bbe\u7f6e\u6837\u5f0f\n              div.style.position = position;\n              div.style.width = this.width + 'px';\n              div.style.height = this.height + 'px';\n              div.style.left = object.x * this.width + 'px';\n              div.style.top = object.y * this.height + 'px';\n              div.style.backgroundColor = object.color;\n            }\n          }\n          \/\/ \u79c1\u6709\u7684\u6210\u5458\n          function remove() {\n            for (var i = elements.length - 1; i >= 0; i--) {\n              \/\/ \u5220\u9664div\n              elements[i].parentNode.removeChild(elements[i]);\n              \/\/ \u5220\u9664\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\n              elements.splice(i, 1);\n            }\n          }\n\n          \/\/ \u63a7\u5236\u86c7\u79fb\u52a8\u7684\u65b9\u6cd5\n          Snake.prototype.move = function (food, map) {\n            \/\/ \u63a7\u5236\u86c7\u7684\u8eab\u4f53\u79fb\u52a8\uff08\u5f53\u524d\u86c7\u8282 \u5230 \u4e0a\u4e00\u4e2a\u86c7\u8282\u7684\u4f4d\u7f6e\uff09\n            for (var i = this.body.length - 1; i > 0; i--) {\n              this.body[i].x = this.body[i - 1].x;\n              this.body[i].y = this.body[i - 1].y;\n            }\n            \/\/ \u63a7\u5236\u86c7\u5934\u7684\u79fb\u52a8\n            \/\/ \u5224\u65ad\u86c7\u79fb\u52a8\u7684\u65b9\u5411\n            var head = this.body[0];\n            switch(this.direction) {\n              case 'right': \n                head.x += 1;\n                break;\n              case 'left': \n                head.x -= 1;\n                break;\n              case 'top':\n                head.y -= 1;\n                break;\n              case 'bottom':\n                head.y += 1;\n                break;\n            }\n\n            \/\/ 2.4 \u5224\u65ad\u86c7\u5934\u662f\u5426\u548c\u98df\u7269\u7684\u5750\u6807\u91cd\u5408\n            var headX = head.x * this.width;\n            var headY = head.y * this.height;\n            if (headX === food.x && headY === food.y) {\n              \/\/ \u8ba9\u86c7\u589e\u52a0\u4e00\u8282\n              \/\/ \u83b7\u53d6\u86c7\u7684\u6700\u540e\u4e00\u8282\n              var last = this.body[this.body.length - 1];\n              this.body.push({\n                x: last.x,\n                y: last.y,\n                color: last.color\n              })\n\n              \/\/ \u968f\u673a\u5728\u5730\u56fe\u4e0a\u91cd\u65b0\u751f\u6210\u98df\u7269\n              food.render(map);\n            }\n\n          }\n\n          \/\/ \u66b4\u9732\u6784\u9020\u51fd\u6570\u7ed9\u5916\u90e8\n          window.Snake = Snake;\n        })(window, undefined)\n\n        \/\/----------------------Game---------------------------\n        ;(function (window, undefined) {\n          var that;  \/\/ \u8bb0\u5f55\u6e38\u620f\u5bf9\u8c61\n          function Game(map) {\n            this.food = new Food();\n            this.snake = new Snake();\n            this.map = map;\n            that = this;\n          }\n\n          Game.prototype.start = function () {\n            \/\/ 1 \u628a\u86c7\u548c\u98df\u7269\u5bf9\u8c61\uff0c\u6e32\u67d3\u5230\u5730\u56fe\u4e0a\n            this.food.render(this.map);\n            this.snake.render(this.map);\n            \/\/ 2 \u5f00\u59cb\u6e38\u620f\u7684\u903b\u8f91\n            \/\/ 2.1  \u8ba9\u86c7\u79fb\u52a8\u8d77\u6765\n            \/\/ 2.2  \u5f53\u86c7\u9047\u5230\u8fb9\u754c\u6e38\u620f\u7ed3\u675f\n            runSnake();\n            \/\/ 2.3  \u901a\u8fc7\u952e\u76d8\u63a7\u5236\u86c7\u79fb\u52a8\u7684\u65b9\u5411\n            bindKey();\n            \/\/ 2.4  \u5f53\u86c7\u9047\u5230\u98df\u7269 --- \u5728snake\u7684move\u65b9\u6cd5\u4e2d\u5904\u7406  \n           }\n\n           \/\/ \u901a\u8fc7\u952e\u76d8\u63a7\u5236\u86c7\u79fb\u52a8\u7684\u65b9\u5411\n          function bindKey() {\n            that.map.addEventListener('click',function(e){\n                var headX=that.snake.body[0].x*that.snake.width+that.snake.width\/2;\n                var headY=that.snake.body[0].y*that.snake.height+that.snake.height\/2;\n                var offsetX=e.offsetX;\n                var offsetY=e.offsetY;\n                var x=offsetX-headX;\n                var y=offsetY-headY;\n                if(x>=0&&y<=0){\n                    if(Math.abs(x)-Math.abs(y)>0){\n                        that.snake.direction='right';\n                    }else{\n                        that.snake.direction='top';\n                    }\n                }else if(x>=0&&y>=0){\n                    if(Math.abs(x)-Math.abs(y)>0){\n                        that.snake.direction='right';\n                    }else{\n                        that.snake.direction='bottom';\n                    }\n                }else if(x<=0&&y>=0){\n                    if(Math.abs(x)-Math.abs(y)>0){\n                        that.snake.direction='left';\n                    }else{\n                        that.snake.direction='bottom';\n                    }\n                }else{\n                    if(Math.abs(x)-Math.abs(y)>0){\n                        that.snake.direction='left';\n                    }else{\n                        that.snake.direction='top';\n                    }\n                }\n            },false)\n            \/\/ document.onkeydown = function () {};\n            document.addEventListener('keydown', function (e) {\n              \/\/ console.log(e.keyCode);\n              \/\/ 37 - left\n              \/\/ 38 - top\n              \/\/ 39 - right\n              \/\/ 40 - bottom\n              switch (e.keyCode) {\n                case 37: \n                  this.snake.direction = 'left';\n                  break;\n                case 38:\n                  this.snake.direction = 'top';\n                  break;\n                case 39:\n                  this.snake.direction = 'right';\n                  break;\n                case 40:\n                  this.snake.direction = 'bottom';\n                  break;\n              }\n            }.bind(that), false);\n          }\n\n           \/\/ \u79c1\u6709\u7684\u51fd\u6570  \u8ba9\u86c7\u79fb\u52a8\n           function runSnake() {\n             var timerId = setInterval(function () {\n               \/\/ \u8ba9\u86c7\u8d70\u4e00\u683c\n               \/\/ \u5728\u5b9a\u65f6\u5668\u7684function\u4e2dthis\u662f\u6307\u5411window\u5bf9\u8c61\u7684\n               \/\/ this.snake\n               \/\/ \u8981\u83b7\u53d6\u6e38\u620f\u5bf9\u8c61\u4e2d\u7684\u86c7\u5c5e\u6027\n               this.snake.move(this.food, this.map);\n               this.snake.render(this.map);\n\n                \/\/ 2.2  \u5f53\u86c7\u9047\u5230\u8fb9\u754c\u6e38\u620f\u7ed3\u675f\n                \/\/ \u83b7\u53d6\u86c7\u5934\u7684\u5750\u6807\n                var maxX = this.map.offsetWidth \/ this.snake.width;\n                var maxY = this.map.offsetHeight \/ this.snake.height;\n                var headX = this.snake.body[0].x;\n                var headY = this.snake.body[0].y;\n                var start=document.getElementById('start');\n                if (headX < 0 || headX >= maxX) {\n                    start.innerText=\"\u6e38\u620f\u7ed3\u675f\uff0c\u5f97\u5206\"+that.snake.body.length+\"\uff0c\u70b9\u51fb\u91cd\u65b0\u5f00\u59cb\u3002\";\n                    start.style.display=\"block\";\n                      clearInterval(timerId);\n                }\n                if (headY < 0 || headY >= maxY) {\n                    start.innerText=\"\u6e38\u620f\u7ed3\u675f\uff0c\u5f97\u5206\"+that.snake.body.length+\"\uff0c\u70b9\u51fb\u91cd\u65b0\u5f00\u59cb\u3002\";\n                    start.style.display=\"block\";\n                    clearInterval(timerId);\n                }\n             }.bind(that), 150);\n           }\n\n          \/\/ \u66b4\u9732\u6784\u9020\u51fd\u6570\u7ed9\u5916\u90e8\n          window.Game = Game;\n        })(window, undefined)\n\n        \/\/ -------------------\u8c03\u7528------------------\n        ;(function (window, undefined) {\n            var map = document.getElementById('map');\n            var game = new Game(map);\n            var start=document.getElementById('start');\n            start.addEventListener('click',function(){\n                start.style.display=\"none\";\n                game.food=new Food();\n                game.snake=new Snake();\n                game.start();\n            })\n        })(window, undefined)\n        <\/script>\n\n```\n\n### \u529f\u80fd\u5b9e\u73b0\n\n#### \u642d\u5efa\u9875\u9762\n\n\u653e\u4e00\u4e2a\u5bb9\u5668\u76db\u653e\u6e38\u620f\u573a\u666f div#map\uff0c\u8bbe\u7f6e\u6837\u5f0f\n\n```css\n#map {\n  width: 800px;\n  height: 600px;\n  background-color: #ccc;\n  position: relative;\n}\n```\n\n#### \u5206\u6790\u5bf9\u8c61\n\n- \u6e38\u620f\u5bf9\u8c61\n- \u86c7\u5bf9\u8c61\n- \u98df\u7269\u5bf9\u8c61\n\n#### \u521b\u5efa\u98df\u7269\u5bf9\u8c61\n\n- Food\n\n  - \u5c5e\u6027\n\n    - x       \n    - y\n    - width\n    - height\n    - color       \n\n  - \u65b9\u6cd5\n\n    - render       \u968f\u673a\u521b\u5efa\u4e00\u4e2a\u98df\u7269\u5bf9\u8c61\uff0c\u5e76\u8f93\u51fa\u5230map\u4e0a\n\n- \u521b\u5efaFood\u7684\u6784\u9020\u51fd\u6570\uff0c\u5e76\u8bbe\u7f6e\u5c5e\u6027\n\n```js\nvar position = 'absolute';\nvar elements = [];\nfunction Food(x, y, width, height, color) {\n  this.x = x || 0;\n  this.y = y || 0;\n  \/\/ \u98df\u7269\u7684\u5bbd\u5ea6\u548c\u9ad8\u5ea6(\u50cf\u7d20)\n  this.width = width || 20;\n  this.height = height || 20;\n  \/\/ \u98df\u7269\u7684\u989c\u8272\n  this.color = color || 'green';\n}\n```\n\n- \u901a\u8fc7\u539f\u578b\u8bbe\u7f6erender\u65b9\u6cd5\uff0c\u5b9e\u73b0\u968f\u673a\u4ea7\u751f\u98df\u7269\u5bf9\u8c61\uff0c\u5e76\u6e32\u67d3\u5230map\u4e0a\n\n```js\nFood.prototype.render = function (map) {\n  \/\/ \u968f\u673a\u98df\u7269\u7684\u4f4d\u7f6e\uff0cmap.\u5bbd\u5ea6\/food.\u5bbd\u5ea6\uff0c\u603b\u5171\u6709\u591a\u5c11\u5206food\u7684\u5bbd\u5ea6\uff0c\u968f\u673a\u4e00\u4e0b\u3002\u7136\u540e\u518d\u4e58\u4ee5food\u7684\u5bbd\u5ea6\n  this.x = parseInt(Math.random() * map.offsetWidth \/ this.width) * this.width;\n  this.y = parseInt(Math.random() * map.offsetHeight \/ this.height) * this.height;\n\n  \/\/ \u52a8\u6001\u521b\u5efa\u98df\u7269\u5bf9\u5e94\u7684div\n  var div = document.createElement('div');\n  map.appendChild(div);\n  div.style.position = position;\n  div.style.left = this.x + 'px';\n  div.style.top = this.y + 'px';\n  div.style.width = this.width + 'px';\n  div.style.height = this.height + 'px';\n  div.style.backgroundColor = this.color;\n  elements.push(div);\n}\n```\n\n- \u901a\u8fc7\u81ea\u8c03\u7528\u51fd\u6570\uff0c\u8fdb\u884c\u5c01\u88c5\uff0c\u901a\u8fc7window\u66b4\u9732Food\u5bf9\u8c61\n\n```js\nwindow.Food = Food;\n```\n\n#### \u521b\u5efa\u86c7\u5bf9\u8c61\n\n\n- Snake\n\n- \u5c5e\u6027\n\n  - width    \u86c7\u8282\u7684\u5bbd\u5ea6 \u9ed8\u8ba420\n  - height   \u86c7\u8282\u7684\u9ad8\u5ea6 \u9ed8\u8ba420\n  - body     \u6570\u7ec4\uff0c\u86c7\u7684\u5934\u90e8\u548c\u8eab\u4f53\uff0c\u7b2c\u4e00\u4e2a\u4f4d\u7f6e\u662f\u86c7\u5934\n  - direction    \u86c7\u8fd0\u52a8\u7684\u65b9\u5411  \u9ed8\u8ba4right  \u53ef\u4ee5\u662f left  top bottom\n\n- \u65b9\u6cd5\n\n  - render  \u628a\u86c7\u6e32\u67d3\u5230map\u4e0a\n\n- Snake\u6784\u9020\u51fd\u6570\n\n```js\nvar position = 'absolute';\nvar elements = [];\nfunction Snake(width, height, direction) {\n  \/\/ \u8bbe\u7f6e\u6bcf\u4e00\u4e2a\u86c7\u8282\u7684\u5bbd\u5ea6\n  this.width = width || 20;\n  this.height = height || 20;\n  \/\/ \u86c7\u7684\u6bcf\u4e00\u90e8\u5206, \u7b2c\u4e00\u90e8\u5206\u662f\u86c7\u5934\n  this.body = [\n    {x: 3, y: 2, color: 'red'},\n    {x: 2, y: 2, color: 'red'},\n    {x: 1, y: 2, color: 'red'}\n  ];\n  this.direction = direction || 'right';\n}\n```\n\n- render\u65b9\u6cd5\n\n```js\nSnake.prototype.render = function(map) {\n  for(var i = 0; i < this.body.length; i++) {\n    var obj = this.body[i];\n    var div = document.createElement('div');\n    map.appendChild(div);\n    div.style.left = obj.x * this.width + 'px';\n    div.style.top = obj.y * this.height + 'px';\n    div.style.position = position;\n    div.style.backgroundColor = obj.color;\n    div.style.width = this.width + 'px';\n    div.style.height = this.height + 'px';\n  }\n}\n```\n\n- \u5728\u81ea\u8c03\u7528\u51fd\u6570\u4e2d\u66b4\u9732Snake\u5bf9\u8c61\n\n```js\nwindow.Snake = Snake;\n```\n\n#### \u521b\u5efa\u6e38\u620f\u5bf9\u8c61\n\n\u6e38\u620f\u5bf9\u8c61\uff0c\u7528\u6765\u7ba1\u7406\u6e38\u620f\u4e2d\u7684\u6240\u6709\u5bf9\u8c61\u548c\u5f00\u59cb\u6e38\u620f\n\n- Game\n\n  - \u5c5e\u6027\n\n    - food\n\n    - snake\n\n    - map\n\n  - \u65b9\u6cd5\n\n    - start            \u5f00\u59cb\u6e38\u620f\uff08\u7ed8\u5236\u6240\u6709\u6e38\u620f\u5bf9\u8c61\uff09\n\n\n\n- \u6784\u9020\u51fd\u6570\n\n```js\nfunction Game(map) {\n  this.food = new Food();\n  this.snake = new Snake();\n  this.map = map;\n}\n```\n\n- \u5f00\u59cb\u6e38\u620f\uff0c\u6e32\u67d3\u98df\u7269\u5bf9\u8c61\u548c\u86c7\u5bf9\u8c61\n\n```js\nGame.prototype.start = function () {\n  this.food.render(this.map);\n  this.snake.render(this.map);\n}\n\n```\n\n### \u6e38\u620f\u7684\u903b\u8f91\n\n#### \u5199\u86c7\u7684move\u65b9\u6cd5\n\n- \u5728\u86c7\u5bf9\u8c61(snake.js)\u4e2d\uff0c\u5728Snake\u7684\u539f\u578b\u4e0a\u65b0\u589emove\u65b9\u6cd5\n\n1. \u8ba9\u86c7\u79fb\u52a8\u8d77\u6765\uff0c\u628a\u86c7\u8eab\u4f53\u7684\u6bcf\u4e00\u90e8\u5206\u5f80\u524d\u79fb\u52a8\u4e00\u4e0b\n2. \u86c7\u5934\u90e8\u5206\u6839\u636e\u4e0d\u540c\u7684\u65b9\u5411\u51b3\u5b9a \u5f80\u54ea\u91cc\u79fb\u52a8\n\n```js\nSnake.prototype.move = function (food, map) {\n  \/\/ \u8ba9\u86c7\u8eab\u4f53\u7684\u6bcf\u4e00\u90e8\u5206\u5f80\u524d\u79fb\u52a8\u4e00\u4e0b\n  var i = this.body.length - 1;\n  for(; i > 0; i--) {\n    this.body[i].x = this.body[i - 1].x;\n    this.body[i].y = this.body[i - 1].y;\n  }\n  \/\/ \u6839\u636e\u79fb\u52a8\u7684\u65b9\u5411\uff0c\u51b3\u5b9a\u86c7\u5934\u5982\u4f55\u5904\u7406\n  switch(this.direction) {\n    case 'left': \n      this.body[0].x -= 1;\n      break;\n    case 'right':\n      this.body[0].x += 1;\n      break;\n    case 'top':\n      this.body[0].y -= 1;\n      break;\n    case 'bottom':\n      this.body[0].y += 1;\n      break;\n  }\n}\n\n```\n\n- \u5728game\u4e2d\u6d4b\u8bd5\n\n```js\nthis.snake.move(this.food, this.map);\nthis.snake.render(this.map);\n\n```\n\n#### \u8ba9\u86c7\u81ea\u5df1\u52a8\u8d77\u6765\n\n- \u79c1\u6709\u65b9\u6cd5\n\n  ```\n  \u4ec0\u4e48\u662f\u79c1\u6709\u65b9\u6cd5\uff1f\n    \u4e0d\u80fd\u88ab\u5916\u90e8\u8bbf\u95ee\u7684\u65b9\u6cd5\n  \u5982\u4f55\u521b\u5efa\u79c1\u6709\u65b9\u6cd5\uff1f\n    \u4f7f\u7528\u81ea\u8c03\u7528\u51fd\u6570\u5305\u88f9\n  \n  ```\n\n- \u5728game.js\u4e2d \u6dfb\u52a0runSnake\u7684\u79c1\u6709\u65b9\u6cd5\uff0c\u5f00\u542f\u5b9a\u65f6\u5668\u8c03\u7528\u86c7\u7684move\u548crender\u65b9\u6cd5\uff0c\u8ba9\u86c7\u52a8\u8d77\u6765\n\n- \u5224\u65ad\u86c7\u662f\u5426\u649e\u5899\n\n```js\nfunction runSnake() {\n  var timerId = setInterval(function() {\n    this.snake.move(this.food, this.map);\n    \/\/ \u5728\u6e32\u67d3\u524d\uff0c\u5220\u9664\u4e4b\u524d\u7684\u86c7\n    this.snake.render(this.map);\n\n    \/\/ \u5224\u65ad\u86c7\u662f\u5426\u649e\u5899\n    var maxX = this.map.offsetWidth \/ this.snake.width;\n    var maxY = this.map.offsetHeight \/ this.snake.height;\n    var headX = this.snake.body[0].x;\n    var headY = this.snake.body[0].y;\n    if (headX < 0 || headX >= maxX) {\n      clearInterval(timerId);\n      alert('Game Over');\n    }\n\n    if (headY < 0 || headY >= maxY) {\n      clearInterval(timerId);\n      alert('Game Over');\n    }\n\n  }.bind(that), 150);\n}\n\n```\n\n- \u5728snake\u4e2d\u6dfb\u52a0\u5220\u9664\u86c7\u7684\u79c1\u6709\u65b9\u6cd5\uff0c\u5728render\u4e2d\u8c03\u7528\n\n```js\nfunction remove() {\n  \/\/ \u5220\u9664\u6e32\u67d3\u7684\u86c7\n  var i = elements.length - 1;\n  for(; i >= 0; i--) {\n    \/\/ \u5220\u9664\u9875\u9762\u4e0a\u6e32\u67d3\u7684\u86c7\n    elements[i].parentNode.removeChild(elements[i]);\n    \/\/ \u5220\u9664elements\u6570\u7ec4\u4e2d\u7684\u5143\u7d20\n    elements.splice(i, 1);\n  }\n}\n\n```\n\n- \u5728game\u4e2d\u901a\u8fc7\u952e\u76d8\u63a7\u5236\u86c7\u7684\u79fb\u52a8\u65b9\u5411\n\n```js\nfunction bindKey() {\n  document.addEventListener('keydown', function(e) {\n    switch (e.keyCode) {\n      case 37:\n        \/\/ left\n        this.snake.direction = 'left';\n        break;\n      case 38:\n        \/\/ top\n        this.snake.direction = 'top';\n        break;\n      case 39:\n        \/\/ right\n        this.snake.direction = 'right';\n        break;\n      case 40:\n        \/\/ bottom\n        this.snake.direction = 'bottom';\n        break;\n    }\n  }.bind(that), false);\n}\n\n```\n\n- \u5728start\u65b9\u6cd5\u4e2d\u8c03\u7528\n\n```js\nbindKey();\n\n```\n\n#### \u5224\u65ad\u86c7\u662f\u5426\u5403\u5230\u98df\u7269\n\n```js\n\/\/ \u5728Snake\u7684move\u65b9\u6cd5\u4e2d\n\n\/\/ \u5728\u79fb\u52a8\u7684\u8fc7\u7a0b\u4e2d\u5224\u65ad\u86c7\u662f\u5426\u5403\u5230\u98df\u7269\n\/\/ \u5982\u679c\u86c7\u5934\u548c\u98df\u7269\u7684\u4f4d\u7f6e\u91cd\u5408\u4ee3\u8868\u5403\u5230\u98df\u7269\n\/\/ \u98df\u7269\u7684\u5750\u6807\u662f\u50cf\u7d20\uff0c\u86c7\u7684\u5750\u6807\u662f\u51e0\u4e2a\u5bbd\u5ea6\uff0c\u8fdb\u884c\u8f6c\u6362\nvar headX = this.body[0].x * this.width;\nvar headY = this.body[0].y * this.height;\nif (headX === food.x && headY === food.y) {\n  \/\/ \u5403\u5230\u98df\u7269\uff0c\u5f80\u86c7\u8282\u7684\u6700\u540e\u52a0\u4e00\u8282\n  var last = this.body[this.body.length - 1];\n  this.body.push({\n    x: last.x,\n    y: last.y,\n    color: last.color\n  })\n  \/\/ \u628a\u73b0\u5728\u7684\u98df\u7269\u5bf9\u8c61\u5220\u9664\uff0c\u5e76\u91cd\u65b0\u968f\u673a\u6e32\u67d3\u4e00\u4e2a\u98df\u7269\u5bf9\u8c61\n  food.render(map);\n}\n\n```\n\n### \u5176\u5b83\u5904\u7406\n\n#### \u628ahtml\u4e2d\u7684js\u4ee3\u7801\u653e\u5230index.js\u4e2d\n\n\u907f\u514dhtml\u4e2d\u51fa\u73b0js\u4ee3\u7801\n\n#### \u81ea\u8c03\u7528\u51fd\u6570\u7684\u53c2\u6570\n\n```js\n(function (window, undefined) {\n  var document = window.document;\n\n}(window, undefined))\n\n```\n\n- \u4f20\u5165window\u5bf9\u8c61\n\n\u5c06\u6765\u4ee3\u7801\u538b\u7f29\u7684\u65f6\u5019\uff0c\u53ef\u4ee5\u5427 function (window)  \u538b\u7f29\u6210 function (w)\n\n- \u4f20\u5165undefined\n\n\u5728\u5c06\u6765\u4f1a\u770b\u5230\u522b\u4eba\u5199\u7684\u4ee3\u7801\u4e2d\u4f1a\u628aundefined\u4f5c\u4e3a\u51fd\u6570\u7684\u53c2\u6570(\u5f53\u524d\u6848\u4f8b\u6ca1\u6709\u4f7f\u7528)\n\u56e0\u4e3a\u5728\u6709\u7684\u8001\u7248\u672c\u7684\u6d4f\u89c8\u5668\u4e2d undefined\u53ef\u4ee5\u88ab\u91cd\u65b0\u8d4b\u503c\uff0c\u9632\u6b62undefined \u88ab\u91cd\u65b0\u8d4b\u503c\n\n#### \u6574\u7406\u4ee3\u7801\n\n\u73b0\u5728\u7684\u4ee3\u7801\u7ed3\u6784\u6e05\u6670\uff0c\u8c01\u51fa\u95ee\u9898\u5c31\u627e\u5230\u5bf9\u5e94\u7684js\u6587\u4ef6\u5373\u53ef\u3002\n\u901a\u8fc7\u81ea\u8c03\u7528\u51fd\u6570\uff0c\u5df2\u7ecf\u9632\u6b62\u4e86\u53d8\u91cf\u547d\u540d\u6c61\u67d3\u7684\u95ee\u9898\n\n\u4f46\u662f\uff0c\u7531\u4e8ejs\u6587\u4ef6\u6570\u8f83\u591a\uff0c\u9700\u8981\u5728\u9875\u9762\u4e0a\u5f15\u7528\uff0c\u4f1a\u4ea7\u751f\u6587\u4ef6\u4f9d\u8d56\u7684\u95ee\u9898(\u5148\u5f15\u5165\u90a3\u4e2ajs\uff0c\u518d\u5f15\u5165\u54ea\u4e2ajs)\n\u5c06\u6765\u901a\u8fc7\u5de5\u5177\u628ajs\u6587\u4ef6\u5408\u5e76\u5e76\u538b\u7f29\u3002\u73b0\u5728\u624b\u5de5\u5408\u5e76js\u6587\u4ef6\u6f14\u793a\n\n- \u95ee\u98981\n\n```js\n\/\/ \u5982\u679c\u5b58\u5728\u591a\u4e2a\u81ea\u8c03\u7528\u51fd\u6570\u8981\u7528\u5206\u53f7\u5206\u5272\uff0c\u5426\u5219\u8bed\u6cd5\u9519\u8bef\n\/\/ \u4e0b\u9762\u4ee3\u7801\u4f1a\u62a5\u9519\n(function () {\n}())\n\n(function () {\n}())\n\/\/ \u6240\u4ee5\u4ee3\u7801\u89c4\u8303\u4e2d\u4f1a\u5efa\u8bae\u5728\u81ea\u8c03\u7528\u51fd\u6570\u4e4b\u524d\u52a0\u4e0a\u5206\u53f7\n\/\/ \u4e0b\u9762\u4ee3\u7801\u6ca1\u6709\u95ee\u9898\n;(function () {\n}())\n\n;(function () {\n}())\n\n```\n\n- \u95ee\u98982 \n\n```js\n\/\/ \u5f53\u81ea\u8c03\u7528\u51fd\u6570 \u524d\u9762\u6709\u51fd\u6570\u58f0\u660e\u65f6\uff0c\u4f1a\u628a\u81ea\u8c03\u7528\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\n\/\/ \u6240\u4ee5\u5efa\u8bae\u81ea\u8c03\u7528\u51fd\u6570\u524d\uff0c\u52a0\u4e0a;\nvar a = function () {\n  alert('11');\n}\n    \n(function () {\n  alert('22');\n}())\n\n```\n\n> \u672c\u7bc7\u6587\u7ae0\u6765\u81ea\u5b66\u4e60\u8d44\u6599\uff0c\u4ec5\u7528\u4e8e\u4e2a\u4eba\u590d\u4e60\u3002","img":"https:\/\/p.pstatp.com\/origin\/137b4000153a999b01359","classty":"\u524d\u7aef","channels":null,"name":"Baymax","click":1,"like":1,"is_show":1,"head_show":1,"share_show":1,"copyright_show":1,"message_show":1,"deleted_at":1,"created_at":"2020-09-15T12:29:35.000000Z","updated_at":"2020-09-16T02:54:33.000000Z","message_count":0,"label":["Js"],"clicks":1},{"id":8,"title":"\u524d\u7aefFlex \u5e03\u5c40\u5404\u79cd\u4f7f\u7528\u5c0f\u65b9\u6cd5","desc":"\u5728\u7f16\u5199\u524d\u7aef\u535a\u5ba2\u9875\u9762\u7684\u4f7f\u7528\uff0c\u7531\u4e8e\u5e03\u5c40\u6bd4\u8f83\u590d\u6742\uff0c\u5f88\u591a\u529f\u80fd\u90fd\u662f\u7528\u5b9a\u4f4d\u7f16\u5199\uff0c\u4f46\u662f\u7f16\u5199\u8d77\u6765\u590d\u6742\u4e14\u5355\u4e00\u3002\u4e8e\u662f\u90e8\u5206\u9875\u9762\u7684\u7f16\u5199\u4f7f\u7528\u4e86flex,\u5982\u97f3\u4e50\u64ad\u653e\u5668\u7684\u5e03\u5c40\u5927\u90e8\u5206\u4f7f\u7528\u4e86flex+\u5b9a\u4f4d\u7f16\u5199,\u5982\u679c\u4f60\u6b63\u9700\u8981\u4e24\u7aef\u5bf9\u9f50\uff0c\u5c45\u4e2d\uff0c\u5782\u76f4\u5c45\u4e2d\u7b49\u529f\u80fd\u5b9e\u73b0\u4e0d\u59a8\u4f7f\u7528flex\u5e03\u5c40\u3002","content":"## \u524d\u8a00\n\n> \u5728\u7f16\u5199\u524d\u7aef\u535a\u5ba2\u9875\u9762\u7684\u4f7f\u7528\uff0c\u7531\u4e8e\u5e03\u5c40\u6bd4\u8f83\u590d\u6742\uff0c\u5f88\u591a\u529f\u80fd\u90fd\u662f\u7528\u5b9a\u4f4d\u7f16\u5199\uff0c\u4f46\u662f\u7f16\u5199\u8d77\u6765\u590d\u6742\u4e14\u5355\u4e00\u3002\u4e8e\u662f\u90e8\u5206\u9875\u9762\u7684\u7f16\u5199\u4f7f\u7528\u4e86flex,\u5982\u97f3\u4e50\u64ad\u653e\u5668\u7684\u5e03\u5c40\u5927\u90e8\u5206\u4f7f\u7528\u4e86flex+\u5b9a\u4f4d\u7f16\u5199,\u5982\u679c\u4f60\u6b63\u9700\u8981\u4e24\u7aef\u5bf9\u9f50\uff0c\u5c45\u4e2d\uff0c\u5782\u76f4\u5c45\u4e2d\u7b49\u529f\u80fd\u5b9e\u73b0\u4e0d\u59a8\u4f7f\u7528flex\u5e03\u5c40\u3002\n\n## \u5bf9\u6bd4\u6848\u4f8b\n\n\u6211\u4eec\u4f7f\u7528position\u70b9\u4f4d\u548cflex\u6765\u5b9e\u73b0\u4e00\u4e0b\u5782\u76f4\u5c45\u4e2d\u3002\n\n```demo\n<style>\n\t\t\t#main{\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 300px;\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t\t.box{\n\t\t\t\twidth:50%;\n\t\t\t\theight: 100%;\n\t\t\t\tborder:1px solid aquamarine;\n\t\t\t\tflex-grow:1;\n\t\t\t}\n\t\t\t.center{\n\t\t\t\twidth:100px;\n\t\t\t\theight:100px;\n\t\t\t\ttext-align: center;\n\t\t\t\tborder:2px solid #F56C6C;\n\t\t\t}\n\t\t\t\/* flex \u5782\u76f4\u5c45\u4e2d *\/\n\t\t\t.flex{\n\t\t\t\tdisplay:flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t}\n\t\t\t\/* \u4f7f\u7528\u5b50\u7edd\u7236\u76f8\u5782\u76f4\u5c45\u4e2d *\/\n\t\t\t.position{\n\t\t\t\tposition: relative;\n\t\t\t}\n\t\t\t.position-center{\n\t\t\t\tposition: absolute;\n\t\t\t\t\/* \u76f8\u5bf9\u7236\u5143\u7d20\u7684\u5927\u5c0f *\/\n\t\t\t\tleft:50%;\n\t\t\t\ttop: 50%;\n\t\t\t\t\/* \u76f8\u5bf9\u81ea\u5df1\u7684\u5927\u5c0f *\/\n\t\t\t\ttransform: translate(-50%,-50%);\n\t\t\t}\n\t\t<\/style>\n\t\t<div id=\"main\">\n\t\t\t<div class=\"box flex\">\n\t\t\t\t<div class=\"flex-center center\">\n\t\t\t\t\t\u4f7f\u7528flex\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t\t<div class=\"box position\">\n\t\t\t\t<div class=\"position-center center\">\n\t\t\t\t\t\u4f7f\u7528\u5b9a\u4f4d\n\t\t\t\t<\/div>\n\t\t\t<\/div>\n\t\t<\/div>\n```\n\n\n\n## \u57fa\u672c\u6982\u5ff5\n\n> \u91c7\u7528Flex\u5e03\u5c40\u7684\u5143\u7d20\uff0c\u79f0\u4e3aFlex\u5bb9\u5668\uff08flex container\uff09\uff0c\u7b80\u79f0\u201d\u5bb9\u5668\u201d\u3002\u5b83\u7684\u6240\u6709\u5b50\u5143\u7d20\u81ea\u52a8\u6210\u4e3a\u5bb9\u5668\u6210\u5458\uff0c\u79f0\u4e3aFlex\u9879\u76ee\uff08flex item\uff09\uff0c\u7b80\u79f0\u201d\u9879\u76ee\u201d\u3002\n> \u5bb9\u5668\u9ed8\u8ba4\u5b58\u5728\u4e24\u6839\u8f74\uff1a\u6c34\u5e73\u7684\u4e3b\u8f74\uff08main axis\uff09\u548c\u5782\u76f4\u7684\u4ea4\u53c9\u8f74\uff08cross axis\uff09\u3002\u4e3b\u8f74\u7684\u5f00\u59cb\u4f4d\u7f6e\uff08\u4e0e\u8fb9\u6846\u7684\u4ea4\u53c9\u70b9\uff09\u53eb\u505amain start\uff0c\u7ed3\u675f\u4f4d\u7f6e\u53eb\u505amain end\uff1b\u4ea4\u53c9\u8f74\u7684\u5f00\u59cb\u4f4d\u7f6e\u53eb\u505across start\uff0c\u7ed3\u675f\u4f4d\u7f6e\u53eb\u505across end\u3002\n> \u9879\u76ee\u9ed8\u8ba4\u6cbf\u4e3b\u8f74\u6392\u5217\u3002\u5355\u4e2a\u9879\u76ee\u5360\u636e\u7684\u4e3b\u8f74\u7a7a\u95f4\u53eb\u505amain size\uff0c\u5360\u636e\u7684\u4ea4\u53c9\u8f74\u7a7a\u95f4\u53eb\u505across size\u3002\n\n### \u5bb9\u5668\u5c5e\u6027\n\n- flex-direction\n- flex-wrap\n- flex-flow\n- justify-content\n- align-items\n- align-content\n\n### flex-direction\u5c5e\u6027\n\nflex-direction\u5c5e\u6027\u51b3\u5b9a\u4e3b\u8f74\u7684\u65b9\u5411\uff08\u5373\u9879\u76ee\u7684\u6392\u5217\u65b9\u5411\uff09\n\n- row\uff08\u9ed8\u8ba4\u503c\uff09\uff1a\u4e3b\u8f74\u4e3a\u6c34\u5e73\u65b9\u5411\uff0c\u8d77\u70b9\u5728\u5de6\u7aef\u3002\n- row-reverse\uff1a\u4e3b\u8f74\u4e3a\u6c34\u5e73\u65b9\u5411\uff0c\u8d77\u70b9\u5728\u53f3\u7aef\u3002\n- column\uff1a\u4e3b\u8f74\u4e3a\u5782\u76f4\u65b9\u5411\uff0c\u8d77\u70b9\u5728\u4e0a\u6cbf\u3002\n- column-reverse\uff1a\u4e3b\u8f74\u4e3a\u5782\u76f4\u65b9\u5411\uff0c\u8d77\u70b9\u5728\u4e0b\u6cbf\u3002\n\n```demo\n<style> \n\t\t#main\n\t\t{\n\t\t    width:80%;\n\t\t    height:100px;\n\t\t    border:1px solid black;\n\t\t    display:flex;\n\t\t\tmargin: 10px auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth:10%;\n\t\t\theight: 50%;\n\t\t\ttext-align: center;\n\t\t\tcolor: #fff;\n\t\t}\n\t\t#toggle{\n\t\t\tdisplay: inline-block;\n\t\t\tpadding:5px 10px;\n\t\t\tcolor:#fff;\n\t\t\tbackground-color: aquamarine;\n\t\t\tmargin:10px;\n\t\t\tborder-radius: 4px;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t<\/style>\n\t\t<span id=\"toggle\">\u70b9\u51fb\u5207\u6362\u5c5e\u6027<\/span>\n\t\t<p>\t\u5f53\u524ddeflex-direction:<span id=\"value\"><\/span><\/p>\n\t\t<div id=\"main\">\n\t\t  <div style=\"background-color:coral;\">1<\/div>\n\t\t  <div style=\"background-color:lightblue;\">2<\/div>  \n\t\t  <div style=\"background-color:lightgreen;\">3 <\/div>\n\t\t  <div style=\"background-color:coral;\">4<\/div>\n\t\t  <div style=\"background-color:lightblue;\">5<\/div>  \n\t\t<\/div>\n\t<script>\n\t\tvar count=0;\n\t\tvar demo=document.getElementById('main');\n\t\tdocument.getElementById('toggle').addEventListener('click',function (){\n\t\t\tvar arr=['row','row-reverse','column','column-reverse'];\n\t\t\tdemo.style.flexDirection=arr[count%arr.length];\n\t\t\tdocument.getElementById('value').innerText=arr[count%arr.length];\n\t\t\tcount++;\n\t\t\tconsole.log(count%arr.length)\n\t\t}\n\t\t);\n\t<\/script>\n```\n\n### flex-wrap\u5c5e\u6027\n\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u9879\u76ee\u90fd\u6392\u5728\u4e00\u6761\u7ebf\uff08\u53c8\u79f0\u201d\u8f74\u7ebf\u201d\uff09\u4e0a\u3002flex-wrap\u5c5e\u6027\u5b9a\u4e49\uff0c\u5982\u679c\u4e00\u6761\u8f74\u7ebf\u6392\u4e0d\u4e0b\uff0c\u5982\u4f55\u6362\u884c\u3002\n\n- nowrap\uff08\u9ed8\u8ba4\uff09\uff1a\u4e0d\u6362\u884c\u3002\n- wrap\uff1a\u6362\u884c\uff0c\u7b2c\u4e00\u884c\u5728\u4e0a\u65b9\u3002\n- wrap-reverse\uff1a\u6362\u884c\uff0c\u7b2c\u4e00\u884c\u5728\u4e0b\u65b9\u3002\n\n```demo\n<style> \n\t\t#main\n\t\t{\n\t\t    width:80%;\n\t\t    height:100px;\n\t\t    border:1px solid black;\n\t\t    display:flex;\n\t\t\tmargin: 10px auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth:25%;\n\t\t\theight: 50%;\n\t\t\ttext-align: center;\n\t\t\tcolor: #fff;\n\t\t}\n\t\t#toggle{\n\t\t\tdisplay: inline-block;\n\t\t\tpadding:5px 10px;\n\t\t\tcolor:#fff;\n\t\t\tbackground-color: aquamarine;\n\t\t\tmargin:10px;\n\t\t\tborder-radius: 4px;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t<\/style>\n\t\t<span id=\"toggle\">\u70b9\u51fb\u5207\u6362\u5c5e\u6027<\/span>\n\t\t<p>\t\u5f53\u524dflex-wrap:<span id=\"value\"><\/span><\/p>\n\t\t<div id=\"main\">\n\t\t  <div style=\"background-color:coral;\">1<\/div>\n\t\t  <div style=\"background-color:lightblue;\">2<\/div>  \n\t\t  <div style=\"background-color:lightgreen;\">3 <\/div>\n\t\t  <div style=\"background-color:coral;\">4<\/div>\n\t\t  <div style=\"background-color:lightblue;\">5<\/div>  \n\t\t<\/div>\n\t<script>\n\t\tvar count=0;\n\t\tvar demo=document.getElementById('main');\n\t\tconsole.log(111)\n\t\tdocument.getElementById('toggle').addEventListener('click',function (){\n\t\t\tvar arr=['nowrap','wrap','wrap-reverse'];\n\t\t\tdemo.style.flexWrap=arr[count%arr.length];\n\t\t\tdocument.getElementById('value').innerText=arr[count%arr.length];\n\t\t\tcount++;\n\t\t\t\n\t\t}\n\t\t);\n\t<\/script>\n\n```\n\n### flex-flow\n\nflex-flow\u5c5e\u6027\u662fflex-direction\u5c5e\u6027\u548cflex-wrap\u5c5e\u6027\u7684\u7b80\u5199\u5f62\u5f0f\uff0c\u9ed8\u8ba4\u503c\u4e3arow nowrap\u3002\n\n```html\n.box {\n  flex-flow: <flex-direction> <flex-wrap>;\n}\n```\n\n###  justify-content\u5c5e\u6027\n\njustify-content\u5c5e\u6027\u5b9a\u4e49\u4e86\u9879\u76ee\u5728\u4e3b\u8f74\u4e0a\u7684\u5bf9\u9f50\u65b9\u5f0f\u3002\n\n- flex-start\uff08\u9ed8\u8ba4\u503c\uff09\uff1a\u5de6\u5bf9\u9f50\n- flex-end\uff1a\u53f3\u5bf9\u9f50\n- center\uff1a \u5c45\u4e2d\n- space-between\uff1a\u4e24\u7aef\u5bf9\u9f50\uff0c\u9879\u76ee\u4e4b\u95f4\u7684\u95f4\u9694\u90fd\u76f8\u7b49\n- space-around\uff1a\u6bcf\u4e2a\u9879\u76ee\u4e24\u4fa7\u7684\u95f4\u9694\u76f8\u7b49\u3002\u6240\u4ee5\uff0c\u9879\u76ee\u4e4b\u95f4\u7684\u95f4\u9694\u6bd4\u9879\u76ee\u4e0e\u8fb9\u6846\u7684\u95f4\u9694\u5927\u4e00\u500d\u3002\n\n```demo\n<style> \n\t\t#main\n\t\t{\n\t\t    width:80%;\n\t\t    height:100px;\n\t\t    border:1px solid black;\n\t\t    display:flex;\n\t\t\tmargin: 10px auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth:10%;\n\t\t\theight: 50%;\n\t\t\ttext-align: center;\n\t\t\tcolor: #fff;\n\t\t}\n\t\t#toggle{\n\t\t\tdisplay: inline-block;\n\t\t\tpadding:5px 10px;\n\t\t\tcolor:#fff;\n\t\t\tbackground-color: aquamarine;\n\t\t\tmargin:10px;\n\t\t\tborder-radius: 4px;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t<\/style>\n\t\t<span id=\"toggle\">\u70b9\u51fb\u5207\u6362\u5c5e\u6027<\/span>\n\t\t<p>\t\u5f53\u524djustify-content:<span id=\"value\"><\/span><\/p>\n\t\t<div id=\"main\">\n\t\t  <div style=\"background-color:coral;\">1<\/div>\n\t\t  <div style=\"background-color:lightblue;\">2<\/div>  \n\t\t  <div style=\"background-color:lightgreen;\">3 <\/div>\n\t\t  <div style=\"background-color:coral;\">4<\/div>\n\t\t  <div style=\"background-color:lightblue;\">5<\/div>  \n\t\t<\/div>\n\t<script>\n\t\tvar count=0;\n\t\tvar demo=document.getElementById('main');\n\t\tconsole.log(111)\n\t\tdocument.getElementById('toggle').addEventListener('click',function (){\n\t\t\tvar arr=['flex-start','flex-end','center','space-between','space-around'];\n\t\t\tdemo.style.justifyContent=arr[count%arr.length];\n\t\t\tdocument.getElementById('value').innerText=arr[count%arr.length];\n\t\t\tcount++;\n\t\t\t\n\t\t}\n\t\t);\n\t<\/script>\n\n```\n\n### align-items\u5c5e\u6027\n\nalign-items\u5c5e\u6027\u5b9a\u4e49\u9879\u76ee\u5728\u4ea4\u53c9\u8f74\u4e0a\u5982\u4f55\u5bf9\u9f50\u3002\n\n- flex-start\uff1a\u4ea4\u53c9\u8f74\u7684\u8d77\u70b9\u5bf9\u9f50\u3002\n- flex-end\uff1a\u4ea4\u53c9\u8f74\u7684\u7ec8\u70b9\u5bf9\u9f50\u3002\n- center\uff1a\u4ea4\u53c9\u8f74\u7684\u4e2d\u70b9\u5bf9\u9f50\u3002\n- baseline: \u9879\u76ee\u7684\u7b2c\u4e00\u884c\u6587\u5b57\u7684\u57fa\u7ebf\u5bf9\u9f50\u3002\n- stretch\uff08\u9ed8\u8ba4\u503c\uff09\uff1a\u5982\u679c\u9879\u76ee\u672a\u8bbe\u7f6e\u9ad8\u5ea6\u6216\u8bbe\u4e3aauto\uff0c\u5c06\u5360\u6ee1\u6574\u4e2a\u5bb9\u5668\u7684\u9ad8\u5ea6\u3002\n\n```demo\n<style> \n\t\t#main\n\t\t{\n\t\t    width:80%;\n\t\t    height:100px;\n\t\t    border:1px solid black;\n\t\t    display:flex;\n\t\t\tmargin: 10px auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth:10%;\n\t\t\theight: 50%;\n\t\t\ttext-align: center;\n\t\t\tcolor: #fff;\n\t\t}\n\t\t#toggle{\n\t\t\tdisplay: inline-block;\n\t\t\tpadding:5px 10px;\n\t\t\tcolor:#fff;\n\t\t\tbackground-color: aquamarine;\n\t\t\tmargin:10px;\n\t\t\tborder-radius: 4px;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t<\/style>\n\t\t<span id=\"toggle\">\u70b9\u51fb\u5207\u6362\u5c5e\u6027<\/span>\n\t\t<p>\t\u5f53\u524dalign-items:<span id=\"value\"><\/span><\/p>\n\t\t<div id=\"main\">\n\t\t  <div style=\"background-color:coral;\">1<\/div>\n\t\t  <div style=\"background-color:lightblue;\">2<\/div>  \n\t\t  <div style=\"background-color:lightgreen;\">3 <\/div>\n\t\t  <div style=\"background-color:coral;\">4<\/div>\n\t\t  <div style=\"background-color:lightblue;\">5<\/div>  \n\t\t<\/div>\n\t<script>\n\t\tvar count=0;\n\t\tvar demo=document.getElementById('main');\n\t\tconsole.log(111)\n\t\tdocument.getElementById('toggle').addEventListener('click',function (){\n\t\t\tvar arr=['flex-start','flex-end','center','baseline','stretch'];\n\t\t\tdemo.style.alignItems=arr[count%arr.length];\n\t\t\tdocument.getElementById('value').innerText=arr[count%arr.length];\n\t\t\tcount++;\n\t\t\t\n\t\t}\n\t\t);\n\t<\/script>\n\n```\n\n### align-content\u5c5e\u6027\n\nalign-content\u5c5e\u6027\u5b9a\u4e49\u4e86\u591a\u6839\u8f74\u7ebf\u7684\u5bf9\u9f50\u65b9\u5f0f\u3002\u5982\u679c\u9879\u76ee\u53ea\u6709\u4e00\u6839\u8f74\u7ebf\uff0c\u8be5\u5c5e\u6027\u4e0d\u8d77\u4f5c\u7528\u3002\n\n- flex-start:\u4e0e\u4ea4\u53c9\u8f74\u7684\u8d77\u70b9\u5bf9\u9f50\u3002\n- flex-end\uff1a\u4e0e\u4ea4\u53c9\u8f74\u7684\u7ec8\u70b9\u5bf9\u9f50\u3002\n- center\uff1a \u4e0e\u4ea4\u53c9\u8f74\u7684\u4e2d\u70b9\u5bf9\u9f50\u3002\n- space-between\uff1a\u4e0e\u4ea4\u53c9\u8f74\u4e24\u7aef\u5bf9\u9f50\uff0c\u8f74\u7ebf\u4e4b\u95f4\u7684\u95f4\u9694\u5e73\u5747\u5206\u5e03\u3002\n- space-around\uff1a\u6bcf\u6839\u8f74\u7ebf\u4e24\u4fa7\u7684\u95f4\u9694\u90fd\u76f8\u7b49\u3002\u6240\u4ee5\uff0c\u8f74\u7ebf\u4e4b\u95f4\u7684\u95f4\u9694\u6bd4\u8f74\u7ebf\u4e0e\u8fb9\u6846\u7684\u95f4\u9694\u5927\u4e00\u500d\u3002\n- stretch\uff08\u9ed8\u8ba4\u503c\uff09\uff1a\u8f74\u7ebf\u5360\u6ee1\u6574\u4e2a\u4ea4\u53c9\u8f74\u3002\n\n```demo\n<style> \n\t\t#main\n\t\t{\n\t\t    width:80%;\n\t\t    height:100px;\n\t\t    border:1px solid black;\n\t\t    display:flex;\n\t\t\tflex-wrap: wrap; \/* \u4f7fflex\u5bb9\u5668\u4e00\u884c\u653e\u4e0d\u4e0b\u5b50\u9879\u6362\u884c*\/\n\t\t\tmargin: 10px auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth:20%;\n\t\t\theight: 20%;\n\t\t\ttext-align: center;\n\t\t\tcolor: #fff;\n\t\t}\n\t\t#toggle{\n\t\t\tdisplay: inline-block;\n\t\t\tpadding:5px 10px;\n\t\t\tcolor:#fff;\n\t\t\tbackground-color: aquamarine;\n\t\t\tmargin:10px;\n\t\t\tborder-radius: 4px;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t<\/style>\n\t\t<span id=\"toggle\">\u70b9\u51fb\u5207\u6362\u5c5e\u6027<\/span>\n\t\t<p>\t\u5f53\u524dalign-content:<span id=\"value\"><\/span><\/p>\n\t\t<div id=\"main\">\n\t\t  <div style=\"background-color:coral;\">1<\/div>\n\t\t  <div style=\"background-color:lightblue;\">2<\/div>  \n\t\t  <div style=\"background-color:lightgreen;\">3 <\/div>\n\t\t  <div style=\"background-color:coral;\">4<\/div>\n\t\t  <div style=\"background-color:lightblue;\">5<\/div>  \n\t\t  <div style=\"background-color:coral;\">6<\/div>\n\t\t  <div style=\"background-color:lightblue;\">7<\/div>  \n\t\t  <div style=\"background-color:lightgreen;\">8 <\/div>\n\t\t  <div style=\"background-color:coral;\">9<\/div>\n\t\t  <div style=\"background-color:lightblue;\">10<\/div>  \n\t\t<\/div>\n\t<script>\n\t\tvar count=0;\n\t\tvar demo=document.getElementById('main');\n\t\tconsole.log(111)\n\t\tdocument.getElementById('toggle').addEventListener('click',function (){\n\t\t\tvar arr=['flex-start','flex-end','center','space-between','space-around','stretch'];\n\t\t\tdemo.style.alignContent=arr[count%arr.length];\n\t\t\tdocument.getElementById('value').innerText=arr[count%arr.length];\n\t\t\tcount++;\n\t\t\t\n\t\t}\n\t\t);\n\t<\/script>\n```\n\n## \u9879\u76ee\u7684\u5c5e\u6027\n\n- order\n- flex-grow\n- flex-shrink\n- flex-basis\n- flex\n- align-self\n\n###  order\u5c5e\u6027\n\norder\u5c5e\u6027\u5b9a\u4e49\u9879\u76ee\u7684\u6392\u5217\u987a\u5e8f\u3002\u6570\u503c\u8d8a\u5c0f\uff0c\u6392\u5217\u8d8a\u9760\u524d\uff0c\u9ed8\u8ba4\u4e3a0\u3002\n\n```demo\n<style> \n\t\t#main\n\t\t{\n\t\t    width:80%;\n\t\t    height:100px;\n\t\t    border:1px solid black;\n\t\t    display:flex;\n\t\t\tflex-wrap: wrap; \/* \u4f7fflex\u5bb9\u5668\u4e00\u884c\u653e\u4e0d\u4e0b\u5b50\u9879\u6362\u884c*\/\n\t\t\tmargin: 10px auto;\n\t\t}\n\t\t#main div{\n\t\t\twidth:20%;\n\t\t\theight: 100%;\n\t\t\ttext-align: center;\n\t\t\tcolor: #fff;\n\t\t}\n\t\t#toggle{\n\t\t\tdisplay: inline-block;\n\t\t\tpadding:5px 10px;\n\t\t\tcolor:#fff;\n\t\t\tbackground-color: aquamarine;\n\t\t\tmargin:10px;\n\t\t\tborder-radius: 4px;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t<\/style>\n\t\t<span id=\"toggle\">\u70b9\u51fb\u968f\u673a\u6392\u5e8f<\/span>\n\t\t<div id=\"main\">\n\t\t  <div class=\"box\" style=\"background-color:coral;\">1<br \/>\n\t\t  <span>order:0<\/span>\n\t\t  <\/div>\n\t\t  <div class=\"box\" style=\"background-color:lightblue;\">2\n\t\t  <br \/>\n\t\t  <span>order:0<\/span>\n\t\t  <\/div>  \n\t\t  <div class=\"box\" style=\"background-color:lightgreen;\">3 \n\t\t  <br \/>\n\t\t  <span>order:0<\/span>\n\t\t  <\/div>\n\t\t  <div class=\"box\" style=\"background-color:coral;\">4\n\t\t  <br \/>\n\t\t  <span>order:0<\/span>\n\t\t  <\/div>\n\t\t  <div class=\"box\" style=\"background-color:lightblue;\">5\n\t\t  <br \/>\n\t\t  <span>order:0<\/span>\n\t\t  <\/div>  \n\t\t<\/div>\n\t<script>\n\t\tvar box=document.querySelectorAll('.box');\n\t\tdocument.getElementById('toggle').addEventListener('click',function (){\n\t\t\tvar leng=box.length;\n\t\t\tfor(var i=0;i<leng;i++){\n\t\t\t\tvar order=Math.floor(Math.random()*10);\n\t\t\t\tbox[i].style.order=order;\n\t\t\t\tbox[i].querySelector('span').innerText=\"order:\"+order;\n\t\t\t}\n\t\t}\n\t\t);\n\t<\/script>\n```\n\n### flex-grow\u5c5e\u6027\n\nflex-grow\u5c5e\u6027\u5b9a\u4e49\u9879\u76ee\u7684\u653e\u5927\u6bd4\u4f8b\uff0c\u9ed8\u8ba4\u4e3a0\uff0c\u5373\u5982\u679c\u5b58\u5728\u5269\u4f59\u7a7a\u95f4\uff0c\u4e5f\u4e0d\u653e\u5927\u3002\n\n```demo\n<style> \n\t\t#main\n\t\t{\n\t\t    width:80%;\n\t\t    height:100px;\n\t\t    border:1px solid black;\n\t\t    display:flex;\n\t\t\tflex-wrap: wrap; \/* \u4f7fflex\u5bb9\u5668\u4e00\u884c\u653e\u4e0d\u4e0b\u5b50\u9879\u6362\u884c*\/\n\t\t\tmargin: 10px auto;\n\t\t}\n\t\t#main div{\n\t\t\theight: 100%;\n\t\t\ttext-align: center;\n\t\t\tcolor: #fff;\n\t\t}\n\t\t#toggle{\n\t\t\tdisplay: inline-block;\n\t\t\tpadding:5px 10px;\n\t\t\tcolor:#fff;\n\t\t\tbackground-color: aquamarine;\n\t\t\tmargin:10px;\n\t\t\tborder-radius: 4px;\n\t\t\tcursor: pointer;\n\t\t}\n\t\t<\/style>\n\t\t<span id=\"toggle\">\u70b9\u51fb\u968f\u673a\u5360\u6bd4\u7a7a\u95f4<\/span>\n\t\t<div id=\"main\">\n\t\t  <div class=\"box\" style=\"background-color:coral;\">1<br \/>\n\t\t  <span>flex-grow:0<\/span>\n\t\t  <\/div>\n\t\t  <div class=\"box\" style=\"background-color:lightblue;\">2\n\t\t  <br \/>\n\t\t  <span>flex-grow:0<\/span>\n\t\t  <\/div>  \n\t\t<\/div>\n\t<script>\n\t\tvar box=document.querySelectorAll('.box');\n\t\tdocument.getElementById('toggle').addEventListener('click',function (){\n\t\t\tvar leng=box.length;\n\t\t\tfor(var i=0;i<leng;i++){\n\t\t\t\tvar grow=Math.floor(Math.random()*10);\n\t\t\t\tbox[i].style.flexGrow=grow;\n\t\t\t\tbox[i].querySelector('span').innerText=\"flex-grow:\"+grow;\n\t\t\t}\n\t\t}\n\t\t);\n\t<\/script>\n\n```\n\n### flex-shrink\u5c5e\u6027\n\nflex-shrink\u5c5e\u6027\u5b9a\u4e49\u4e86\u9879\u76ee\u7684\u7f29\u5c0f\u6bd4\u4f8b\uff0c\u9ed8\u8ba4\u4e3a1\uff0c\u5373\u5982\u679c\u7a7a\u95f4\u4e0d\u8db3\uff0c\u8be5\u9879\u76ee\u5c06\u7f29\u5c0f\u3002\n\n### flex-basis\u5c5e\u6027\n\nflex-basis\u5c5e\u6027\u5b9a\u4e49\u4e86\u5728\u5206\u914d\u591a\u4f59\u7a7a\u95f4\u4e4b\u524d\uff0c\u9879\u76ee\u5360\u636e\u7684\u4e3b\u8f74\u7a7a\u95f4\uff08main size\uff09\u3002\u6d4f\u89c8\u5668\u6839\u636e\u8fd9\u4e2a\u5c5e\u6027\uff0c\u8ba1\u7b97\u4e3b\u8f74\u662f\u5426\u6709\u591a\u4f59\u7a7a\u95f4\u3002\u5b83\u7684\u9ed8\u8ba4\u503c\u4e3aauto\uff0c\u5373\u9879\u76ee\u7684\u672c\u6765\u5927\u5c0f\u3002\n\n### flex\u5c5e\u6027\n\nflex\u5c5e\u6027\u662fflex-grow, flex-shrink \u548c flex-basis\u7684\u7b80\u5199\uff0c\u9ed8\u8ba4\u503c\u4e3a0 1 auto\u3002\u540e\u4e24\u4e2a\u5c5e\u6027\u53ef\u9009\u3002\n\u8be5\u5c5e\u6027\u6709\u4e24\u4e2a\u5feb\u6377\u503c\uff1aauto (1 1 auto) \u548c none (0 0 auto)\u3002\n\u5efa\u8bae\u4f18\u5148\u4f7f\u7528\u8fd9\u4e2a\u5c5e\u6027\uff0c\u800c\u4e0d\u662f\u5355\u72ec\u5199\u4e09\u4e2a\u5206\u79bb\u7684\u5c5e\u6027\uff0c\u56e0\u4e3a\u6d4f\u89c8\u5668\u4f1a\u63a8\u7b97\u76f8\u5173\u503c\u3002\n\n### align-self\u5c5e\u6027\n\nalign-self\u5c5e\u6027\u5141\u8bb8\u5355\u4e2a\u9879\u76ee\u6709\u4e0e\u5176\u4ed6\u9879\u76ee\u4e0d\u4e00\u6837\u7684\u5bf9\u9f50\u65b9\u5f0f\uff0c\u53ef\u8986\u76d6align-items\u5c5e\u6027\u3002\u9ed8\u8ba4\u503c\u4e3aauto\uff0c\u8868\u793a\u7ee7\u627f\u7236\u5143\u7d20\u7684align-items\u5c5e\u6027\uff0c\u5982\u679c\u6ca1\u6709\u7236\u5143\u7d20\uff0c\u5219\u7b49\u540c\u4e8estretch\u3002\n\n## \u53c2\u8003\u6587\u732e\n\n- [Flex \u5e03\u5c40\u8bed\u6cd5\u6559\u7a0b](https:\/\/www.runoob.com\/w3cnote\/flex-grammar.html)","img":"https:\/\/p.pstatp.com\/origin\/fefa0002673fc73a2c6e","classty":"\u524d\u7aef","channels":null,"name":"Baymax","click":1,"like":1,"is_show":1,"head_show":1,"share_show":1,"copyright_show":1,"message_show":0,"deleted_at":1,"created_at":"2020-09-12T11:44:33.000000Z","updated_at":"2020-09-12T11:54:32.000000Z","message_count":0,"label":["Css","Flex"],"clicks":1},{"id":7,"title":"\u4f7f\u7528vue\u5236\u4f5c\u4e00\u4e2a\u5c5e\u4e8e\u81ea\u5df1\u7684\u97f3\u4e50\u64ad\u653e\u5668","desc":"\u73b0\u5728\u5f88\u591a\u529f\u80fd\u90fd\u53ef\u4ee5\u4f7f\u7528\u63d2\u4ef6\uff0c\u6548\u7387\u5feb\u3001\u529f\u80fd\u90fd\u5f88\u5b8c\u5584\u3002\u90a3\u4e3a\u4ec0\u4e48\u8981\u81ea\u5df1\u5199\u5462\uff01\u4e3b\u8981\u662f\u73b0\u9636\u6bb5\u7684\u81ea\u5df1\u57fa\u7840\u4e0d\u7262\u3002\u5728\u81ea\u5df1\u53bb\u5199\u7684\u8fc7\u7a0b\u4e2d\u624d\u80fd\u77e5\u9053\u81ea\u5df1\u7684\u4e0d\u8db3\u3002\u8fd9\u4e2a\u97f3\u4e50\u64ad\u653e\u5668\uff0c\u4e5f\u5c31\u662f\u672c\u535a\u5ba2\u7684\u97f3\u4e50\u64ad\u653e\u5668\u3002\u82b1\u8d39\u4e86\u6211\u4e24\u5929\u5b8c\u6210\u4e86\u57fa\u672c\u529f\u80fd\uff0c\u6709\u97f3\u4e50\u5217\u8868\u3001\u5faa\u73af\u3001\u5355\u66f2\u3001\u987a\u5e8f\u7b49\u529f\u80fd\uff01","content":"### \u524d\u8a00\n\n> \u5176\u4e2d\u5728\u60f3\u5728\u535a\u5ba2\u4e2d\u6dfb\u52a0\u97f3\u4e50\u64ad\u653e\u529f\u80fd\u7684\u65f6\u5019\uff0c\u4e5f\u8003\u8651\u4e5f\u5176\u5b83\u97f3\u4e50\u64ad\u653e\u5668\u63d2\u4ef6\u5982APlayer,\u9875\u9762\u548c\u529f\u80fd\u90fd\u80fd\u6ee1\u8db3\u8981\u6c42\u3002\u800c\u4e14\u64ad\u653e\u9875\u9762\u4e5f\u5f88\u597d\u770b\uff0c\u529f\u80fd\u51e0\u4e4e\u90fd\u6709\u3002\u4f46\u662f\u6211\u4e0d\u9700\u8981\u90a3\u4e48\u591a\u529f\u80fd\uff0c\u6240\u4ee5\u6211\u81ea\u5df1\u5c1d\u8bd5\u5236\u4f5c\u4e00\u4e2a\u5c5e\u4e8e\u81ea\u5df1\u535a\u5ba2\u7684\u97f3\u4e50\u64ad\u653e\u5668\u3002\u9875\u9762\u5e03\u5c40\u53ca\u6837\u5f0f\u53c2\u8003[APlayer](APlayer)\n\u6700\u65b0\u57fa\u4e8evue3\u7248\u672c\u97f3\u4e50\u64ad\u653e\u5668\uff0c4\u79cd\u6a21\u5f0f\u53ef\u9009\uff0c\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u64ad\u653e\u6a21\u677f[\u4e91\u58a8\u767d-\u97f3\u4e50\u64ad\u653e\u5668](https:\/\/baymaxsjj.gitee.io\/by-vue3-blog\/#\/)\n### \u6848\u4f8b\u9884\u89c8\n#### \u6700\u65b0\u9884\u89c8\n<iframe src=\"https:\/\/baymaxsjj.gitee.io\/by-vue3-blog\/#\/\" style=\"width:100%;height:500px\"><\/iframe>\n\n#### \u65e7\u7248\u672c\u9884\u89c8\n\n```demo\n<style>\n\t\t.isshow {\n\t\t  left: -66px !important;\n\t\t}\n\t\t.music-row {\n\t\t  height: 66px;\n\t\t  bottom: 0px;\n\t\t  left: 0;\n\t\t  z-index: 999;\n\t\t  transition: all 0.5s;\n\t\t  margin-top: 60px;\n\t\t}\n\t\t.music-row:hover {\n\t\t  left: 0px !important;\n\t\t}\n\t\t.music-row .music {\n\t\t  transition: all 0.3s;\n\t\t  display: flex;\n\t\t  justify-content: left;\n\t\t}\n\t\t.music-row .music .music-img {\n\t\t  position: relative;\n\t\t  height: 66px;\n\t\t  width: 66px;\n\t\t  cursor: pointer;\n\t\t}\n\t\t.music-row .music .music-img:hover .music-toggle {\n\t\t  color: var(--main-5);\n\t\t  font-size: 25px;\n\t\t}\n\t\t.music-row .music .music-img .music-toggle {\n\t\t  width: 30px;\n\t\t  height: 30px;\n\t\t  font-size: 20px;\n\t\t  color: var(--main-6);\n\t\t  text-align: center;\n\t\t  line-height: 30px;\n\t\t  position: absolute;\n\t\t  bottom: 50%;\n\t\t  right: 50%;\n\t\t  transform: translate(50%,50%);\n\t\t  transition: all 0.3s;\n\t\t}\n\t\t.music-row .music .music-img .music-toggle:hover {\n\t\t  color: var(--main-5);\n\t\t}\n\t\t.music-row .music .music-img .musicActive {\n\t\t  bottom: 0px;\n\t\t  right: 0px;\n\t\t  transform: translate(0%,0%);\n\t\t}\n\t\t.music-row .music .music-content {\n\t\t  width: 334px;\n\t\t  height: 66px;\n\t\t  border-top: 1px solid #e9e9e9;\n\t\t  padding: 3px 5px;\n\t\t  background-color: #fff;\n\t\t  box-sizing: border-box;\n\t\t  position: relative;\n\t\t  display: flex;\n\t\t  flex-wrap: wrap;\n\t\t}\n\t\t.music-row .music .music-content .music-list {\n\t\t  width: 100%;\n\t\t  height: 100px;\n\t\t  background-color: #fff;\n\t\t  position: absolute;\n\t\t  top: -100px;\n\t\t  left: 0;\n\t\t  margin: 0;\n\t\t  padding: 5px;\n\t\t  overflow: auto;\n\t\t  box-sizing: border-box;\n\t\t  border-bottom: 1px solid #ccc;\n\t\t  border-top-left-radius: 4px;\n\t\t  border-top-right-radius: 4px;\n\t\t}\n\t\t.music-row .music .music-content .music-list li {\n\t\t  height: 30px;\n\t\t  line-height: 30px;\n\t\t  font-size: 14px;\n\t\t  padding: 0 4px;\n\t\t  margin: 2px 0;\n\t\t  color: var(--main-6);\n\t\t  background-color: #f8f9f9;\n\t\t  transition: all 0.3s;\n\t\t  cursor: pointer;\n\t\t  display: flex;\n\t\t  justify-content: space-between;\n\t\t}\n\t\t.music-row .music .music-content .music-list li span {\n\t\t  overflow: hidden;\n\t\t  white-space: nowrap;\n\t\t  text-overflow: ellipsis;\n\t\t}\n\t\t.music-row .music .music-content .active {\n\t\t  color: #f56c6c !important;\n\t\t  border-left: 3px solid #f56c6c;\n\t\t}\n\t\t.music-row .music .music-content .cont-top {\n\t\t  overflow: hidden;\n\t\t  white-space: nowrap;\n\t\t  text-overflow: ellipsis;\n\t\t  font-size: 15px;\n\t\t  width: 65%;\n\t\t  height: 40px;\n\t\t  line-height: 40px;\n\t\t}\n\t\t.music-row .music .music-content .cont-cont {\n\t\t  position: absolute;\n\t\t  top: 3px;\n\t\t  right: 0;\n\t\t}\n\t\t.music-row .music .music-content .cont-cont .cont-itme {\n\t\t  display: inline-block;\n\t\t  width: 30px;\n\t\t  height: 40px;\n\t\t  text-align: center;\n\t\t  line-height: 40px;\n\t\t  font-size: 18px;\n\t\t  transition: all 0.2s;\n\t\t}\n\t\t.music-row .music .music-content .cont-cont .cont-itme:hover {\n\t\t  cursor: pointer;\n\t\t  color: #ccc;\n\t\t}\n\t\t.music-row .music .music-content .cont-bottom {\n\t\t  position: absolute;\n\t\t  bottom: 0;\n\t\t  left: 0;\n\t\t  width: 100%;\n\t\t  height: 28px;\n\t\t  display: flex;\n\t\t  justify-content: left;\n\t\t  padding: 0 5px;\n\t\t  box-sizing: border-box;\n\t\t}\n\t\t.music-row .music .music-content .cont-bottom .bottom-progress {\n\t\t  width: 80%;\n\t\t  display: flex;\n\t\t  align-items: center;\n\t\t}\n\t\t.music-row .music .music-content .cont-bottom .time {\n\t\t  font-size: 12px;\n\t\t}\n\t\t.music-row .music .music-content .cont-bottom .music-func {\n\t\t  line-height: 28px;\n\t\t}\n\t\t.music-row .music .music-content .cont-bottom .music-func span {\n\t\t  margin: 0 3px;\n\t\t  cursor: pointer;\n\t\t}\n\t\t.music-row .music .music-btn {\n\t\t  height: 66px;\n\t\t  width: 18px;\n\t\t  background-color: #ccc;\n\t\t  cursor: pointer;\n\t\t  line-height: 66px;\n\t\t  border-bottom-right-radius: 4px;\n\t\t  border-top-right-radius: 4px;\n\t\t}\n\t\t\n\t\t<\/style>\n\t\t<link href=\"https:\/\/cdn.bootcdn.net\/ajax\/libs\/element-ui\/2.13.2\/theme-chalk\/index.css\" rel=\"stylesheet\">\n\t\t<script src=\"https:\/\/cdn.bootcdn.net\/ajax\/libs\/vue\/2.6.11\/vue.min.js\"><\/script>\n\t\t<script src=\"https:\/\/cdn.bootcdn.net\/ajax\/libs\/element-ui\/2.13.2\/index.js\"><\/script>\n\t\t<div id=\"app\">\n\t\t            <el-row class=\"music-row\" :class=\"{isshow:isShow}\">\n\t\t                <el-col :md=\"24\" class=\"music\">\n\t\t                    <!-- <audio id=\"music\" :src=\"musicInfo.url\"><\/audio> -->\n\t\t                    <!-- \u97f3\u4e50\u56fe\u7247 -->\n\t\t\n\t\t                    <div class=\"music-img\">\n\t\t                        <el-avatar class=\"music-img\" :size=\"66\" shape=\"square\" :src=\"musicInfo.pic\">\n\t\t                            <i class=\"el-icon-loading\"><\/i>\n\t\t                            <!-- <img src=\"https:\/\/cube.elemecdn.com\/e\/fd\/0fc7d20532fdaf769a25683617711png.png\"\/> -->\n\t\t                        <\/el-avatar>\n\t\t                        <span :class=\"{musicActive:isPlay}\" @click=\"pause\" class=\"iconfont music-toggle\"><span :class=\"isPlay?'el-icon-video-pause':'el-icon-video-play'\"><\/span>\n\t\t                    <\/span><\/div>\n\t\t                    <!-- \u5c55\u5f00\u6a21\u5757 -->\n\t\t                    <transition name=\"el-zoom-in-center\">\n\t\t                        <div v-show=\"muIsShow\" class=\"music-content\">\n\t\t                            <transition name=\"el-zoom-in-bottom\">\n\t\t                                <!-- \u97f3\u4e50\u5217\u8868\u6a21\u5757 -->\n\t\t                                <div v-show=\"isList\" class=\"music-list scrollbar\">\n\t\t                                    <el-scrollbar style=\"width: 100%;\n\t\t            height: 100%;\">\n\t\t                                        <ul style=\"padding:0\">\n\t\t                                            <li :class=\"{active:index==ind}\" @click=\"index=ind\" v-for=\"(item,ind) of musics\" :key=\"item.musicId\">\n\t\t                                                <span>\n\t\t                                                    {{ind+1}}\n\t\t                                                    <span>{{item.title}}<\/span>\n\t\t                                                <\/span>\n\t\t                                                <span>{{item.name}}<\/span>\n\t\t                                            <\/li>\n\t\t                                        <\/ul>\n\t\t                                    <\/el-scrollbar>\n\t\t                                <\/div>\n\t\t                            <\/transition>\n\t\t                            <!-- \u6807\u9898 \u4f5c\u8005 -->\n\t\t                            <div class=\"cont-top\">\n\t\t                                <span>{{musics[index].title}}<\/span>\n\t\t                                <span>---<\/span>\n\t\t                                <span>{{musics[index].name}}<\/span>\n\t\t                            <\/div>\n\t\t                            <!--\u6682\u505c \u5feb\u8fdb   -->\n\t\t                            <div class=\"cont-cont\">\n\t\t                                <span class=\"cont-itme el-icon-d-arrow-left\" @click=\"index=index==0?musics.length-1:index-1\"><\/span>\n\t\t                                <span @click=\"pause\" class=\"cont-itme iconfont\" :class=\"isPlay?'el-icon-video-pause':'el-icon-video-play'\"><\/span>\n\t\t                                <span class=\"cont-itme el-icon-d-arrow-right\" @click=\"index=index==musics.length-1?0:index+1\"><\/span>\n\t\t                                <span class=\"cont-itme el-icon-menu\" @click=\"isList=!isList\"><\/span>\n\t\t                            <\/div>\n\t\t                            <!-- \u97f3\u4e50\u62d6\u52a8\u6761 \u65f6\u95f4 -->\n\t\t                            <div class=\"cont-bottom\">\n\t\t                                <div class=\"bottom-progress\">\n\t\t                                    <el-slider style=\"width:80%\" tooltip-class=\"content-bg8\" :format-tooltip=\"transTime\" @change=\"getVal()\" input-size=\"mini\" :min=\"0\" :max=\"max\" v-model=\"numb\"><\/el-slider>\n\t\t                                    <!-- <input  class=\"bottom-range\" v-model=\"numb\" type=\"range\" min=\"0\" :max=\"max\" @input=\"getVal()\"  :style=\"{background: '-webkit-linear-gradient(top, var(--main-5), var(--main-5)) 0% 0% \/ '+ numb*100\/max +'% 100% no-repeat'}\"\/> -->\n\t\t                                    <span class=\"time\" style=\"padding-left:10px\">{{newTime}}<\/span>\n\t\t                                    <span class=\"time\">\/<\/span>\n\t\t                                    <span class=\"time\">{{time}}<\/span>\n\t\t                                <\/div>\n\t\t                                <!-- \u5faa\u73af\u64ad\u653e  -->\n\t\t                                <div class=\"music-func\">\n\t\t                                    <span @click=\"cycle=cycle==2?0:cycle+1\" class=\"cont-itme iconfont\" :class=\"cycle==0?'el-icon-finished':cycle==1?'el-icon-refresh':'el-icon-sort'\"><\/span>\n\t\t                                <\/div>\n\t\t                            <\/div>\n\t\t                        <\/div>\n\t\t                    <\/transition>\n\t\t                    <!-- \u6269\u5c55\u680f -->\n\t\t                    <div class=\"music-btn\" @click=\"MuBtnClick\">\n\t\t                        <i :class=\"muIsShow?'el-icon-arrow-left':'el-icon-arrow-right'\"><\/i>\n\t\t                    <\/div>\n\t\t                <\/el-col>\n\t\t            <\/el-row>\n\t\t        <\/div>\n\t\t        <script>\n\t\t            var Main = {\n\t\t                data() {\n\t\t                    return {\n\t\t                        index: 0, \/\/\u64ad\u653e\u5217\u8868\n\t\t                        muIsShow: false, \/\/\u662f\u5426\u663e\u793a\n\t\t                        isPlay: false, \/\/\u662f\u5426\u64ad\u653e\n\t\t                        canplay: false, \/\/\u662f\u5426\u80fd\u64ad\u653e\n\t\t                        loading: false, \/\/\u662f\u5426\u81ea\u52a8\u64ad\u653e\n\t\t                        cycle: 0,\n\t\t                        numb: 0,\n\t\t                        time: \"00:00\",\n\t\t                        newTime: \"00:00\",\n\t\t                        max: 0,\n\t\t                        audio: \"\",\n\t\t                        musicInfo: {},\n\t\t                        isList: false,\n\t\t                        isShow: false,\n\t\t                        setTimeout: null,\n\t\t                        musics: [\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\"music_id\": \"1463165983\",\n\t\t\t\t\t\t\t\t\t\t\"title\": \"\u6700\u7f8e\u7684\u671f\u5f85\",\n\t\t\t\t\t\t\t\t\t\t\"name\": \"\u5468\u7b14\u7545\",\n\t\t\t\t\t\t\t\t\t\t\"type\": \"netease\",\n\t\t\t\t\t\t\t\t\t\t\"url\":'https:\/\/www.0dutv.com\/plug\/down\/up2.php\/212877015.mp3',\n\t\t\t\t\t\t\t\t\t\t\"pic\":'https:\/\/p.pstatp.com\/origin\/1372100011fb653db9634'\n\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\t\"music_id\": \"515453363\",\n\t\t\t\t\t\t\t\t\t\t\"title\": \"\u8fc7\u5ba2\",\n\t\t\t\t\t\t\t\t\t\t\"name\": \"\u963f\u6db5\",\n\t\t\t\t\t\t\t\t\t\t\"type\": \"netease\",\n\t\t\t\t\t\t\t\t\t\t\"url\":'https:\/\/www.0dutv.com\/plug\/down\/up2.php\/109717925.mp3',\n\t\t\t\t\t\t\t\t\t\t\"pic\":'https:\/\/p.pstatp.com\/origin\/1372100011fb653db9634'\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t]\n\t\t                    }\n\t\t                },\n\t\t                methods: {\n\t\t                    \/\/ \u6253\u5f00\u548c\u5173\u95ed\u97f3\u4e50\u6536\u7f29\u680f\n\t\t                    MuBtnClick() {\n\t\t                        this.muIsShow = !this.muIsShow;\n\t\t                        this.hidden(1500);\n\t\t                    },\n\t\t                    hidden(time) {\n\t\t                        if (this.muIsShow == false) {\n\t\t                            this.setTimeout = setTimeout(() => {\n\t\t                                this.isShow = true;\n\t\t                            }, time);\n\t\t                        } else {\n\t\t                            clearTimeout(this.setTimeout);\n\t\t                            this.isShow = false;\n\t\t                        }\n\t\t                    },\n\t\t                    \/\/ \u64ad\u653e\u6682\u505c\n\t\t                    pause() {\n\t\t                        if (this.audio !== null && this.canplay) {\n\t\t                            this.loading = true;\n\t\t                            if (this.audio.paused) {\n\t\t                                this.audio.play(); \/\/ \u64ad\u653e\n\t\t                                this.isPlay = true;\n\t\t                            } else {\n\t\t                                this.audio.pause(); \/\/ \u6682\u505c\n\t\t                                this.isPlay = false;\n\t\t                                console.log(\"\u6682\u505c\u88ab\u8c03\u7528\u4e86\");\n\t\t                            }\n\t\t                        } else {\n\t\t                            this.$message({\n\t\t                                showClose: true,\n\t\t                                message: \"\u97f3\u4e50\u8fd8\u6ca1\u6709\u52a0\u8f7d\u6210\u529f\u5462\uff01\",\n\t\t                                type: \"warning\",\n\t\t                            });\n\t\t                        }\n\t\t                    },\n\t\t                    \/\/ \u5feb\u8fdb\u97f3\u4e50\n\t\t                    getVal() {\n\t\t                        if (!this.audio.paused || this.audio.currentTime != 0) {\n\t\t                            this.audio.currentTime = this.numb;\n\t\t                            if (this.numb == Math.floor(this.max)) {\n\t\t                                this.audio.pause();\n\t\t                                this.isPlay = false;\n\t\t                            }\n\t\t                        }\n\t\t                    },\n\t\t                    \/\/ \u83b7\u53d6\u97f3\u4e50\u603b\u65f6\u957f\n\t\t                    getTime() {\n\t\t                        let time = this.audio.duration;\n\t\t                        this.max = time;\n\t\t                        \/\/\u603b\u5171\u65f6\u957f\u7684\u79d2\u6570\n\t\t                        this.time = this.transTime(time);\n\t\t                    },\n\t\t                    \/\/ \u65f6\u95f4\u683c\u5f0f\u5316\u4f4d00\uff1a00\n\t\t                    formatTime(value) {\n\t\t                        let time = \"\";\n\t\t                        let s = value.split(\":\");\n\t\t                        let i = 0;\n\t\t                        for (; i < s.length - 1; i++) {\n\t\t                            time += s[i].length == 1 ? \"0\" + s[i] : s[i];\n\t\t                            time += \":\";\n\t\t                        }\n\t\t                        time += s[i].length == 1 ? \"0\" + s[i] : s[i];\n\t\t                        return time;\n\t\t                    },\n\t\t                    \/\/ \u628a\u6beb\u79d2\u53d8\u6210\u65f6\u5206\u79d2\n\t\t                    transTime(value) {\n\t\t                        let time = \"\";\n\t\t                        let h = parseInt(value \/ 3600);\n\t\t                        value %= 3600;\n\t\t                        let m = parseInt(value \/ 60);\n\t\t                        let s = parseInt(value % 60);\n\t\t                        if (h > 0) {\n\t\t                            time = this.formatTime(h + \":\" + m + \":\" + s);\n\t\t                        } else {\n\t\t                            time = this.formatTime(m + \":\" + s);\n\t\t                        }\n\t\t                        return time;\n\t\t                    },\n\t\t                    getMusic() {\n\t\t                        if (!this.musics[this.index].pause) {\n\t\t                            this.musicInfo = this.musics[this.index]\n\t\t                            this.audio.src = this.musics[this.index].url;\n\t\t                            \/\/ console.log(\"\u83b7\u53d6\u97f3\u4e50\");\n\t\t                            \/\/ const qs = require(\"qs\");\n\t\t                            \/\/ let that = this;\n\t\t                            \/\/ console.log(that.musics[that.index].type);\n\t\t                            \/\/ this.$post(\n\t\t                            \/\/         \"\/music\",\n\t\t                            \/\/         qs.stringify({\n\t\t                            \/\/             input: that.musics[that.index].music_id,\n\t\t                            \/\/             filter: \"id\",\n\t\t                            \/\/             type: that.musics[that.index].type,\n\t\t                            \/\/             page: 1,\n\t\t                            \/\/         })\n\t\t                            \/\/     )\n\t\t                            \/\/     .then(function(res) {\n\t\t                            \/\/         that.musicInfo = res.data[0];\n\t\t                            \/\/         that.audio.src = that.musicInfo.url;\n\t\t                            \/\/     })\n\t\t                            \/\/     .catch(function(error) {\n\t\t                            \/\/         that.audio.pause(); \/\/ \u6682\u505c\n\t\t                            \/\/         that.isPlay = false;\n\t\t                            \/\/     });\n\t\t                        } else {\n\t\t                            console.log(this.index);\n\t\t                            this.musicInfo = {\n\t\t                                title: this.musics[this.index].title,\n\t\t                                author: this.musics[this.index].name,\n\t\t                                pic: this.musics[this.index].img,\n\t\t                                url: this.musics[this.index].url,\n\t\t                            };\n\t\t                            this.audio.src = this.musics[this.index].url;\n\t\t                        }\n\t\t                    },\n\t\t                    \/\/ \u83b7\u53d6\u6211\u7684\u97f3\u4e50\u5217\u8868\n\t\t                    getList() {\n\t\t                        this.index = Math.floor(Math.random() * this.musics.length);\n\t\t                        this.length = this.musics.length;\n\t\t                        this.getMusic();\n\t\t                        \/\/ let that = this;\n\t\t                        \/\/ this.$get(\"url\")\n\t\t                        \/\/   .then(function (res) {\n\t\t                        \/\/     that.musics = res.data;\n\t\t                        \/\/     that.index = Math.floor(Math.random() * that.musics.length);\n\t\t                        \/\/     that.length = that.musics.length;\n\t\t                        \/\/     that.getMusic();\n\t\t                        \/\/   })\n\t\t                        \/\/   .catch(function (error) {});\n\t\t                    },\n\t\t\t\t\t\t\tmError() {\n\t\t\t\t\t\t\t      if (this.loading) {\n\t\t\t\t\t\t\t        console.log(\"\u51fa\u9519\");\n\t\t\t\t\t\t\t        this.$message({\n\t\t\t\t\t\t\t          showClose: true,\n\t\t\t\t\t\t\t          message: \"\u64ad\u653e\u9519\u8bef,\u81ea\u52a8\u64ad\u653e\u4e0b\u4e00\u9996\",\n\t\t\t\t\t\t\t          type: \"error\",\n\t\t\t\t\t\t\t        });\n\t\t\t\t\t\t\t        if (this.musics[this.index].musicInfo) {\n\t\t\t\t\t\t\t          delete this.musics[this.index].musicInfo;\n\t\t\t\t\t\t\t        }\n\t\t\t\t\t\t\t        this.index = this.index == this.musics.length - 1 ? 0 : this.index + 1;\n\t\t\t\t\t\t\t      }\n\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t    mCanplay() {\n\t\t\t\t\t\t\t      this.canplay = true;\n\t\t\t\t\t\t\t      if (this.loading) {\n\t\t\t\t\t\t\t        this.audio.play(); \/\/ \u64ad\u653e\n\t\t\t\t\t\t\t        this.isPlay = true;\n\t\t\t\t\t\t\t      }\n\t\t\t\t\t\t\t      this.getTime();\n\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t    mTimeUpdate() {\n\t\t\t\t\t\t\t      this.numb = this.audio.currentTime;\n\t\t\t\t\t\t\t      this.newTime = this.transTime(this.audio.currentTime);\n\t\t\t\t\t\t\t    },\n\t\t\t\t\t\t\t    mEnded() {\n\t\t\t\t\t\t\t      if (this.cycle == 0) {\n\t\t\t\t\t\t\t        this.audio.pause(); \/\/ \u6682\u505c\n\t\t\t\t\t\t\t        this.isPlay = false;\n\t\t\t\t\t\t\t      } else if (this.cycle == 1) {\n\t\t\t\t\t\t\t        this.audio.play(); \/\/ \u64ad\u653e\n\t\t\t\t\t\t\t        this.isPlay = true;\n\t\t\t\t\t\t\t      } else {\n\t\t\t\t\t\t\t        this.index = this.index == this.musics.length - 1 ? 0 : this.index + 1;\n\t\t\t\t\t\t\t      }\n\t\t\t\t\t\t\t    },\n\t\t                },\n\t\t                mounted() {\n\t\t                    this.hidden(5000);\n\t\t                    let that = this;\n\t\t                },\n\t\t                 created() {\n\t\t                   \/\/ this.audio=document.getElementById('music')\n\t\t                   this.audio = document.createElement(\"audio\");\n\t\t                   this.getList();\n\t\t                   let that = this;\n\t\t                   this.audio.addEventListener(\"canplay\", that.mCanplay, false),\n\t\t                   this.audio.addEventListener(\"timeupdate\", that.mTimeUpdate, false);\n\t\t                   this.audio.addEventListener(\"ended\", that.mEnded, false);\n\t\t                   this.audio.addEventListener(\"error\", that.mError, false);\n\t\t                 },\n\t\t\t\t\t\t  beforeDestroy() {\n\t\t\t\t\t\t     let that=this\n\t\t\t\t\t\t     this.audio.removeEventListener(\"canplay\", that.mCanplay);\n\t\t\t\t\t\t     this.audio.removeEventListener(\"ended\", that.mEnded);\n\t\t\t\t\t\t     this.audio.removeEventListener(\"error\", that.mError);\n\t\t\t\t\t\t     this.audio.removeEventListener(\"timeupdate\", that.mTimeUpdate);\n\t\t\t\t\t\t   },\n\t\t                watch: {\n\t\t                    index(val) {\n\t\t                        if (this.loading) {\n\t\t                            this.audio.play(); \/\/ \u64ad\u653e\n\t\t                            this.isPlay = true;\n\t\t                        }\n\t\t                        this.canplay = false;\n\t\t                        this.audio.currentTime = 0;\n\t\t                        \/\/ this.audio.pause();\n\t\t                        this.audio.src = \"\";\n\t\t                        this.getMusic();\n\t\t                    },\n\t\t                },\n\t\t            }\n\t\t            var Ctor = Vue.extend(Main)\n\t\t            new Ctor().$mount(document.getElementById('app'))\n\t\t        <\/script>\n```\n\n## \u4e86\u89e3audio\n\n### html\u6807\u7b7e\n\n```demo\n<audio src=\"http:\/\/www.0dutv.com\/plug\/down\/up2.php\/109717925.mp3\" controls=\"controls\">\nYour browser does not support the audio element.\n<\/audio>\n\n```\n\n### \u5c5e\u6027\n\n| \u5c5e\u6027     | \u503c       | \u63cf\u8ff0                                                         |\n| -------- | -------- | ------------------------------------------------------------ |\n| autoplay | autoplay | \u5982\u679c\u51fa\u73b0\u8be5\u5c5e\u6027\uff0c\u5219\u97f3\u9891\u5728\u5c31\u7eea\u540e\u9a6c\u4e0a\u64ad\u653e\u3002                     |\n| controls | controls | \u5982\u679c\u51fa\u73b0\u8be5\u5c5e\u6027\uff0c\u5219\u5411\u7528\u6237\u663e\u793a\u63a7\u4ef6\uff0c\u6bd4\u5982\u64ad\u653e\u6309\u94ae\u3002             |\n| loop     | loop     | \u5982\u679c\u51fa\u73b0\u8be5\u5c5e\u6027\uff0c\u5219\u6bcf\u5f53\u97f3\u9891\u7ed3\u675f\u65f6\u91cd\u65b0\u5f00\u59cb\u64ad\u653e\u3002               |\n| muted    | muted    | \u89c4\u5b9a\u89c6\u9891\u8f93\u51fa\u5e94\u8be5\u88ab\u9759\u97f3\u3002                                     |\n| preload  | preload  | \u5982\u679c\u51fa\u73b0\u8be5\u5c5e\u6027\uff0c\u5219\u97f3\u9891\u5728\u9875\u9762\u52a0\u8f7d\u65f6\u8fdb\u884c\u52a0\u8f7d\uff0c\u5e76\u9884\u5907\u64ad\u653e\u3002\u5982\u679c\u4f7f\u7528 \"autoplay\"\uff0c\u5219\u5ffd\u7565\u8be5\u5c5e\u6027\u3002 |\n| src      | url      | \u8981\u64ad\u653e\u7684\u97f3\u9891\u7684 URL\u3002                                         |\n\n> \u5185\u5bb9\u6765\u6e90---[W3School](https:\/\/www.w3school.com.cn\/tags\/tag_audio.asp)\n\n### js\u521b\u5efa\uff08\u672c\u6848\u4f8b\u4f7f\u7528\uff09\n\n```js\n\/\/\u521b\u5efaaudio,\u4e0d\u4f1a\u5728\u9875\u9762\u4e2d\u663e\u793a\u3002\n var audio=document.createElement(\"audio\");\n\/\/\u8bbe\u7f6esrc,\u64ad\u653e\u5730\u5740\u3002\naudio.src ='http:\/\/url'\n```\n\n### \u4e8b\u4ef6\n\n| \u5c5e\u6027             | \u503c     | \u63cf\u8ff0                                                         |\n| ---------------- | ------ | ------------------------------------------------------------ |\n| oncanplay        | script | \u5f53\u6587\u4ef6\u5c31\u7eea\u53ef\u4ee5\u5f00\u59cb\u64ad\u653e\u65f6\u8fd0\u884c\u7684\u811a\u672c\uff08\u7f13\u51b2\u5df2\u8db3\u591f\u5f00\u59cb\u65f6\uff09\u3002     |\n| oncanplaythrough | script | \u5f53\u5a92\u4ecb\u80fd\u591f\u65e0\u9700\u56e0\u7f13\u51b2\u800c\u505c\u6b62\u5373\u53ef\u64ad\u653e\u81f3\u7ed3\u5c3e\u65f6\u8fd0\u884c\u7684\u811a\u672c\u3002       |\n| onended          | script | \u5f53\u5a92\u4ecb\u5df2\u5230\u8fbe\u7ed3\u5c3e\u65f6\u8fd0\u884c\u7684\u811a\u672c\uff08\u53ef\u53d1\u9001\u7c7b\u4f3c\u201c\u611f\u8c22\u89c2\u770b\u201d\u4e4b\u7c7b\u7684\u6d88\u606f |\n| onpause          | script | \u5f53\u5a92\u4ecb\u88ab\u7528\u6237\u6216\u7a0b\u5e8f\u6682\u505c\u65f6\u8fd0\u884c\u7684\u811a\u672c\u3002                         |\n| onplay           | script | \u5f53\u5a92\u4ecb\u5df2\u5c31\u7eea\u53ef\u4ee5\u5f00\u59cb\u64ad\u653e\u65f6\u8fd0\u884c\u7684\u811a\u672c\u3002                       |\n| onplaying        | script | \u5f53\u5a92\u4ecb\u5df2\u5f00\u59cb\u64ad\u653e\u65f6\u8fd0\u884c\u7684\u811a\u672c\u3002                               |\n| onprogress       | script | \u5f53\u6d4f\u89c8\u5668\u6b63\u5728\u83b7\u53d6\u5a92\u4ecb\u6570\u636e\u65f6\u8fd0\u884c\u7684\u811a\u672c\u3002                       |\n| ontimeupdate     | script | \u5f53\u64ad\u653e\u4f4d\u7f6e\u6539\u53d8\u65f6\uff08\u6bd4\u5982\u5f53\u7528\u6237\u5feb\u8fdb\u5230\u5a92\u4ecb\u4e2d\u4e00\u4e2a\u4e0d\u540c\u7684\u4f4d\u7f6e\u65f6\uff09\u8fd0\u884c\u7684\u811a\u672c\u3002 |\n\n> \u5185\u5bb9\u6765\u6e90---[W3School](https:\/\/www.w3school.com.cn\/tags\/html_ref_eventattributes.asp)\n\n## \u6848\u4f8b\u51c6\u5907\n\n### \u683c\u5f0f\u5316\u65f6\u95f4\n\n```JavaScript\n\/\/ \u83b7\u53d6\u97f3\u4e50\u603b\u65f6\u957f\n    getTime() {\n      let time = this.audio.duration;\n      this.max = time;\n      \/\/\u603b\u5171\u65f6\u957f\u7684\u79d2\u6570\n      this.time = this.transTime(time);\n    },\n    \/\/ \u65f6\u95f4\u683c\u5f0f\u5316\u4f4d00\uff1a00\n    formatTime(value) {\n      let time = \"\";\n      let s = value.split(\":\");\n      let i = 0;\n      for (; i < s.length - 1; i++) {\n        time += s[i].length == 1 ? \"0\" + s[i] : s[i];\n        time += \":\";\n      }\n      time += s[i].length == 1 ? \"0\" + s[i] : s[i];\n      return time;\n    },\n    \/\/ \u628a\u6beb\u79d2\u53d8\u6210\u65f6\u5206\u79d2\n    transTime(value) {\n      let time = \"\";\n      let h = parseInt(value \/ 3600);\n      value %= 3600;\n      let m = parseInt(value \/ 60);\n      let s = parseInt(value % 60);\n      if (h > 0) {\n        time = this.formatTime(h + \":\" + m + \":\" + s);\n      } else {\n        time = this.formatTime(m + \":\" + s);\n      }\n      return time;\n    },\n\n```\n\n### \u521b\u5efa\u53ca\u7ed1\u5b9a\u4e8b\u4ef6\n\n```JavaScript\ncreated() {\n    \/\/ \u521b\u5efaAudio\t\n    this.audio = document.createElement(\"audio\");\n    this.getList();\n    let that = this;\n    \/\/ \u5f53\u97f3\u4e50\u51c6\u5907\u5c31\u7eea\u65f6\u7684\u64cd\u4f5c\n    this.audio.addEventListener(\n      \"canplay\",\n      function () {\n        console.log(\"\u52a0\u8f7d\u6210\u529f\");\n        console.log(that.musicInfo.url);\n        that.canplay = true;\n\t\/\/\u9632\u6b62\u81ea\u52a8\u64ad\u653e\n        if (that.loading) {\n          that.audio.play(); \/\/ \u64ad\u653e\n          that.isPlay = true;\n        }\n        that.getTime();\n        \/\/ that.pause()\n      },\n      false\n    ),\n\/\/\u5feb\u8fdb\u65f6\u7684\u64cd\u4f5c\uff0c\u540c\u6b65\u65f6\u95f4\n      this.audio.addEventListener(\n        \"timeupdate\",\n        function () {\n          that.numb = that.audio.currentTime;\n          that.newTime = that.transTime(that.audio.currentTime);\n        },\n        false\n      );\n\/\/\u5f53\u97f3\u4e50\u64ad\u653e\u5230\u7ed3\u675f\u540e\u7684\u64cd\u4f5c\uff0c\n    this.audio.addEventListener(\n      \"ended\",\n      function () {\n        if (that.cycle == 0) {\n          that.audio.pause(); \/\/ \u6682\u505c\n          that.isPlay = false;\n        } else if (that.cycle == 1) {\n          that.audio.play(); \/\/ \u64ad\u653e\n          that.isPlay = true;\n        } else {\n            that.index == that.musics.length - 1 ? 0 : that.index + 1;\n        }\n      },\n      false\n    );\n  },\n\n```\n\n### \u64ad\u653e\u6682\u505c\u3001\u5feb\u8fdb\n\n```JavaScript\n\/\/ \u64ad\u653e\u6682\u505c\n    pause() {\n      if (this.audio !== null && this.canplay) {\n        this.loading = true;\n        if (this.audio.paused) {\n          this.audio.play(); \/\/ \u64ad\u653e\n          this.isPlay = true;\n        } else {\n          this.audio.pause(); \/\/ \u6682\u505c\n          this.isPlay = false;\n          console.log(\"\u6682\u505c\u88ab\u8c03\u7528\u4e86\");\n        }\n      } else {\n        this.$message({\n          showClose: true,\n          message: \"\u97f3\u4e50\u8fd8\u6ca1\u6709\u52a0\u8f7d\u6210\u529f\u5462\uff01\",\n          type: \"warning\",\n        });\n      }\n    },\n    \/\/ \u5feb\u8fdb\u97f3\u4e50\n    getVal() {\n      if (!this.audio.paused || this.audio.currentTime != 0) {\n        this.audio.currentTime = this.numb;\n        if (this.numb == Math.floor(this.max)) {\n          this.audio.pause();\n          this.isPlay = false;\n        }\n      }\n    },\n```\n\n### \u5207\u6362\n\n\u4e3b\u8981\u65f6\u901a\u8fc7\u76d1\u542c\u5668\uff0c\u76d1\u542c\u97f3\u4e50id\u7684\u53d8\u5316\u6765\u5207\u6362\u6b4c\u66f2\n\n```JavaScript\n watch: {\n    index(val) {\n      if (this.loading) {\n        this.audio.play(); \/\/ \u64ad\u653e\n        this.isPlay = true;\n      }\n      this.canplay = false;\n      this.audio.currentTime = 0;\n      \/\/ this.audio.pause();\n      this.audio.src = \"\";\n      this.getMusic();\n    },\n  },\n```","img":"https:\/\/p.pstatp.com\/origin\/137a300019d2c62362626","classty":"\u524d\u7aef","channels":"{\"jianshu\":\"https:\/\/www.jianshu.com\/p\/c3561d620215\"}","name":"Baymax","click":3,"like":1,"is_show":1,"head_show":1,"share_show":1,"copyright_show":1,"message_show":1,"deleted_at":1,"created_at":"2020-09-08T12:01:30.000000Z","updated_at":"2020-11-22T07:42:12.000000Z","message_count":0,"label":["Vue"],"clicks":1},{"id":6,"title":"Vue\u524d\u7aef\u603b\u7ed3\u2014\u2014SEO\u4f18\u5316","desc":"\u535a\u5ba2\u4e0a\u7ebf\u4e5f\u6709\u4e00\u6bb5\u65f6\u95f4\u4e86\uff0c\u4e5f\u5728\u5404\u5927\u641c\u7d22\u5f15\u64ce\u4e0a\u63d0\u4ea4\u4e86\u6536\u5f55\u4fe1\u606f\uff0c\u4f46\u6ca1\u5565\u7528\uff0c\u95f2\u7740\u65e0\u804a\u5c31\u5f00\u59cb\u641e\u8d77seo\u4e86\uff0cvue \u4f5c\u4e3a\u4e00\u4e2a\u5355\u9875\u9762\u5e94\u7528\uff0c\u90fd\u662f\u901a\u8fc7js\u6765\u6e32\u67d3\u9875\u9762\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u8718\u86db\u5728\u722c\u53d6\u7f51\u7ad9\u7684\u65f6\u5019\u53ea\u80fd\u83b7\u53d6\u5230\u4e00\u4e2a\u7a7a\u58f3\u3002\u6ca1\u6709\u4fe1\u606f\u81ea\u7136\u4e5f\u4e0d\u4f1a\u88ab\u6536\u5f55\u3002\u4e8e\u662f\u5f00\u59cb\u7814\u7a76Vue seo\u4f18\u5316\u95ee\u9898.","content":"## \u524d\u8a00\n\n\u535a\u5ba2\u4e0a\u7ebf\u4e5f\u6709\u4e00\u6bb5\u65f6\u95f4\u4e86\uff0c\u4e5f\u5728\u5404\u5927\u641c\u7d22\u5f15\u64ce\u4e0a\u63d0\u4ea4\u4e86\u6536\u5f55\u4fe1\u606f\uff0c\u4f46\u6ca1\u5565\u7528\uff0c\u95f2\u7740\u65e0\u804a\u5c31\u5f00\u59cb\u641e\u8d77seo\u4e86\uff0cvue \u4f5c\u4e3a\u4e00\u4e2a\u5355\u9875\u9762\u5e94\u7528\uff0c\u90fd\u662f\u901a\u8fc7js\u6765\u6e32\u67d3\u9875\u9762\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u8718\u86db\u5728\u722c\u53d6\u7f51\u7ad9\u7684\u65f6\u5019\u53ea\u80fd\u83b7\u53d6\u5230\u4e00\u4e2a\u7a7a\u58f3\u3002\u6ca1\u6709\u4fe1\u606f\u81ea\u7136\u4e5f\u4e0d\u4f1a\u88ab\u6536\u5f55\u3002\u4e8e\u662f\u5f00\u59cb\u7814\u7a76Vue seo\u4f18\u5316\u95ee\u9898\uff0c\u672c\u6765\u60f3\u4f7f\u7528\u5b98\u65b9\u7684\u505a\u6cd5\u670d\u52a1\u5668\u6e32\u67d3\uff0c\u4f46\u8fd9\u6837\u4f1a\u5bfc\u81f4\u5f88\u591a\u95ee\u9898\uff0c\u7531\u4e8e\u6211\u7684\u529f\u80fd\u5df2\u7ecf\u5f00\u53d1\u597d\u4e86\uff0c\u5982\u679c\u4f7f\u7528\u670d\u52a1\u5668\u6e32\u67d3\uff0c\u90a3\u6211\u7684\u6574\u4e2a\u9879\u76ee\u90fd\u8981\u8fdb\u884c\u91cd\u6784\uff0c\u8d39\u65f6\u8d39\u529b\u3002\u800c\u4e14\u6211\u4f7f\u7528\u7684\u963f\u91cc\u4e91\u5b66\u751f\u670d\u52a1\u5668\uff0c\u6027\u80fd\u4e5f\u4e0d\u591f\u7528\u554a\uff01\u4e8e\u662f\u6211\u91c7\u7528\u4e86\u9884\u6e32\u67d3\u7684\u65b9\u5f0f\uff0c\u9488\u5bf9\u8718\u86db\u722c\u866b\uff0c\u5728\u670d\u52a1\u5668\u5f00\u4e00\u4e2a\u5c0f\u7076\u7ed9\u5b83\uff0c\u901a\u8fc7nginx\u670d\u52a1\u5668\u6765\u5224\u65ad\u662f\u5426\u4e3a\u722c\u866b\uff08\u901a\u8fc7\u8bf7\u6c42\u5934\u5224\u65ad\u7684\uff09\uff0c\u5982\u679c\u4e3a\u722c\u866b\u5c31\u628a\u8bf7\u6c42\u8f6c\u53d1\u7684\u9884\u6e32\u67d3\u670d\u52a1\u5668\u4e2d\uff0c\u7136\u540e\u518d\u628a\u6e32\u67d3\u597d\u7684\u9875\u9762\u8fd4\u56de\u7ed9\u722c\u866b\uff0c\u5927\u6982\u65f6\u8fd9\u4e48\u4e2a\u601d\u60f3\u3002\u7531\u4e8e\u65b9\u6848\u592a\u591a\u524d\u524d\u540e\u540e\u8bd5\u4e86\u51e0\u4e2a\u65b9\u6cd5\u3002\u6700\u540e\u4f7f\u7528\u4e86`puppeteer`\uff08\u6027\u80fd\u597d\uff09\n\n### `puppeteer`\u6e32\u67d3\n\n>  Puppeteer \u662f Chrome \u5f00\u53d1\u56e2\u961f\u5728 2017 \u5e74\u53d1\u5e03\u7684\u4e00\u4e2a Node.js \u5305\uff0c\u7528\u6765\u6a21\u62df Chrome \u6d4f\u89c8\u5668\u7684\u8fd0\u884c \n\n\u7531\u4e8e\u6211`Linux`\u8fd8\u662f\u4e0d\u719f\u7ec3\uff0c\u6240\u4ee5\u4f7f\u7528\u7684\u5b9d\u5854\u9762\u677f\u914d\u7f6e\u7684\uff0c\u53ef\u4ee5\u5728\u5b9d\u5854\u9762\u677f\u4e2d\u4e0b\u4e00\u4e2apm2\u7ba1\u7406\u5668\uff08 *\u7ba1\u7406*\u4f60\u7684node\u8fdb\u7a0b\uff0c\u4e5f\u5305\u62ec\u4e86node.js\u548cnpm \uff09\u5b89\u88c5\u6210\u529f\u540e\u5c31\u53ef\u4ee5\u6309\u4e0b\u9762\u65b9\u6cd5\u914d\u7f6e\u3002[Puppeteer Api](https:\/\/zhaoqize.github.io\/puppeteer-api-zh_CN\/#?product=Puppeteer&version=v5.2.1&show=api-puppeteerconnectoptions)\n\n- \u9996\u5148\u5b89\u88c5`puppeteer`\uff1anpm install puppeteer --save\n\n- \u5b89\u88c5\u4f9d\u8d56\uff1a \n\n- ```text\n  # \u4f9d\u8d56\u5e93\n  yum install pango.x86_64 libXcomposite.x86_64 libXcursor.x86_64 libXdamage.x86_64 libXext.x86_64 libXi.x86_64 libXtst.x86_64 cups-libs.x86_64 libXScrnSaver.x86_64 libXrandr.x86_64 GConf2.x86_64 alsa-lib.x86_64 atk.x86_64 gtk3.x86_64 -y\n  \n  # \u5b57\u4f53\n  yum install ipa-gothic-fonts xorg-x11-fonts-100dpi xorg-x11-fonts-75dpi xorg-x11-utils xorg-x11-fonts-cyrillic xorg-x11-fonts-Type1 xorg-x11-fonts-misc -y\n  ```\n\n \u63a5\u4e0b\u6765\u5c31\u662f\u914d\u7f6e\u670d\u52a1\u5668\u4ee3\u7801\u4e86\npuppeter.js\u6027\u80fd\u4f18\u5316\uff0c\u53bb\u9664\u4e0d\u5fc5\u8981\u7684\u529f\u80fd\uff0c\u63d0\u9ad8\u6027\u80fd\u3002\n\n```javascript\nconst puppeteer = require('puppeteer')\nconst MAX_WSE = 2; \/\/\u542f\u52a8\u51e0\u4e2a\u6d4f\u89c8\u5668 \nlet WSE_LIST = []; \/\/\u5b58\u50a8browserWSEndpoint\u5217\u8868\n\/\/\u8d1f\u8f7d\u5747\u8861\n(async () => {\n\tfor (var i = 0; i < MAX_WSE; i++) {\n\t\tconst browser = await puppeteer.launch({\n            \/\/\u65e0\u5934\u6a21\u5f0f\n\t\t\theadless: true,\n            \/\/\u53c2\u6570\n\t\t\targs: [\n\t\t\t\t'--disable-gpu',\n\t\t\t\t'--disable-dev-shm-usage',\n\t\t\t\t'--disable-setuid-sandbox',\n\t\t\t\t'--no-first-run',\n\t\t\t\t'--no-sandbox',\n\t\t\t\t'--no-zygote',\n\t\t\t\t'--single-process'\n\t\t\t]\n\t\t});\n\t\tbrowserWSEndpoint = await browser.wsEndpoint();\n\t\tWSE_LIST.push(browserWSEndpoint);\n\t}\n})();\n\nmodule.exports = WSE_LIST\n```\n\nspider.js\u6e32\u67d3\u8bf7\u6c42\u7684\u9875\u9762\n\n```javascript\nconst puppeteer = require('puppeteer')\nconst WSE_LIST = require('.\/puppeteer-pool.js')\nconst spider = async (url) => {\n\t\n\tlet tmp = Math.floor(Math.random() * WSE_LIST.length);\n\t\/\/\u968f\u673a\u83b7\u53d6\u6d4f\u89c8\u5668\n\tlet browserWSEndpoint = WSE_LIST[tmp];\n\t\/\/\u8fde\u63a5\n\tconst browser = await puppeteer.connect({\n\t\tbrowserWSEndpoint\n\t});\n\t\/\/\u6253\u5f00\u4e00\u4e2a\u6807\u7b7e\u9875\n\tvar page = await browser.newPage();\n\t\/\/\u6253\u5f00\u7f51\u9875\n\tawait page.goto(url, {\n\t\ttimeout: 0, \/\/\u8fde\u63a5\u8d85\u65f6\u65f6\u95f4\uff0c\u5355\u4f4dms\n\t\twaitUntil: 'networkidle0' \/\/\u7f51\u7edc\u7a7a\u95f2\u8bf4\u660e\u5df2\u52a0\u8f7d\u5b8c\u6bd5\n\t})\n\t\/\/\u83b7\u53d6\u6e32\u67d3\u597d\u7684\u9875\u9762\u6e90\u7801\u3002\u4e0d\u5efa\u8bae\u4f7f\u7528await page.content();\u83b7\u53d6\u9875\u9762\uff0c\u56e0\u4e3a\u5728\u6211\u6d4b\u8bd5\u4e2d\u53d1\u73b0\uff0c\u9875\u9762\u8fd8\u6ca1\u6709\u5b8c\u5168\u52a0\u8f7d\u3002\u5c31\u83b7\u53d6\u5230\u4e86\u3002\u9875\u9762\u6e90\u7801\u4e0d\u5b8c\u6574\u3002\u4e5f\u5c31\u662f\u52a8\u6001\u8def\u7531\u6ca1\u6709\u52a0\u8f7d\u3002vue\u8def\u7531\u4e5f\u914d\u7f6e\u4e86history\u6a21\u5f0f\n\tvar html = await page.evaluate(() => {\n\t\treturn document.getElementsByTagName('html')[0].outerHTML;\n\t});\n\n\tawait page.close();\n\n\treturn html;\n}\n\n\nmodule.exports = spider;\n```\n\nserver.js\uff0c\u901a\u8fc7express \u5f00\u542f\u4e00\u4e2a\u670d\u52a1\u5668\u3002\u63a5\u53d7\u8f6c\u53d1\u7684\u8bf7\u6c42\n\n```javascript\nvar express = require('express');\nvar app = express();\nvar spider = require(\".\/spider1.js\")\nvar minify = require('html-minifier').minify;\napp.get('*', async (req, res, next) => {\n\t\/\/ \u90e8\u7f72\u5230\u670d\u52a1\u5668\u7684\u5b8c\u6574URL\n\t var url = req.protocol + ':\/\/'+ req.hostname + req.originalUrl;\n\tconsole.log('\u8bf7\u6c42\u7684\u5b8c\u6574URL\uff1a' + url);\n\tvar content = await spider(url).catch((error) => {\n\t\tconsole.log(error);\n\t\tres.send('\u83b7\u53d6html\u5185\u5bb9\u5931\u8d25');\n\t\treturn;\n\t});\n    \/\/\u7531\u4e8e\u662f\u76f4\u63a5\u83b7\u53d6\u7684\u6e90\u7801\uff0c\u4e0b\u9762\u901a\u8fc7minify\u5e93\u538b\u7f29\u4ee3\u7801\uff0c\u4e5f\u4e0d\u77e5\u9053\u662f\u4e0d\u662f\u591a\u4f59\u7684\u3002\n\tcontent=minify(content,{removeComments: true,collapseWhitespace: true,minifyJS:true, minifyCSS:true});\n\tres.send(content);\n});\n\/\/\u76d1\u542c3000\u7aef\u53e3\napp.listen(3000, () => {\n\tconsole.log('\u9884\u6e32\u67d3\u670d\u52a1\u5df2\u542f\u52a8\uff01');\n});\n```\nNginx\u914d\u7f6e\n\n```shell\nupstream spider_server {\n  server localhost:3000;\n}\nserver\n{\n    location \/ {\n        # \u8718\u86db\u722c\u866b\u5904\u7406\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header REMOTE-HOST $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        if ($http_user_agent ~* \"spider|bot\") {\n            proxy_pass http:\/\/spider_server;\n        }\n\n        try_files $uri $uri\/ @router;\n    }\n    location @router {\n        rewrite ^(.*)$ \/index.html last;\n    }\n    \u2026\u2026\n```\n###  `PhantomJS` \n\n\u521a\u5f00\u59cb\u63a5\u89e6\u7684\u5c31\u662f\u8fd9\u79cd\u65b9\u6cd5\uff0c\u540e\u6765\u4e86\u89e3`puppeteer`\u51fa\u6765\u4e86\uff0c` PhantomJS `\u5f00\u53d1\u8005\u5c31\u4e0d\u7ef4\u62a4\u4e86\u3002\u4e5f\u548c`puppeteer`\u505a\u4e86\u6027\u80fd\u5bf9\u6bd4\uff0c\u6027\u80fd\u4e5f\u4e0d\u884c\u3002\u8fd9\u4e5f\u4e0d\u662f\u6700\u5173\u952e\u7684\uff0c\u5728\u6211\u7528\u767e\u5ea6\u7ad9\u957f\u5de5\u5177\u722c\u53d6\u6211\u7684\u6587\u7ae0\u662f\uff0c\u53d1\u73b0\u6587\u7ae0\u5e76\u6ca1\u6709\u6e32\u67d3\uff0c\u53ef\u80fd\u662f\u56e0\u4e3a\u4f7f\u7528\u4e86\u65b0\u7684\u8bed\u6cd5\u4e86\u5427\u3002\u6bd5\u7adf\u5f00\u53d1\u8005\u4e5f\u4e0d\u7ef4\u62a4\u4e86\u3002\u6240\u4ee5\u76f4\u63a5\u653e\u4ee3\u7801\u5c31\u4e0d\u8fc7\u591a\u7684\u89e3\u91ca\u4e86\u3002\n\n```javascript\n\/\/ spider.js\n\"use strict\";\n\n\/\/ \u5355\u4e2a\u8d44\u6e90\u7b49\u5f85\u65f6\u95f4\uff0c\u907f\u514d\u8d44\u6e90\u52a0\u8f7d\u540e\u8fd8\u9700\u8981\u52a0\u8f7d\u5176\u4ed6\u8d44\u6e90\nvar resourceWait = 500;\nvar resourceWaitTimer;\n\n\/\/ \u6700\u5927\u7b49\u5f85\u65f6\u95f4\nvar maxWait = 5000;\nvar maxWaitTimer;\n\n\/\/ \u8d44\u6e90\u8ba1\u6570\nvar resourceCount = 0;\n\n\/\/ PhantomJS WebPage\u6a21\u5757\nvar page = require('webpage').create();\n\n\/\/ NodeJS \u7cfb\u7edf\u6a21\u5757\nvar system = require('system');\n\n\/\/ \u4eceCLI\u4e2d\u83b7\u53d6\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3a\u76ee\u6807URL\nvar url = system.args[1];\n\n\/\/ \u8bbe\u7f6ePhantomJS\u89c6\u7a97\u5927\u5c0f\npage.viewportSize = {\n    width: 1280,\n    height: 1014\n};\n\n\/\/ \u83b7\u53d6\u955c\u50cf\nvar capture = function(errCode){\n\n    \/\/ \u5916\u90e8\u901a\u8fc7stdout\u83b7\u53d6\u9875\u9762\u5185\u5bb9\n    console.log(page.content);\n\n    \/\/ \u6e05\u9664\u8ba1\u65f6\u5668\n    clearTimeout(maxWaitTimer);\n\n    \/\/ \u4efb\u52a1\u5b8c\u6210\uff0c\u6b63\u5e38\u9000\u51fa\n    phantom.exit(errCode);\n\n};\n\n\/\/ \u8d44\u6e90\u8bf7\u6c42\u5e76\u8ba1\u6570\npage.onResourceRequested = function(req){\n    resourceCount++;\n    clearTimeout(resourceWaitTimer);\n};\n\n\/\/ \u8d44\u6e90\u52a0\u8f7d\u5b8c\u6bd5\npage.onResourceReceived = function (res) {\n\n    \/\/ chunk\u6a21\u5f0f\u7684HTTP\u56de\u5305\uff0c\u4f1a\u591a\u6b21\u89e6\u53d1resourceReceived\u4e8b\u4ef6\uff0c\u9700\u8981\u5224\u65ad\u8d44\u6e90\u662f\u5426\u5df2\u7ecfend\n    if (res.stage !== 'end'){\n        return;\n    }\n\n    resourceCount--;\n\n    if (resourceCount === 0){\n\n        \/\/ \u5f53\u9875\u9762\u4e2d\u5168\u90e8\u8d44\u6e90\u90fd\u52a0\u8f7d\u5b8c\u6bd5\u540e\uff0c\u622a\u53d6\u5f53\u524d\u6e32\u67d3\u51fa\u6765\u7684html\n        \/\/ \u7531\u4e8eonResourceReceived\u5728\u8d44\u6e90\u52a0\u8f7d\u5b8c\u6bd5\u5c31\u7acb\u5373\u88ab\u8c03\u7528\u4e86\uff0c\u6211\u4eec\u9700\u8981\u7ed9\u4e00\u4e9b\u65f6\u95f4\u8ba9JS\u8dd1\u89e3\u6790\u4efb\u52a1\n        \/\/ \u8fd9\u91cc\u9ed8\u8ba4\u9884\u7559500\u6beb\u79d2\n        resourceWaitTimer = setTimeout(capture, resourceWait);\n\n    }\n};\n\n\/\/ \u8d44\u6e90\u52a0\u8f7d\u8d85\u65f6\npage.onResourceTimeout = function(req){\n    resouceCount--;\n};\n\n\/\/ \u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\npage.onResourceError = function(err){\n    resourceCount--;\n};\n\n\/\/ \u6253\u5f00\u9875\u9762\npage.open(url, function (status) {\n\n    if (status !== 'success') {\n\n        phantom.exit(1);\n\n    } else {\n\n        \/\/ \u5f53\u6539\u9875\u9762\u7684\u521d\u59cbhtml\u8fd4\u56de\u6210\u529f\u540e\uff0c\u5f00\u542f\u5b9a\u65f6\u5668\n        \/\/ \u5f53\u5230\u8fbe\u6700\u5927\u65f6\u95f4\uff08\u9ed8\u8ba45\u79d2\uff09\u7684\u65f6\u5019\uff0c\u622a\u53d6\u90a3\u4e00\u65f6\u523b\u6e32\u67d3\u51fa\u6765\u7684html\n        maxWaitTimer = setTimeout(function(){\n\n            capture(2);\n\n        }, maxWait);\n\n    }\n\n});\n```\n\nserver.js\n\n```javascript\n\/\/ server.js\n\/\/ ExpressJS\u8c03\u7528\u65b9\u5f0f\nvar express = require('express');\nvar app = express();\n\/\/ \u5f15\u5165NodeJS\u7684\u5b50\u8fdb\u7a0b\u6a21\u5757\nvar child_process = require('child_process');\n\napp.get('*', function(req, res){\n\n    \/\/ \u5b8c\u6574URL\n    var url = req.protocol + ':\/\/'+ req.hostname + req.originalUrl;\n\n    \/\/ \u9884\u6e32\u67d3\u540e\u7684\u9875\u9762\u5b57\u7b26\u4e32\u5bb9\u5668\n    var content = '';\n\n    \/\/ \u5f00\u542f\u4e00\u4e2aphantomjs\u5b50\u8fdb\u7a0b\n    var phantom = child_process.spawn('phantomjs', ['spider.js', url]);\n\n    \/\/ \u8bbe\u7f6estdout\u5b57\u7b26\u7f16\u7801\n    phantom.stdout.setEncoding('utf8');\n\n    \/\/ \u76d1\u542cphantomjs\u7684stdout\uff0c\u5e76\u62fc\u63a5\u8d77\u6765\n    phantom.stdout.on('data', function(data){\n        content += data.toString();\n    });\n\n    \/\/ \u76d1\u542c\u5b50\u8fdb\u7a0b\u9000\u51fa\u4e8b\u4ef6\n    phantom.on('exit', function(code){\n        switch (code){\n            case 1:\n                console.log('\u52a0\u8f7d\u5931\u8d25');\n                res.send('\u52a0\u8f7d\u5931\u8d25');\n                break;\n            case 2:\n                console.log('\u52a0\u8f7d\u8d85\u65f6: '+ url);\n                res.send(content);\n                break;\n            default:\n                res.send(content);\n                break;\n        }\n    });\n\n});\n\napp.listen(3000, function () {\n  console.log('Spider app listening on port 3000!');\n});\n\n```\n\n### `Prerender`\n\n\u4f7f\u7528`Prerender`\u4f18\u5316seo,\u7ecf\u8fc7\u6211\u7684\u6d4b\u8bd5\uff0c\u8fd9\u79cd\u65b9\u6cd5\u8981\u4f18\u4e8e`PhantomJS`\u4f46\u4e0d\u5982`puppeteer`(\u90fd\u5728\u670d\u52a1\u5668\u4e0a\u6d4b\u8bd5\uff0c\u4e14\u8bbf\u95ee\u540c\u6837\u7684\u9875\u9762)\uff0c\u800c\u4e14\u8fd8\u8981\u4f7f\u7528`Chrome`\n\n#### \u5b89\u88c5Chrome\n\n- \u914d\u7f6eyum\u6e90\n  \u56fd\u5185\u65e0\u6cd5\u8bbf\u95eeGoogle\uff0c\u9700\u8981\u914d\u7f6eyum\u6e90\uff0c\u5728\u76ee\u5f55 \/etc\/yum.repos.d\/ \u4e0b\u65b0\u5efagoogle-chrome.repo\u6587\u4ef6\n\n  ```\n  cd \/ect\/yum.repos.d\/\n  touch google-chrome.repo\n  ```\n\n- \u901a\u8fc7vi\u7f16\u8f91\u5668\u6dfb\u52a0\u5185\u5bb9\n\n  ```\n  vi google-chrome.repo\n  [google-chrome]\n  name=google-chrome\n  baseurl=http:\/\/dl.google.com\/linux\/chrome\/rpm\/stable\/$basearch\n  enabled=1\n  gpgcheck=1\n  gpgkey=https:\/\/dl-ssl.google.com\/linux\/linux_signing_key.pub\n  ```\n\n- \u5b89\u88c5\u8fd0\u884c\n\n  ```\n  \/\/ \u56fd\u5185\u63a8\u8350\n  yum -y install google-chrome-stable --nogpgcheck\n  ```\n\n- \u5b89\u88c5\u6210\u529f\u540e\u8def\u5f84\n  `\/opt\/google\/chrome`\n\n- \u5b89\u88c5\u6210\u529f\u540e\u65e0\u6cd5\u6253\u5f00chrome\n\n  \u4e3b\u8981\u7684\u89e3\u51b3\u529e\u6cd5\u662f\u627e\u5230`\/opt\/google\/chrome`\u76ee\u5f55\uff0c\u7f16\u8f91`google-chrome`\u6587\u4ef6\uff0c\u628a\u6700\u540e\u4e00\u884c\u7684 \n\n  ```\n  exec -a \"$0\" \"$HERE\/chrome\" \"$@\"\n  ```\n\n  \u4fee\u6539\u4e3a\n\n  ```\n  exec -a \"$0\" \"$HERE\/chrome\" \"$@\" --user-data-dir $HOME\n  ```\n\n\n#### \u5b89\u88c5Prerender\n\n>  Prerender \u662f\u4e00\u4e2a\u91c7\u7528[phantomjs](http:\/\/phantomjs.org\/)\u7684\u670d\u52a1\uff0c\u5b83\u662f\u53ef\u4ee5\u5bf9 JavaScript \u9875\u9762\u8fdb\u884c\u9759\u6001\u5316  [\u4e0b\u8f7d\u5730\u5740](https:\/\/github.com\/prerender\/prerender.git)\n\n```\ngit clone https:\/\/github.com\/prerender\/prerender.git\ncd prerender\nnpm install\n#\u542f\u52a8server.js\uff0c \u9ed8\u8ba4\u76d1\u542c3000\u7aef\u53e3\nnode server.js\n```\n\n\u901a\u8fc7curl \u547d\u4ee4\u89e3\u6790\u4f60\u8981\u8bbf\u95ee\u7684\u7f51\u5740\uff0c\u5982\u679c\u8fd4\u56de\u6e32\u67d3\u597d\u7684html \u5c31\u8bf4\u660e\u6210\u529f\u4e86\u3002\n\n```\ncurl http:\/\/localhost:3000\/\u4f60\u7684\u7f51\u7ad9\u8def\u5f84\n```\n\n#### Nginx\u914d\u7f6e\n\n```\nlocation \/ {\n\t# \u8868\u793a\u662f\u5426\u9700\u8981\u4ee3\u7406\n\tset $prerender 0;\n\t# \u4ee3\u7406\u5730\u5740\n\tset $prerender_url \"http:\/\/127.0.0.1:3000\";\n\n\t# \u5224\u65ad\u8bf7\u6c42\u662f\u5426\u6765\u81ea\u8718\u86db\uff0c\u5982\u679c\u662f\u5219\u8868\u793a\u9700\u8981\u4ee3\u7406\n\tif ($http_user_agent ~* \"baiduspider|Googlebot|360Spider|Bingbot|Sogou Spider|Yahoo! Slurp China|Yahoo! Slurp|twitterbot|facebookexternalhit|rogerbot|embedly|quora link preview|showyoubot|outbrain|pinterest|slackbot|vkShare|W3C_Validator\") {\n \t\tset $prerender 1;\n \t}\n \n\tif ($prerender = 1) {\n\t\tproxy_pass $prerender_url;\n\t\trewrite ^(.*)$ \/https:\/\/$host$1 break;\n\t}\n}\n```\n\n## \u603b\u7ed3\n\n\u8fd9\u4e09\u79cd\u65b9\u6cd5\u6211\u90fd\u5728\u6211\u7684\u7f51\u7ad9\u670d\u52a1\u5668\u6d4b\u8bd5\u8fc7\uff0c\u5e76\u901a\u8fc7\u767e\u5ea6\u5b98\u65b9\u7684\u6293\u53d6\u8bca\u65ad\u6d4b\u8bd5\u8fc7\uff0c\u4e5f\u4f7f\u7528\u8fc7`Postman`\u5de5\u5177\u672c\u5730\u6279\u91cf\u6293\u53d6\u6d4b\u8bd5\u3002\u867d\u7136\u8bf4`PhantomJS`\u54cd\u5e94\u65f6\u95f4\u90fd\u77ed\uff0c\u4f46\u5b83\u4e0d\u9002\u5408\u6211\u7684\u9879\u76ee\uff0c\u56e0\u4e3a\u90e8\u5206\u9875\u9762\u6ca1\u6709\u6e32\u67d3\u51fa\u6765\uff08\u6587\u7ae0\uff09\uff0c\u800c`Prerender`\u5728\u722c\u53d6\u7684\u65f6\u5019\u670d\u52a1\u5668\u51e0\u4e4e\u6ee1\u8f7d\u4e86\u3002\u800c\u4e14\u90e8\u5206\u9875\u9762\u4e5f\u6ca1\u6e32\u67d3\u5b8c\u5168\u3002\u7ecf\u8fc7\u6211\u4e0d\u65ad\u5730\u767e\u5ea6\u6700\u540e\u624d\u4f7f\u7528\u4e86`puppeteer`\u7b80\u5355\u4e0d\u590d\u6742\uff0c\u914d\u7f6e\u8bed\u53e5\u4e5f\u57fa\u672c\u80fd\u770b\u61c2\u3002\n### \u6548\u679c\n\u867d\u7136\u66f4\u65b0\u4e0d\u9891\u7e41\uff0c\u4f46\u662f\u7ecf\u8fc7\u51e0\u4e2a\u6708\u7684\u68c0\u9a8c\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u884c\uff0c\u73b0\u5728\u535a\u5ba2\u9875\u9762\u4e5f\u88ab\u767e\u5ea6\u6536\u5f55\u4e86\uff01\n![\u767e\u5ea6\u6536\u5f55](https:\/\/p.pstatp.com\/origin\/137ba00031ef636e84003)\n![\u8c37\u6b4c\u6536\u5f55](https:\/\/p.pstatp.com\/origin\/ff7000014cd7842bb658)\n\n> \u672c\u6587\u914d\u7f6e\uff0c\u6ca1\u6709\u7ecf\u4e25\u683c\u7684\u6d4b\u8bd5\uff0c\u82e5\u6709\u4e0d\u8db3\uff0c\u656c\u8bf7\u6307\u51fa","img":"https:\/\/p.pstatp.com\/origin\/13866000017d0d695d411","classty":"\u524d\u7aef","channels":null,"name":"Baymax","click":4,"like":1,"is_show":1,"head_show":1,"share_show":1,"copyright_show":1,"message_show":0,"deleted_at":1,"created_at":"2020-09-04T12:32:25.000000Z","updated_at":"2021-01-23T03:17:45.000000Z","message_count":2,"label":["Seo","Puppeteer","PhantomJS","Prerender"],"clicks":1},{"id":5,"title":"Vue\u535a\u5ba2\u524d\u7aef\u603b\u7ed3\u2014\u2014Vue\u5168\u5bb6\u6876","desc":"\u7ecf\u8fc7\u524d\u9762\u4e00\u7cfb\u5217\u7684\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u5f00\u59cb\u5bf9\u9879\u76ee\u90e8\u5206\u5f00\u59cb\u7f16\u5199\u3002\u5176\u4e2d\u4f1aVue \u5168\u5bb6\u6876 Vue Router\u53ca Vuex\u8fdb\u884c\u90e8\u5206\u603b\u7ed3\uff0c\u8fd8\u4f1a\u5bf9axios\u8fdb\u884c\u5c01\u88c5\uff0c\u5bf9\u9519\u8bef\u8fdb\u884c\u7edf\u4e00\u7684\u62e6\u622a\u3002\u8fd9\u4e9b\u63d2\u4ef6\u662f\u5bf9\u8def\u7531\u7ba1\u7406\uff0c\u6570\u636e\u4ea4\u6d41\uff0c\u7f51\u7edc\u4ea4\u4e92\u5404\u4e2a\u529f\u80fd\u7684\u5b9e\u73b0\uff0c\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u9891\u7e41\uff0c\u5bf9\u5176\u719f\u6089\u57fa\u672c\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u80fd\u591f\u5927\u5927\u7684\u63d0\u9ad8\u6548\u7387\u3002","content":"## \u524d\u8a00\n\n> \u7ecf\u8fc7\u524d\u9762\u4e00\u7cfb\u5217\u7684\u914d\u7f6e\uff0c\u4e5f\u53ef\u4ee5\u5f00\u59cb\u5bf9\u9879\u76ee\u90e8\u5206\u5f00\u59cb\u7f16\u5199\u3002\u5176\u4e2d\u4f1aVue \u5168\u5bb6\u6876 [Vue Router](https:\/\/router.vuejs.org\/zh\/) \u53ca [Vuex](https:\/\/vuex.vuejs.org\/zh\/) \u8fdb\u884c\u90e8\u5206\u603b\u7ed3\uff0c\u8fd8\u4f1a\u5bf9[axios](http:\/\/www.axios-js.com\/) \u8fdb\u884c\u5c01\u88c5\uff0c\u5bf9\u9519\u8bef\u8fdb\u884c\u7edf\u4e00\u7684\u62e6\u622a\u3002\u8fd9\u4e9b\u63d2\u4ef6\u662f\u5bf9\u8def\u7531\u7ba1\u7406\uff0c\u6570\u636e\u4ea4\u6d41\uff0c\u7f51\u7edc\u4ea4\u4e92\u5404\u4e2a\u529f\u80fd\u7684\u5b9e\u73b0\uff0c\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u9891\u7e41\uff0c\u5bf9\u5176\u719f\u6089\u57fa\u672c\u7684\u4f7f\u7528\u65b9\u6cd5\uff0c\u80fd\u591f\u5927\u5927\u7684\u63d0\u9ad8\u6548\u7387\u3002\n\n### Vue Router\n\n>  Vue Router \u662f [Vue.js](http:\/\/cn.vuejs.org\/) \u5b98\u65b9\u7684\u8def\u7531\u7ba1\u7406\u5668\u3002\u5b83\u548c Vue.js \u7684\u6838\u5fc3\u6df1\u5ea6\u96c6\u6210\uff0c\u8ba9\u6784\u5efa\u5355\u9875\u9762\u5e94\u7528\u53d8\u5f97\u6613\u5982\u53cd\u638c \n\n#### \u7b80\u5355\u914d\u7f6e\n\n```javascript\nimport Vue from 'vue'\nimport VueRouter from 'vue-router'\nVue.use(VueRouter)\n\nconst NewHome = () =>\n    import ('.\/..\/views\/NewHome.vue')\nconst name = \"\u4e91\u58a8\u767d\u7684\u535a\u5ba2\"\nconst routes = [\n    {\n        \/\/ \u4f1a\u5339\u914d\u6240\u6709\u8def\u5f84\n        path: '*',\n        name: 'Windmill',\n        component: Windmill,\n        meta: {\n            title: '\u54ce\u5440\u9875\u9762\u4e0d\u89c1\u4e86-' + name\n        }\n    },\n    {\n        path: '\/blog',\n        name: 'NewHome',\n        component: NewHome,\n        meta: {\n            \/\/ \u9700\u8981\u88ab\u7f13\u5b58\n            keepAlive: true, \n            title: '\u6587\u7ae0-' + name\n        }\n    },\n```\n\n#### \u5e38\u7528\u65b9\u6cd5\n\n- \u52a8\u6001\u8def\u7531\uff1a\u6b64\u914d\u7f6e\u7528\u4e8e\u52a8\u6001\u7684\u8bbe\u7f6e\u8def\u7531\u53c2\u6570\uff0c\u5c31\u5982 https:\/\/www.yunmobai.cn\/blog\/3 \u7f51\u5740\uff0c\u540e\u9762\u76843\u662f\u52a8\u6001\u8bf7\u6c42\u83b7\u53d6\uff0c\u7136\u540e\u5728\u6839\u636e\u503c\uff0c\u518d\u53bb\u83b7\u53d6\u6570\u636e\u3002\n- \u8def\u7531\u8df3\u8f6c\uff1a\u53ef\u4ee5\u901a\u8fc7`<route-link>`\u6807\u7b7e\u8fdb\u884c\u8df3\u8f6c\uff0c\u4f46\u6709\u65f6\u9700\u8981\u901a\u8fc7js\u8fdb\u884c\u8df3\u8f6c\uff0c\u5982axios\u7edf\u4e00\u62e6\u622a\u662f\u5bf9\u4e3a\u767b\u5f55\u7528\u6237\u8df3\u8f6c\u5230\u767b\u5f55\u754c\u9762\u7b49\uff01\n- \u8def\u7531\u61d2\u52a0\u8f7d\uff1a\u4f7f\u7528\u61d2\u52a0\u8f7d\uff0c\u9632\u6b62\u9996\u5c4f\u52a0\u8f7d\u7684\u7a7a\u767d\u65f6\u95f4\u8fc7\u957f\uff01\n- \u8def\u7531\u5b88\u536b\u8005\uff1a\u5bf9\u8def\u7531\u8df3\u8f6c\u8fdb\u884c\u64cd\u4f5c\uff01\u5982\uff0c\u4fdd\u5b58\u6570\u636e\u63d0\u793a\u7b49\u7b49\uff0c\u53ef\u4ee5\u6709\u5168\u5c40\u5b88\u671b\u548c\u7ec4\u4ef6\u5b88\u536b\uff0c\u5bf9\u4e0d\u540c\u7684\u9700\u6c42\u8fdb\u884c\u4f7f\u7528\u3002\n\n```javascript\n\/\/ \u52a8\u6001\u8def\u5f84\u53c2\u6570 \u4ee5\u5192\u53f7\u5f00\u5934\n{ path: '\/blog\/:id', component: Blog }\n\/\/\u83b7\u53d6\u53c2\u6570\nthis.$route.params.id\n\/\/\u8df3\u8f6c\nthis.$router.push('\/user-admin')\n\/\/\u7ec4\u4ef6\u5b88\u536b\nbeforeRouteEnter\nbeforeRouteUpdate (2.2 \u65b0\u589e)\nbeforeRouteLeave\n```\n\n### VueX\n\n>  Vuex \u662f\u4e00\u4e2a\u4e13\u4e3a Vue.js \u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u7684**\u72b6\u6001\u7ba1\u7406\u6a21\u5f0f**\u3002\u5b83\u91c7\u7528\u96c6\u4e2d\u5f0f\u5b58\u50a8\u7ba1\u7406\u5e94\u7528\u7684\u6240\u6709\u7ec4\u4ef6\u7684\u72b6\u6001\uff0c\u5e76\u4ee5\u76f8\u5e94\u7684\u89c4\u5219\u4fdd\u8bc1\u72b6\u6001\u4ee5\u4e00\u79cd\u53ef\u9884\u6d4b\u7684\u65b9\u5f0f\u53d1\u751f\u53d8\u5316 \n\n#### \u7b80\u5355\u914d\u7f6e\n\n```javascript\nimport http from '@\/utils\/httpindex.js'\nconst user = {\n    \/\/\u521d\u59cb\u5316\n    state: {\n        token: localStorage.getItem('user_token') || '',\n    },\n    \/\/store.commit('setToken')\n    mutations: {\n        setToken(state, data) { \/\/\u5199\u5165token\n            state.token = data\n        },\n    },\n    \/\/store.dispatch('setToken')\n    actions: {\n        setToken({ commit }, data) {\n            \/\/ localStorage.setItem(\"so_token\", data);\n            commit('setToken', data)\n        }\n    }\n}\nexport default user\n```\n\n\u901a\u8fc7\u4ee5\u4e0a\u7684\u57fa\u672c\u914d\u7f6e\uff0c\u5c31\u53ef\u4ee5\u628a\u670d\u52a1\u5668\u4f20\u8fc7\u6765\u7684state\u4fdd\u5b58\u8d77\u6765\n\n-  state:\u4e00\u4e2a\u521d\u59cb state \u5bf9\u8c61 \n-  mutations: \u66f4\u6539 Vuex \u7684 store \u4e2d\u7684\u72b6\u6001\u7684\u552f\u4e00\u65b9\u6cd5\uff0c\n-  actions:  \u901a\u8fc7\u63d0\u4ea4\u7684\u662f mutation\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u53d8\u66f4\u72b6\u6001 \uff0c \u53ef\u4ee5\u5305\u542b\u4efb\u610f\u5f02\u6b65\u64cd\u4f5c\u3002 \n\n\u5927\u591a\u6570\u90fd\u662f\u901a\u8fc7actions\u8c03\u7528mutations\u53bb\u4fee\u6539\u6570\u636e\uff0c\u800c\u4e0d\u76f4\u63a5\u901a\u8fc7 `store.state.token`\u53bb\u4fee\u6539token\u503c\n\n### axios\n\n\u901a\u8fc7axios\u7684\u5c01\u88c5\u5bf9\u540e\u53f0\u7684\u6570\u636e\u8fdb\u884c\u7edf\u4e00\u7684\u5904\u7406\uff0c\u80fd\u591f\u63d0\u9ad8\u5f00\u53d1\u6548\u7387\uff0c\n\n```javascript\nimport axios from 'axios'\nimport store from '..\/pages\/home\/store'\nimport { Notification } from 'element-ui';\nimport router from '@\/pages\/home\/router'\nvar instance = axios.create({\n    \/\/\u8bf7\u6c42\u5730\u5740\n    baseURL: process.env.VUE_APP_URL,\n    \/\/\u8d85\u65f6\u65f6\u95f4\n    timeout: 10000,\n});\n\/\/ \u6dfb\u52a0\u8bf7\u6c42\u62e6\u622a\u5668\ninstance.interceptors.request.use(function(config) {\n    \/\/ \u5728\u53d1\u9001\u8bf7\u6c42\u4e4b\u524d\u505a\u4e9b\u4ec0\u4e48\n    \/\/\u8bbe\u7f6e\u8bf7\u6c42\u5934\n    config.headers['X-Requested-With'] = 'XMLHttpRequest'\n    return config;\n}, function(error) {\n    \/\/ \u5bf9\u8bf7\u6c42\u9519\u8bef\u505a\u4e9b\u4ec0\u4e48\n    return Promise.reject(error);\n});\n\n\/\/ \u6dfb\u52a0\u54cd\u5e94\u62e6\u622a\u5668\ninstance.interceptors.response.use(function(response) {\n        \/\/ \u5bf9\u54cd\u5e94\u6570\u636e\u505a\u70b9\u4ec0\u4e48\n        \/\/ Message('\u64cd\u4f5c\u6210\u529f')\n        if (response.headers.authorization) {\n            \/\/\u901a\u8fc7VueX\u4fdd\u5b58\u6570\u636e\n            store.dispatch(\"setToken\", response.headers.authorization);\n        }\n        \/\/ \u6253\u5370\u9519\u8bef\u4fe1\u606f\n        return Promise.reject(response.data)\n    },\n    function(error) {\n        \/\/ \u5bf9\u54cd\u5e94\u9519\u8bef\u505a\u70b9\u4ec0\u4e48\n        switch (error.response.status) {\n           \n            case 422:\n                Notification.warning({\n                    title: '\u6e29\u99a8\u63d0\u793a',\n                    message: error.response.data.message,\n                    onClose() {\n                        \/\/\u901a\u8fc7VueX\u6e05\u9664\u7528\u6237\u4fe1\u606f\n                        store.dispatch(\"logOut\")\n                        router.push('\/login')\n                    },\n                });\n                break;\n            default:\n                Notification.error({\n                    title: '\u9519\u8bef\u63d0\u793a ' + error.response.status,\n                    message: error.response.data.message,\n                });\n\n        }\n        return Promise.reject(error)\n    });\nexport default instance;\n```\n\n\u5728main.js\u4e2d\u628aaxios\u7684get\u548cpost\u65b9\u6cd5\u6302\u8f7d\u5230vue\u7684\u539f\u578b\u4e0a\uff0c\u5728\u4e4b\u540e\u5c31\u53ef\u4ee5\u901a\u8fc7`this.$get`\u548c`this.$post`\u53bb\u8bf7\u6c42\u6570\u636e\u4e86\u3002\n\n```javascript\nVue.prototype.$get = axios.get;\nVue.prototype.$post = axios.post;\n```\n\n> \u672c\u6587\u4e3a\u4e2a\u4eba\u7406\u89e3\uff0c\u82e5\u6709\u4e0d\u8db3\uff0c\u656c\u8bf7\u6307\u51fa","img":"https:\/\/p.pstatp.com\/origin\/13822000113a5bae648b6","classty":"\u524d\u7aef","channels":null,"name":"Baymax","click":3,"like":1,"is_show":1,"head_show":1,"share_show":1,"copyright_show":1,"message_show":0,"deleted_at":1,"created_at":"2020-09-03T00:12:18.000000Z","updated_at":"2020-10-08T06:41:22.000000Z","message_count":1,"label":["Vue","Vuex","Vue Router","axios"],"clicks":1}],"first_page_url":"http:\/\/127.0.0.1:8000\/api\/v1\/blog\/list?page=1","from":13,"last_page":4,"last_page_url":"http:\/\/127.0.0.1:8000\/api\/v1\/blog\/list?page=4","next_page_url":"http:\/\/127.0.0.1:8000\/api\/v1\/blog\/list?page=4","path":"http:\/\/127.0.0.1:8000\/api\/v1\/blog\/list","per_page":6,"prev_page_url":"http:\/\/127.0.0.1:8000\/api\/v1\/blog\/list?page=2","to":18,"total":22}}